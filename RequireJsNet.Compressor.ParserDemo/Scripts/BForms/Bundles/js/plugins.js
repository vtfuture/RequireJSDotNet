/*
 * jQuery Validation Plugin 1.11.1
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright 2013 Jörn Zaefferer
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
(function(a){if(typeof define==="function"&&define.amd){define("bforms-validate",["jquery"],a)}else{a()}}(function(b){(function(a){a.extend(a.fn,{validate:function(c){if(!this.length){if(c&&c.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var d=a.data(this[0],"validator");if(d){return d}this.attr("novalidate","novalidate");d=new a.validator(c,this[0]);a.data(this[0],"validator",d);if(d.settings.onsubmit){this.validateDelegate(":submit","click",function(e){if(d.settings.submitHandler){d.submitButton=e.target}if(a(e.target).hasClass("cancel")){d.cancelSubmit=true}if(a(e.target).attr("formnovalidate")!==undefined){d.cancelSubmit=true}});this.submit(function(e){if(d.settings.debug){e.preventDefault()}function f(){var g;if(d.settings.submitHandler){if(d.submitButton){g=a("<input type='hidden'/>").attr("name",d.submitButton.name).val(a(d.submitButton).val()).appendTo(d.currentForm)}d.settings.submitHandler.call(d,d.currentForm,e);if(d.submitButton){g.remove()}return false}return true}if(d.cancelSubmit){d.cancelSubmit=false;return f()}if(d.form()){if(d.pendingRequest){d.formSubmitted=true;return false}return f()}else{d.focusInvalid();return false}})}return d},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var d=a(this[0].form).validate();this.each(function(){c=c&&d.element(this)});return c}},removeAttrs:function(d){var e={},c=this;a.each(d.split(/\s/),function(f,g){e[g]=c.attr(g);c.removeAttr(g)});return e},rules:function(d,c){var f=this[0];if(d){var j=a.data(f.form,"validator").settings;var k=j.rules;var g=a.validator.staticRules(f);switch(d){case"add":a.extend(g,a.validator.normalizeRule(c));delete g.messages;k[f.name]=g;if(c.messages){j.messages[f.name]=a.extend(j.messages[f.name],c.messages)}break;case"remove":if(!c){delete k[f.name];return g}var h={};a.each(c.split(/\s/),function(l,m){h[m]=g[m];delete g[m]});return h}}var e=a.validator.normalizeRules(a.extend({},a.validator.classRules(f),a.validator.attributeRules(f),a.validator.dataRules(f),a.validator.staticRules(f)),f);if(e.required){var i=e.required;delete e.required;e=a.extend({required:i},e)}return e}});a.extend(a.expr[":"],{blank:function(c){return !a.trim(""+a(c).val())},filled:function(c){return !!a.trim(""+a(c).val())},unchecked:function(c){return !a(c).prop("checked")}});a.validator=function(d,c){this.settings=a.extend(true,{},a.validator.defaults,d);this.currentForm=c;this.init()};a.validator.format=function(d,c){if(arguments.length===1){return function(){var e=a.makeArray(arguments);e.unshift(d);return a.validator.format.apply(this,e)}}if(arguments.length>2&&c.constructor!==Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!==Array){c=[c]}a.each(c,function(e,f){d=d.replace(new RegExp("\\{"+e+"\\}","g"),function(){return f})});return d};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:"",selectedSuffix:".SelectedValues",partialNameSearch:false,checklistClass:"bs-checkbox",bsDropdownClass:"bs-dropdown",validationSummaryKey:"BsFormError",scrollToError:true,ignoreTitle:false,onfocusin:function(c,d){this.lastActive=c;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,c,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(c)).hide()}},onfocusout:function(c,d){if(!this.checkable(c)&&(c.name in this.submitted||!this.optional(c))){this.element(c)}},onkeyup:function(c,d){if(d.which===9&&this.elementValue(c)===""){return}else{if(c.name in this.submitted||c===this.lastElement){this.element(c)}}},onclick:function(d,e){if(d.name in this.submitted){this.element(d)}else{if(d.parentNode.name in this.submitted){this.element(d.parentNode)}else{var c=a(d);if(c.hasClass(this.settings.checklistClass)||c.hasClass(this.settings.bsDropdownClass)){this.element(d)}}}},highlight:function(c,d,e){if(c.type==="radio"){this.findByName(c.name).addClass(d).removeClass(e)}else{a(c).addClass(d).removeClass(e)}},unhighlight:function(c,d,e){if(c.type==="radio"){this.findByName(c.name).removeClass(d).addClass(e)}else{a(c).removeClass(d).addClass(e)}}},setDefaults:function(c){a.extend(a.validator.defaults,c)},messages:{required:"This field is required.",mandatory:"This field is mandatory.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var d=(this.groups={});a.each(this.settings.groups,function(f,g){if(typeof g==="string"){g=g.split(/\s/)}a.each(g,function(h,i){d[i]=f})});var e=this.settings.rules;a.each(e,function(f,g){e[f]=a.validator.normalizeRule(g)});function c(f){var h=a.data(this[0].form,"validator"),g="on"+f.type.replace(/^validate/,"");if(h.settings[g]){h.settings[g].call(h,this[0],f)}}a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",c).validateDelegate("[type='radio'], [type='checkbox'], select, option","click customchange",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors(null,true);return this.valid()},checkForm:function(){this.prepareForm();for(var d=0,c=(this.currentElements=this.elements());c[d];d++){this.check(c[d])}return this.valid()},element:function(c){c=this.validationTargetFor(this.clean(c));if(typeof c==="undefined"){return}this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var d=this.check(c)!==false;if(d){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return d},showErrors:function(i,l){if(i){a.extend(this.errorMap,i);this.errorList=[];var n=null;var m;for(var k in i){var h={message:i[k],element:this.findByName(k)[0]};if(typeof h.element!=="undefined"){this.errorList.push(h)}else{if(k.indexOf(this.settings.validationSummaryKey)!==-1){m=this.showSummaryError(i[k])}else{this.removeSummaryError()}}}this.successList=a.grep(this.successList,function(o){return !(o.name in i)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}if(this.errorList.length===0){this.removeSummaryError()}if(l&&this.settings.scrollToError===true&&(this.errorList[0]!=null||typeof m!=="undefined")){var j=null;if(this.errorList[0]!=null){j=this.errorList[0]}if(typeof m!=="undefined"){if(j!=null){if(m.element.prevAll(j.element).length===0){j=m}}else{j=m}}var c=a(j.element).parents(".has-error, .bs-validation_summary").first();if(c.offset()!=null&&typeof c.offset()!=="undefined"){var g=c.offset().top;var f=g+c.height();var e=a(document).scrollTop();var d=e+a(window).height();if(g<e||f>d){a("html, body").animate({scrollTop:c.offset().top-200})}}}},showSummaryError:function(e){var d=a(this.currentForm).find(".bs-validation_summary");if(d.length==0){d=a('<div class="col-sm-12 col-lg-12 bs-validation_summary"></div>');a(this.currentForm).prepend(d)}var c=a('<div class="bs-form-error alert alert-danger"><button class="close" data-dismiss="alert" type="button">×</button>'+e+"</div>");d.html(c);return{element:c}},removeSummaryError:function(){var c=a(this.currentForm).find(".bs-validation_summary");if(c.length){c.html("")}},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.hideBsErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var c=0;for(var d in e){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},hideBsErrors:function(){var c=a(this.currentForm).find(".has-error");c.each(function(){a(this).find(".field-validation-error").removeClass("field-validation-error").addClass("field-validation-valid").end().removeClass("has-error")})},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(c){}}},findLastActive:function(){var c=this.lastActive;return c&&a.grep(this.errorList,function(d){return d.element.name===c.name}).length===1&&c},elements:function(){var d=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&d.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in c||!d.objectLength(a(this).rules())){return false}c[this.name]=true;return true})},clean:function(c){return a(c)[0]},errors:function(){var c=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+c,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(c){this.reset();this.toHide=this.errorsFor(c)},elementValue:function(c){var d=a(c).attr("type"),e=a(c).val();if(d==="radio"||d==="checkbox"){return a("input[name='"+a(c).attr("name")+"']:checked").val()}if(typeof e==="string"){return e.replace(/\r/g,"")}return e},check:function(f){f=this.validationTargetFor(this.clean(f));var j=a(f).rules();var c=false;var k=this.elementValue(f);var h;for(var g in j){var i={method:g,parameters:j[g]};try{h=a.validator.methods[g].call(this,k,f,i.parameters);if(h==="dependency-mismatch"){c=true;continue}c=false;if(h==="pending"){this.toHide=this.toHide.not(this.errorsFor(f));return}if(!h){this.formatAndAdd(f,i);return false}}catch(d){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+f.id+", check the '"+i.method+"' method.",d)}throw d}}if(c){return}if(this.objectLength(j)){this.successList.push(f)}return true},customDataMessage:function(c,d){return a(c).data("msg-"+d.toLowerCase())||(c.attributes&&a(c).attr("data-msg-"+d.toLowerCase()))},customMessage:function(e,d){var c=this.settings.messages[e];return c&&(c.constructor===String?c:c[d])},findDefined:function(){for(var c=0;c<arguments.length;c++){if(arguments[c]!==undefined){return arguments[c]}}return undefined},defaultMessage:function(c,d){return this.findDefined(this.customMessage(c.name,d),this.customDataMessage(c,d),!this.settings.ignoreTitle&&c.title||undefined,a.validator.messages[d],"<strong>Warning: No message defined for "+c.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),f=/\$?\{(\d+)\}/g;if(typeof d==="function"){d=d.call(this,e.parameters,c)}else{if(f.test(d)){d=a.validator.format(d.replace(f,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(c){if(this.settings.wrapper){c=c.add(c.parent(this.settings.wrapper))}return c},defaultShowErrors:function(){var e,c;for(e=0;this.errorList[e];e++){var d=this.errorList[e];if(this.settings.highlight){this.settings.highlight.call(this,d.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(d.element,d.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(e=0;this.successList[e];e++){this.showLabel(this.successList[e])}}if(this.settings.unhighlight){for(e=0,c=this.validElements();c[e];e++){this.settings.unhighlight.call(this,c[e],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,e){var d=this.errorsFor(c);if(d.length){d.removeClass(this.settings.validClass).addClass(this.settings.errorClass);d.html(e)}else{d=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(c)).addClass(this.settings.errorClass).html(e||"");if(this.settings.wrapper){d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(d).length){if(this.settings.errorPlacement){this.settings.errorPlacement(d,a(c))}else{d.insertAfter(c)}}}if(!e&&this.settings.success){d.text("");if(typeof this.settings.success==="string"){d.addClass(this.settings.success)}else{this.settings.success(d,c)}}this.toShow=this.toShow.add(d)},errorsFor:function(c){var d=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")===d})},idOrName:function(c){return this.groups[c.name]||(this.checkable(c)?c.name:c.id||c.name)},validationTargetFor:function(c){if(this.checkable(c)){c=this.findByName(c.name).not(this.settings.ignore)[0]}return c},checkable:function(c){return(/radio|checkbox/i).test(c.type)},findByName:function(d){var c=a(this.currentForm).find("[name='"+d+"']");if(c.length===0){c=a(this.currentForm).find("[name='"+d+this.settings.selectedSuffix+"']")}if(this.settings.partialNameSearch){if(c.length===0){c=a(this.currentForm).find("[name*='"+d+"']")}}return c},getLength:function(d,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c)){return this.findByName(c.name).filter(":checked").length}}return d.length},depend:function(d,c){return this.dependTypes[typeof d]?this.dependTypes[typeof d](d,c):true},dependTypes:{"boolean":function(d,c){return d},string:function(d,c){return !!a(d,c.form).length},"function":function(d,c){return d(c)}},optional:function(c){var d=this.elementValue(c);return c.nodeName.toLowerCase()==="select"?c.getAttribute("data-val-required")==true:!a.validator.methods.required.call(this,d,c)&&"dependency-mismatch"},startRequest:function(c){if(!this.pending[c.name]){this.pendingRequest++;this.pending[c.name]=true}},stopRequest:function(c,d){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[c.name];if(d&&this.pendingRequest===0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!d&&this.pendingRequest===0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(c){return a.data(c,"previousValue")||a.data(c,"previousValue",{old:null,valid:true,message:this.defaultMessage(c,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(c,d){if(c.constructor===String){this.classRuleSettings[c]=d}else{a.extend(this.classRuleSettings,c)}},classRules:function(d){var e={};var c=a(d).attr("class");if(c){a.each(c.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(e,a.validator.classRuleSettings[this])}})}return e},attributeRules:function(d){var f={};var c=a(d);var g=c[0].getAttribute("type");for(var e in a.validator.methods){var h;if(e==="required"){h=c.get(0).getAttribute(e);if(h===""){h=true}h=!!h}else{h=c.attr(e)}if(/min|max/.test(e)&&(g===null||/number|range|text/.test(g))){h=Number(h)}if(h){f[e]=h}else{if(g===e&&g!=="range"){f[e]=true}}}if(f.maxlength&&/-1|2147483647|524288/.test(f.maxlength)){delete f.maxlength}return f},dataRules:function(d){var e,g,f={},c=a(d);for(e in a.validator.methods){g=c.data("rule-"+e.toLowerCase());if(g!==undefined){f[e]=g}}return f},staticRules:function(c){var d={};var e=a.data(c.form,"validator");if(e.settings.rules){d=a.validator.normalizeRule(e.settings.rules[c.name])||{}}return d},normalizeRules:function(d,c){a.each(d,function(f,g){if(g===false){delete d[f];return}if(g.param||g.depends){var e=true;switch(typeof g.depends){case"string":e=!!a(g.depends,c.form).length;break;case"function":e=g.depends.call(c,c);break}if(e){d[f]=g.param!==undefined?g.param:true}else{delete d[f]}}});a.each(d,function(f,e){d[f]=a.isFunction(e)?e(c):e});a.each(["minlength","maxlength"],function(){if(d[this]){d[this]=Number(d[this])}});a.each(["rangelength","range"],function(){var e;if(d[this]){if(a.isArray(d[this])){d[this]=[Number(d[this][0]),Number(d[this][1])]}else{if(typeof d[this]==="string"){e=d[this].split(/[\s,]+/);d[this]=[Number(e[0]),Number(e[1])]}}}});if(a.validator.autoCreateRanges){if(d.min&&d.max){d.range=[d.min,d.max];delete d.min;delete d.max}if(d.minlength&&d.maxlength){d.rangelength=[d.minlength,d.maxlength];delete d.minlength;delete d.maxlength}}return d},normalizeRule:function(c){if(typeof c==="string"){var d={};a.each(c.split(/\s/),function(){d[this]=true});c=d}return c},addMethod:function(e,d,c){a.validator.methods[e]=d;a.validator.messages[e]=c!==undefined?c:a.validator.messages[e];if(d.length<3){a.validator.addClassRules(e,a.validator.normalizeRule(e))}},methods:{required:function(f,c,d){if(!this.depend(d,c)){return"dependency-mismatch"}if(c.nodeName.toLowerCase()==="select"){var e=a(c).val();return e!=null&e!=""&&e.length>0}if(this.checkable(c)){return this.getLength(f,c)>0}return a.trim(f).length>0},email:function(d,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(d)},url:function(d,c){return this.optional(c)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(d)},date:function(d,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(d).toString())},dateISO:function(d,c){return this.optional(c)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(d)},number:function(d,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(d)},digits:function(d,c){return this.optional(c)||/^\d+$/.test(d)},creditcard:function(i,e){if(this.optional(e)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(i)){return false}var g=0,h=0,c=false;i=i.replace(/\D/g,"");for(var f=i.length-1;f>=0;f--){var d=i.charAt(f);h=parseInt(d,10);if(c){if((h*=2)>9){h-=9}}g+=h;c=!c}return(g%10)===0},minlength:function(f,c,e){var d=a.isArray(f)?f.length:this.getLength(a.trim(f),c);return this.optional(c)||d>=e},maxlength:function(f,c,e){var d=a.isArray(f)?f.length:this.getLength(a.trim(f),c);return this.optional(c)||d<=e},rangelength:function(f,c,e){var d=a.isArray(f)?f.length:this.getLength(a.trim(f),c);return this.optional(c)||(d>=e[0]&&d<=e[1])},min:function(e,c,d){return this.optional(c)||e>=d},max:function(e,c,d){return this.optional(c)||e<=d},range:function(e,c,d){return this.optional(c)||(e>=d[0]&&e<=d[1])},equalTo:function(f,c,d){var e=a(d);if(this.settings.onfocusout){e.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()})}return f===e.val()},remote:function(h,d,e){if(this.optional(d)){return"dependency-mismatch"}var f=this.previousValue(d);if(!this.settings.messages[d.name]){this.settings.messages[d.name]={}}f.originalMessage=this.settings.messages[d.name].remote;this.settings.messages[d.name].remote=f.message;e=typeof e==="string"&&{url:e}||e;if(f.old===h){return f.valid}f.old=h;var g=this;this.startRequest(d);var c={};c[d.name]=h;a.ajax(a.extend(true,{url:e,mode:"abort",port:"validate"+d.name,dataType:"json",data:c,success:function(k){g.settings.messages[d.name].remote=f.originalMessage;var m=k===true||k==="true";if(m){var l=g.formSubmitted;g.prepareElement(d);g.formSubmitted=l;g.successList.push(d);delete g.invalid[d.name];g.showErrors()}else{var i={};var j=k||g.defaultMessage(d,"remote");i[d.name]=f.message=a.isFunction(j)?j(h):j;g.invalid[d.name]=true;g.showErrors(i)}f.valid=m;g.stopRequest(d,m)}},e));return"pending"}}});a.format=a.validator.format}(jQuery));(function(a){var d={};if(a.ajaxPrefilter){a.ajaxPrefilter(function(g,e,h){var f=g.port;if(g.mode==="abort"){if(d[f]){d[f].abort()}d[f]=h}})}else{var c=a.ajax;a.ajax=function(g){var e=("mode" in g?g:a.ajaxSettings).mode,f=("port" in g?g:a.ajaxSettings).port;if(e==="abort"){if(d[f]){d[f].abort()}d[f]=c.apply(this,arguments);return d[f]}return c.apply(this,arguments)}}}(jQuery));(function(a){a.extend(a.fn,{validateDelegate:function(c,e,d){return this.bind(e,function(f){var g=a(f.target);if(g.is(c)){return d.apply(g,arguments)}})}})}(jQuery))}));/*
** Unobtrusive validation support library for jQuery and jQuery Validate
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(a){if(typeof define==="function"&&define.amd){define("bforms-validate-unobtrusive",["jquery","bootstrap","bforms-validate"],a)}else{a(window.jQuery)}}(function(a){var b=a.validator,c,e="unobtrusiveValidation";function l(o,p,q){o.rules[p]=q;if(o.message){o.messages[p]=o.message}}function m(o){return o.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function f(o){return o.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")}function g(o){return o.substr(0,o.lastIndexOf(".")+1)}function d(p,o){if(p.indexOf("*.")===0){p=p.replace("*.",o)}return p}function h(p,q){var o=a(this).find("[data-valmsg-for='"+f(q[0].name)+"']"),r=a.parseJSON(o.attr("data-valmsg-replace")||"null")!==false;o.removeClass("field-validation-valid").addClass("field-validation-error");o.closest(".form-group").addClass("has-error");p.data("unobtrusiveContainer",o);if(o.data("toggle")==="tooltip"&&typeof o.data("bs.tooltip")==="undefined"){o.tooltip({container:"body"})}o.prop("title",p.text()).tooltip("fixTitle")}function i(p,r){var o=a(this).find("[data-valmsg-summary=true]"),q=o.find("ul");if(q&&q.length&&r.errorList.length){q.empty();o.addClass("validation-summary-errors").removeClass("validation-summary-valid");a.each(r.errorList,function(){a("<li />").html(this.message).appendTo(q)})}}function k(p){var o=p.data("unobtrusiveContainer"),q=a.parseJSON(o.attr("data-valmsg-replace")||"null");if(o){o.addClass("field-validation-valid").removeClass("field-validation-error");o.closest(".form-group").removeClass("has-error");p.removeData("unobtrusiveContainer");if(q){o.empty()}}}function j(p){var o=a(this);o.data("validator").resetForm();o.find(".validation-summary-errors").addClass("validation-summary-valid").removeClass("validation-summary-errors");o.find(".field-validation-error").addClass("field-validation-valid").removeClass("field-validation-error").removeData("unobtrusiveContainer").find(">*").removeData("unobtrusiveContainer");o.find(".form-group").removeClass("has-error")}function n(p){var o=a(p),r=o.data(e),q=a.proxy(j,p);if(!r){r={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:a.proxy(h,p),invalidHandler:a.proxy(i,p),messages:{},rules:{},success:a.proxy(k,p)},attachValidation:function(){o.unbind("reset."+e,q).bind("reset."+e,q).validate(this.options)},validate:function(){o.validate();return o.valid()}};o.data(e,r)}return r}b.unobtrusive={adapters:[],parseElement:function(p,t){var o=a(p),q=o.parents("form")[0],u,s,r;if(!q){return}u=n(q);u.options.rules[p.name]=s={};u.options.messages[p.name]=r={};a.each(this.adapters,function(){var x="data-val-"+this.name,v=o.attr(x),w={};if(v!==undefined){x+="-";a.each(this.params,function(){w[this]=o.attr(x+this)});this.adapt({element:p,form:q,message:v,params:w,rules:s,messages:r})}});a.extend(s,{__dummy__:true});if(!t){u.attachValidation()}},parse:function(q){var o=a(q).parents("form").andSelf().add(a(q).find("form")).filter("form");a(q).find(":input[data-val=true]").each(function(){b.unobtrusive.parseElement(this,true)});o.each(function(){var r=n(this);if(r){r.attachValidation()}});a("span[data-toggle=tooltip]").tooltip({container:"body"});var p=a('<input type="number"></input>').val("chrome").val()=="chrome";if(!p){a('input[type="number"]').prop("type","text")}}};c=b.unobtrusive.adapters;c.add=function(o,q,p){if(!p){p=q;q=[]}this.push({name:o,params:q,adapt:p});return this};c.addBool=function(o,p){return this.add(o,function(q){l(q,p||o,true)})};c.addMinMax=function(o,t,q,s,r,p){return this.add(o,[r||"min",p||"max"],function(w){var v=w.params.min,u=w.params.max;if(v&&u){l(w,s,[v,u])}else{if(v){l(w,t,v)}else{if(u){l(w,q,u)}}}})};c.addSingleVal=function(o,p,q){return this.add(o,[p||"val"],function(r){l(r,q||o,r.params[p])})};b.addMethod("__dummy__",function(q,o,p){return true});b.addMethod("regex",function(r,o,q){var p;if(this.optional(o)){return true}p=new RegExp(q).exec(r);return(p&&(p.index===0)&&(p[0].length===r.length))});c.addSingleVal("accept","exts").addSingleVal("regex","pattern");c.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");c.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");jQuery.validator.addMethod("mandatory",function(q,p){var o=a(p);if(o.prop("type")=="checkbox"){if(!o.prop("checked")){return false}}return true});a.validator.unobtrusive.adapters.addBool("mandatory");c.add("equalto",["other"],function(q){var s=g(q.element.name),r=q.params.other,p=d(r,s),o=a(q.form).find(":input[name='"+f(p)+"']")[0];l(q,"equalTo",o)});c.add("required",function(o){if(o.element.tagName.toUpperCase()!=="INPUT"||o.element.type.toUpperCase()!=="CHECKBOX"){l(o,"required",true)}});c.add("remote",["url","type","additionalfields"],function(o){var q={url:o.params.url,type:o.params.type||"GET",data:{}},p=g(o.element.name);a.each(m(o.params.additionalfields||o.element.name),function(s,r){var t=d(r,p);q.data[t]=function(){return a(o.form).find(":input[name='"+f(t)+"']").val()}});l(o,"remote",q)});a(function(){b.unobtrusive.parse(document)})}));(function(a){if(typeof define==="function"&&define.amd){define("bforms-datepicker",["jquery","bforms-datepicker-tmpl","moment","moment-calendar"],a)}else{a(window.jQuery,window.bsDatepickerRenderer,moment)}}(function(a,c,d){var b=function(e,f){this.$element=e;if(this.$element.hasClass("hasDatepicker")){return}this.options=a.extend(true,{},f);this.init();return e};b.prototype.init=function(){this.renderer=new c();if(this.options.checkForMobileDevice==true){this.options.inlineMobile=a.browser!=null&&a.browser.mobile==true}if(this.options.inlineMobile&&this.options.inline!=true){this._initInlineMobile();if(this.$element.is("input")){if(this.options.readonlyInput||(a.browser!=null&&a.browser.mobile==true)){this.$element.prop("readonly",true)}}}else{if(this.$element.is("input")){this.$input=this.$element;if(this.options.readonlyInput||(a.browser!=null&&a.browser.mobile==true)){this.$input.prop("readonly",true)}}this.newMoment=d().lang(this.options.language);switch(this.options.type){case"datepicker":default:this._type=this.enums.Type.Datepicker;break;case"timepicker":this._type=this.enums.Type.Timepicker;break;case"datetimepicker":this._type=this.enums.Type.DateTimepicker;break;case this.enums.Type.Datepicker:case this.enums.Type.Timepicker:case this.enums.Type.DateTimepicker:this._type=this.options.type;break}this._visible=this.options.inline?true:false;if(this.options.visible==false){this._visible=false}this._getInitialValue();this._initRenderModel();this._initLang(this.options.language);this._initOptions();if(this.$input!=null&&this.$input.val()!=""){this._updateDisplays()}this._buildElement();this._addHandlers();this.$element.addClass("hasDatepicker");this.$element.data("bDatepicker",this);this._timeoutHandler=null}};b.prototype._getInitialValue=function(){this._valueSet=null;if(typeof this.options.initialValue!=="undefined"&&this.options.initialValue!=""){var e=d(this.options.initialValue).lang(this.options.language);this.currentValue=e.clone();this._valueSet=true;this._updateDisplays()}else{if(this.$element.is("input")){var f=this.$element.val(),g=d(f);if(g!=null){g.lang(this.options.language)}if(g!=null&&g.isValid()){this.currentValue=g.lang(this.options.language)}else{this.currentValue=this._getDefaultDate().lang(this.options.language)}}else{this.currentValue=this._getDefaultDate().lang(this.options.language)}}if(this.options.allowDeselect!==true){this._valueSet=true}this.value=this.currentValue.clone();return this.value};b.prototype._initRenderModel=function(){this.renderModel=a.extend(true,{},this.defaultRenderModel);switch(this.options.startView){case"days":default:this._currentDisplay=this.enums.Display.Days;break;case"months":this._currentDisplay=this.enums.Display.Months;break;case"years":this._currentDisplay=this.enums.Display.Years;break}switch(this._type){case this.enums.Type.DateTimepicker:default:this._type=this.enums.Type.DateTimepicker;this.renderModel.WithDate=true;this.renderModel.WithTime=true;break;case this.enums.Type.Datepicker:this.renderModel.WithTime=false;break;case this.enums.Type.Timepicker:this.renderModel.WithDate=false;break}this.renderModel.ShowClose=this.options.showClose||false;if(typeof this.options.buttons!=="undefined"&&a.isArray(this.options.buttons)){this.renderModel.Buttons=[];for(var e in this.options.buttons){var g=this.options.buttons[e];var f={cssClass:g.cssClass,text:g.text};f.cssClass+=" btn";if(g.placement=="left"){f.cssClass+=" pull-left"}else{if(g.placement=="right"){f.cssClass+=" pull-right"}}this.renderModel.Buttons.push(f);this.renderModel.HasCustomButtons=true}}};b.prototype._initOptions=function(){if(typeof this.options.format!=="undefined"){this._displayFormat=this.options.format}else{switch(this._type){case this.enums.Type.DateTimepicker:this._displayFormat=d.langData(this.options.language)._longDateFormat.L+" "+d.langData(this.options.language)._longDateFormat.LT;break;case this.enums.Type.Datepicker:this._displayFormat=d.langData(this.options.language)._longDateFormat.L;break;case this.enums.Type.Timepicker:this._displayFormat=d.langData(this.options.language)._longDateFormat.LT;break;default:}}if(typeof this.options.selectOnly!=="undefined"&&this.options.selectOnly!=""){this._displayFormat=this.options.selectOnlyFormats[this.options.selectOnly];if(typeof this.options.timeFormat!=="undefined"&&this.options.timeFormat!=""){this._displayFormat+=" "+this.options.timeFormat}switch(this.options.selectOnly){case"year":this._currentDisplay=this.enums.Display.Years;this._selectOn=this.enums.Display.Years;break;case"month":this._currentDisplay=this.enums.Display.Months;this._selectOn=this.enums.Display.Months;this._blockYears=true;break;case"date":this._currentDisplay=this.enums.Display.Days;this._selectOn=this.enums.Display.Days;this._blockYears=true;this._blockMonths=true;break;case"year&month":this._currentDisplay=this.enums.Display.Years;this._selectOn=this.enums.Display.Months;break;case"month&date":this._currentDisplay=this.enums.Display.Months;this._selectOn=this.enums.Display.Days;this._blockYears=true;break;default:throw"Invalid selectOnly value"}}this.isInline=this.options.inline||false};b.prototype._initInlineMobile=function(){var f=a.extend(true,{},this.options,{inline:true,altFields:[{selector:this.$element}],showClose:true,visible:false,closeOnBlur:false,afterShow:a.proxy(function(h){var g=h.datepicker,i=this.$element.parent().offset().top,l=a(window).height(),j=g.height(),k=i-l+j+50;if(a(window).scrollTop()<k){a("html, body").scrollTop(k)}},this)});var e=a('<div class="bs-picker-replace"></div>');this.$element.parent().after(e);e.bsDatepicker(f);this.$element.on("click",function(){e.bsDatepicker("show")})};b.prototype._initLang=function(e){this.renderModel.NowText=a.fn.bsDatepickerLang[e].nowText;this.renderModel.SetDateText=a.fn.bsDatepickerLang[e].setDateText;this.renderModel.SetTimeText=a.fn.bsDatepickerLang[e].setTimeText};b.prototype._addHandlers=function(){if(!this.isInline||this.options.inlineMobile){if(this.options.closeOnBlur){a(document).on("mouseup",a.proxy(function(n){var k=a(n.target);if(k[0]!=this.$element[0]&&k.closest(".bs-datetime-picker").length===0){if((!k.hasClass("glyphicon")||(typeof this.$input!=="undefined"&&k.parent()[0]!=this.$input.parent()[0]))&&!k.hasClass(this.options.ignoreBlurClass)){var m=true;if(typeof this.options.toggleButtons!=="undefined"){for(var o in this.options.toggleButtons){var l=a(this.options.toggleButtons[o].selector);if(k.closest(l).length>0){m=false}}}if(m){this.hide()}}}},this))}if(this.options.openOnFocus){this.$element.on("focus",a.proxy(function(k){this.show()},this))}if(typeof this.$input!=="undefined"){this.$input.on("focusout",a.proxy(function(k){if(k.relatedTarget){this.hide()}},this))}if(typeof this.options.openOn!=="undefined"&&a.isArray(this.options.openOn)){for(var i in this.options.openOn){var f=this.options.openOn[i];this.unbindEvent(f.selector,f.event);a("body").on(f.event,f.selector,a.proxy(function(k){this.show()},this))}}if(typeof this.options.closeOn!=="undefined"&&a.isArray(this.options.closeOn)){for(var h in this.options.closeOn){var e=this.options.closeOn[h];this.unbindEvent(e.selector,e.event);a("body").on(e.event,e.selector,a.proxy(function(k){this.hide()},this))}}if(typeof this.options.toggleButtons!=="undefined"&&a.isArray(this.options.toggleButtons)){for(var j in this.options.toggleButtons){var g=this.options.toggleButtons[j];this.unbindEvent(g.selector,g.event);a("body").on(g.event,g.selector,a.proxy(function(k){if(this._visible){this.hide()}else{this.show()}},this))}}a(document).on("scroll",a.proxy(function(){if(this._visible){if(this.options.withScrollTimeout){window.clearTimeout(this._timeoutHandler);this._timeoutHandler=window.setTimeout(a.proxy(this._positionPicker,this),20)}else{this._positionPicker()}}},this));a(window).on("resize",a.proxy(function(){this._positionPicker()},this));this.$picker.on("click",".bs-closeBtn",a.proxy(function(k){this._stopEvent(k);this.hide()},this))}if(typeof this.$input!=="undefined"&&this.$input.length&&this.options.forceParse===true){this.$input.on("change",a.proxy(this.onInputChange,this))}if(typeof this.options.buttons==="undefined"||!a.isArray(this.options.buttons)){this.$picker.on("click",".bs-setTimeBtn",a.proxy(function(k){this.showTimeClick(k)},this));this.$picker.on("click",".bs-dateNow",a.proxy(function(k){this.dateNowClick(k)},this));this.$picker.on("click",".bs-timeNow",a.proxy(function(k){this.timeNowClick(k)},this))}else{this.$picker.on("click",".bs-customPickerBtn",a.proxy(function(l){var m=this.$picker.find(".bs-customPickerBtn").index(l.currentTarget),k=this.options.buttons[m];if(typeof k!=="undefined"&&typeof k.handler==="function"){k.handler.apply(k.context||this,arguments)}},this))}this.$picker.on("click",".bs-setDateBtn",a.proxy(function(k){this.showDateClick(k)},this));this.$picker.on("click",".bs-prevView",a.proxy(function(k){this.prevClick(k)},this));this.$picker.on("click",".bs-nextView",a.proxy(function(k){this.nextClick(k)},this));this.$picker.on("click",".bs-upView",a.proxy(function(k){this.upClick(k)},this));this.$picker.on("click",".bs-dateValue",a.proxy(function(k){this.dateValueClick(k)},this));this.$picker.on("click",".bs-monthValue",a.proxy(function(k){this.monthValueClick(k)},this));this.$picker.on("click",".bs-yearValue",a.proxy(function(k){this.yearValueClick(k)},this));this.$picker.on("mousedown touchstart",".bs-hourUp",a.proxy(this._hourUpTimeout,this));this.$picker.on("mouseup mouseleave touchend",".bs-hourUp",a.proxy(function(k){window.clearTimeout(this._hourUpHandler);this._hourUpTimeoutSpeed=null},this));this.$picker.on("click",".bs-hourUp",a.proxy(function(k){this.hourUpClick(k)},this));this.$picker.on("mousedown",".bs-minuteUp",a.proxy(function(k){this._minuteUpTimeout()},this));this.$picker.on("mouseup mouseleave touchend",".bs-minuteUp",a.proxy(function(k){window.clearTimeout(this._minuteUpHandler);this._minuteUpTimeoutSpeed=null},this));this.$picker.on("click",".bs-minuteUp",a.proxy(function(k){this.minuteUpClick(k)},this));this.$picker.on("mousedown touchstart",".bs-secondUp",a.proxy(this._secondUpTimeout,this));this.$picker.on("mouseup mouseleave touchend",".bs-secondUp",a.proxy(function(k){window.clearTimeout(this._secondUpHandler);this._secondUpTimeoutSpeed=null},this));this.$picker.on("click",".bs-secondUp",a.proxy(function(k){this.secondUpClick(k)},this));this.$picker.on("mousedown touchstart",".bs-hourDown",a.proxy(this._hourDownTimeout,this));this.$picker.on("mouseup mouseleave touchend",".bs-hourDown",a.proxy(function(k){window.clearTimeout(this._hourDownHandler);this._hourDownTimeoutSpeed=null},this));this.$picker.on("click",".bs-hourDown",a.proxy(function(k){this.hourDownClick(k)},this));this.$picker.on("mousedown touchstart",".bs-minuteDown",a.proxy(this._minuteDownTimeout,this));this.$picker.on("mouseup mouseleave touchend",".bs-minuteDown",a.proxy(function(k){window.clearTimeout(this._minuteDownHandler);this._minuteDownTimeoutSpeed=null},this));this.$picker.on("click",".bs-minuteDown",a.proxy(function(k){this.minuteDownClick(k)},this));this.$picker.on("mousedown touchstart",".bs-secondDown",a.proxy(this._secondDownTimeout,this));this.$picker.on("mouseup mouseleave touchend",".bs-secondDown",a.proxy(function(k){window.clearTimeout(this._secondDownHandler);this._secondDownTimeoutSpeed=null},this));this.$picker.on("click",".bs-secondDown",a.proxy(function(k){this.secondDownClick(k)},this));this.$picker.on("change",".bs-hourInput",a.proxy(function(k){this.hourChange(k)},this));this.$picker.on("change",".bs-minuteInput",a.proxy(function(k){this.minuteChange(k)},this));this.$picker.on("change",".bs-secondInput",a.proxy(function(k){this.secondChange(k)},this));this.$picker.on("click",".bs-timeMeridiem",a.proxy(function(k){this.meridiemClick(k)},this));if(typeof this.options.onDayMouseOver==="function"){this.$picker.on("mouseover",".bs-dateValue",a.proxy(function(m){var k=a(m.currentTarget);var l=d(k.data("value")).lang(this.options.language);this.options.onDayMouseOver(l,l.format(this._displayFormat),this.isValidDate(l))},this))}if(typeof this.options.onDaysMouseOut==="function"){this.$picker.on("mouseout",".days",a.proxy(function(k){if(a(k.relatedTarget).parents(".days").length===0){this.options.onDaysMouseOut(this.currentValue.clone(),this.currentValue.format(this._displayFormat),this.isValidDate(this.currentValue.clone()))}},this))}};b.prototype.onInputChange=function(h){this._stopEvent(h);var f=a(h.currentTarget),i=f.val();if(i!=""){var g=d(i,this._displayFormat,this.options.language);if(g.isValid()&&this.isValidDate(g)){this._setCurrentValue(g);this.value=this.currentValue.clone();this._updateDateView();this._updateTimeView()}this._updateDisplays()}else{this.resetValue()}};b.prototype.showTimeClick=function(f){this._stopEvent(f);a(f.currentTarget).hide();this.$picker.find(".bs-date-wrapper").slideUp();this.$picker.find(".bs-time-wrapper").slideDown(function(){a(f.currentTarget).show()})};b.prototype.showDateClick=function(f){this._stopEvent(f);a(f.currentTarget).hide();this.$picker.find(".bs-time-wrapper").slideUp();this.$picker.find(".bs-date-wrapper").slideDown(function(){a(f.currentTarget).show()})};b.prototype.prevClick=function(f){this._stopEvent(f);var g=false;switch(this._currentDisplay){case this.enums.Display.Days:if(!this._blockMonths){this.value.subtract("month",1);g=true}break;case this.enums.Display.Months:if(!this._blockYears){this.value.subtract("year",1);g=true}break;case this.enums.Display.Years:if(a(f.currentTarget).hasClass("disabled")){return}this.value.subtract("year",10);g=true;break}if(g){this._updateDateView()}};b.prototype.nextClick=function(f){this._stopEvent(f);var g=false;switch(this._currentDisplay){case this.enums.Display.Days:if(!this._blockMonths){this.value.add("month",1);g=true}break;case this.enums.Display.Months:if(!this._blockYears){this.value.add("year",1);g=true}break;case this.enums.Display.Years:if(a(f.currentTarget).hasClass("disabled")){return}this.value.add("year",10);g=true;break}if(g){this._updateDateView()}};b.prototype.upClick=function(f){this._stopEvent(f);var g=false;switch(this._currentDisplay){case this.enums.Display.Days:if(!this._blockMonths){this._currentDisplay=this.enums.Display.Months;g=true}break;case this.enums.Display.Months:if(!this._blockYears){this._currentDisplay=this.enums.Display.Years;g=true}break}if(g){this._updateDateView()}};b.prototype.dateValueClick=function(g){this._stopEvent(g);var f=a(g.currentTarget),h=d(f.data("value")).lang(this.options.language);if(f.parents(".bs-notSelectable").length){return}if(this._valueSet===true&&this.options.allowDeselect&&f.parents(".active").length){this._deselectValue();return}h.hour(this.currentValue.hour());h.minute(this.currentValue.minute());h.second(this.currentValue.second());this._setCurrentValue(h);this.value=this.currentValue.clone();this._updateDateView()};b.prototype.monthValueClick=function(g){this._stopEvent(g);var f=a(g.currentTarget),h=f.data("value");if(f.parents().hasClass("bs-notSelectable")){return}if(this._selectOn===this.enums.Display.Months){if(this.isValidDate(d(h).lang(this.options.language))){this._setCurrentValue(d(h).lang(this.options.language));this.value=this.currentValue.clone();this._updateDateView()}}else{this.value=d(h).lang(this.options.language);this._currentDisplay=this.enums.Display.Days;this._updateDateView()}};b.prototype.yearValueClick=function(g){this._stopEvent(g);var f=a(g.currentTarget),h=f.data("value");if(f.parents().hasClass("bs-notSelectable")){return}if(this._selectOn===this.enums.Display.Years){if(this.isValidDate(d(h).lang(this.options.language))){this._setCurrentValue(d(h).lang(this.options.language));this.value=this.currentValue.clone();this._updateDateView()}}else{this.value=d(h).lang(this.options.language);this._currentDisplay=this.enums.Display.Months;this._updateDateView()}};b.prototype.dateNowClick=function(f){this._stopEvent(f);var g=d().lang(this.options.language);if(this.isValidDate(g)){this._setCurrentValue(d().lang(this.options.language));this.value=this.currentValue;if(typeof this._selectOn==="undefined"||this._selectOn===this.enums.Display.Days){this._currentDisplay=this.enums.Display.Days}this._updateDateView()}};b.prototype.timeNowClick=function(f){this._stopEvent(f);var g=d().lang(this.options.language);if(this.isValidDate(g)){this._setCurrentValue(d().lang(this.options.language));this.value=this.currentValue;if(typeof this._selectOn==="undefined"||this._selectOn===this.enums.Display.Days){this._currentDisplay=this.enums.Display.Days}this._updateTimeView()}};b.prototype._hourUpTimeout=function(){this.hourUpClick();if(this._allowHold()){this._hourUpTimeoutSpeed=this._hourUpTimeoutSpeed||this.options.holdInterval;this._hourUpHandler=window.setTimeout(a.proxy(this._hourUpTimeout,this),this._hourUpTimeoutSpeed);if(this._hourUpTimeoutSpeed&&this._hourUpTimeoutSpeed>this.options.holdMinInterval){this._hourUpTimeoutSpeed-=this.options.holdDecreaseFactor}}else{window.clearTimeout(this._hourUpHandler);this._hourUpTimeoutSpeed=null}};b.prototype.hourUpClick=function(f){var g=this.currentValue.clone().add("hour",1);if(this.isValidDate(g)){this.currentValue.add("hour",1);this._setCurrentValue(false)}this.value=this.currentValue.clone();this._updateTimeView();this._updateDateView()};b.prototype._minuteUpTimeout=function(){this.minuteUpClick();if(this._allowHold()){this._minuteUpTimeoutSpeed=this._minuteUpTimeoutSpeed||this.options.holdInterval;this._minuteUpHandler=window.setTimeout(a.proxy(this._minuteUpTimeout,this),this._minuteUpTimeoutSpeed);if(this._minuteUpTimeoutSpeed&&this._minuteUpTimeoutSpeed>this.options.holdMinInterval){this._minuteUpTimeoutSpeed-=this.options.holdDecreaseFactor}}else{window.clearTimeout(this._minuteUpHandler);this._minuteUpTimeoutSpeed=null}};b.prototype.minuteUpClick=function(f){var g=this.currentValue.clone().add("minute",1);if(this.isValidDate(g)){this.currentValue.add("minute",1);this._setCurrentValue(false)}this.value=this.currentValue.clone();this._updateTimeView();this._updateDateView()};b.prototype._secondUpTimeout=function(){this.secondUpClick();if(this._allowHold()){this._secondUpTimeoutSpeed=this._secondUpTimeoutSpeed||this.options.holdInterval;this._secondUpHandler=window.setTimeout(a.proxy(this._secondUpTimeout,this),this._secondUpTimeoutSpeed);if(this._secondUpTimeoutSpeed&&this._secondUpTimeoutSpeed>this.options.holdMinInterval){this._secondUpTimeoutSpeed-=this.options.holdDecreaseFactor}}else{window.clearTimeout(this._secondUpHandler);this._secondUpTimeoutSpeed=null}};b.prototype.secondUpClick=function(f){var g=this.currentValue.clone().add("second",1);if(this.isValidDate(g)){this.currentValue.add("second",1);this._setCurrentValue(false)}this.value=this.currentValue.clone();this._updateTimeView();this._updateDateView()};b.prototype._hourDownTimeout=function(){this.hourDownClick();if(this._allowHold()){this._hourDownTimeoutSpeed=this._hourDownTimeoutSpeed||this.options.holdInterval;this._hourDownHandler=window.setTimeout(a.proxy(this._hourDownTimeout,this),this._hourDownTimeoutSpeed);if(this._hourDownTimeoutSpeed&&this._hourDownTimeoutSpeed>this.options.holdMinInterval){this._hourDownTimeoutSpeed-=this.options.holdDecreaseFactor}}else{window.clearTimeout(this._hourDownHandler);this._hourDownTimeoutSpeed=null}};b.prototype.hourDownClick=function(f){var g=this.currentValue.clone().subtract("hour",1);if(this.isValidDate(g)){this.currentValue.subtract("hour",1);this._setCurrentValue(false)}this.value=this.currentValue.clone();this._updateTimeView();this._updateDateView()};b.prototype._minuteDownTimeout=function(){this.minuteDownClick();if(this._allowHold()){this._minuteDownTimeoutSpeed=this._minuteDownTimeoutSpeed||this.options.holdInterval;this._minuteDownHandler=window.setTimeout(a.proxy(this._minuteDownTimeout,this),this._minuteDownTimeoutSpeed);if(this._minuteDownTimeoutSpeed&&this._minuteDownTimeoutSpeed>this.options.holdMinInterval){this._minuteDownTimeoutSpeed-=this.options.holdDecreaseFactor}}else{window.clearTimeout(this._minuteDownHandler);this._minuteDownTimeoutSpeed=null}};b.prototype.minuteDownClick=function(f){var g=this.currentValue.clone().subtract("minute",1);if(this.isValidDate(g)){this.currentValue.subtract("minute",1);this._setCurrentValue(false)}this.value=this.currentValue.clone();this._updateTimeView();this._updateDateView()};b.prototype._secondDownTimeout=function(){this.secondDownClick();if(this._allowHold()){this._secondDownTimeoutSpeed=this._minuteDownTimeoutSpeed||this.options.holdInterval;this._secondDownHandler=window.setTimeout(a.proxy(this._secondDownTimeout,this),this._secondDownTimeoutSpeed);if(this._secondDownTimeoutSpeed&&this._secondDownTimeoutSpeed>this.options.holdMinInterval){this._secondDownTimeoutSpeed-=this.options.holdDecreaseFactor}}else{window.clearTimeout(this._secondDownHandler);this._secondDownTimeoutSpeed=null}};b.prototype.secondDownClick=function(f){var g=this.currentValue.clone().subtract("second",1);if(this.isValidDate(g)){this.currentValue.subtract("second",1);this._setCurrentValue(false)}this.value=this.currentValue.clone();this._updateTimeView();this._updateDateView()};b.prototype._allowHold=function(){return this._visible};b.prototype.hourChange=function(f){this._stopEvent(f);var g=window.parseInt(a(f.currentTarget).val(),10);if(!window.isNaN(g)&&g>0&&g<24){this.currentValue.hour(g);this.value=this.currentValue.clone();this._updateDisplays();this._updateTimeView();this._updateDateView()}else{this._updateTimeView()}};b.prototype.minuteChange=function(f){this._stopEvent(f);var g=window.parseInt(a(f.currentTarget).val(),10);if(!window.isNaN(g)&&g>=0&&g<60){this.currentValue.minute(g);this.value=this.currentValue.clone();this._updateDisplays();this._updateTimeView();this._updateDateView()}else{this._updateTimeView()}};b.prototype.secondChange=function(f){this._stopEvent(f);var g=window.parseInt(a(f.currentTarget).val(),10);if(!window.isNaN(g)&&g>=0&&g<60){this.currentValue.second(g);this.value=this.currentValue.clone();this._updateDisplays();this._updateTimeView();this._updateDateView()}else{this._updateTimeView()}};b.prototype.meridiemClick=function(f){this._stopEvent(f);var g=this.currentValue.format("H")>=12?this.currentValue.clone().subtract("hour",12):this.currentValue.clone().add("hour",12);if(this.isValidDate(g)){this.currentValue.format("H")>=12?this.currentValue.subtract("hour",12):this.currentValue.add("hour",12);this.value=this.currentValue.clone();this._updateDisplays();this._updateTimeView();this._updateDateView()}};b.prototype.enums={Display:{Days:0,Months:1,Years:2},Type:{Datepicker:1,Timepicker:2,DateTimepicker:3}};b.prototype.defaultRenderModel={WithDate:true,WithTime:true,DateVisible:true,DateNowButton:true,TimeNowButton:true,Is12Hours:false,Days:[],Months:[],Years:[],Time:{},showClose:false,HideMonths:true};b.prototype._stopEvent=function(f){if(typeof f!=="undefined"&&typeof f.preventDefault==="function"&&typeof f.stopPropagation==="function"){f.preventDefault();f.stopPropagation()}};b.prototype._buildElement=function(){var e=this.getRenderModel();if(this.options.range){this.$picker=this.renderer.renderRangePicker(e).hide().find(".bs-datetime-picker").show().end()}else{this.$picker=this.renderer.renderDatepicker(e)}if(this.isInline){this.$element.after(this.$picker.show());this.$element.hide()}else{a("body").append(this.$picker);this._positionPicker()}if(!this._visible){this.$picker.hide()}};b.prototype._updateDisplays=function(h){if(this.$input!=null){this.$input.val(typeof h!=="undefined"?h:this.currentValue.format(this._displayFormat))}if(typeof this.options.altFields!=="undefined"){for(var g in this.options.altFields){var f=this.options.altFields[g];var e=a(f.selector);if(e.length>0){if(e.is("input")){e.val(typeof h!=="undefined"?h:(this.currentValue.format(typeof f.format!=="undefined"?f.format:this._displayFormat)))}else{e.text(typeof h!=="undefined"?h:(this.currentValue.format(typeof f.format!=="undefined"?f.format:this._displayFormat)))}}}}};b.prototype._positionPicker=function(){if(this.isInline){return}if(this.options.fixedPicker===true&&this.$picker.css("position")=="fixed"){return}var u=this.options.xOrient,v=this.options.yOrient,l=this.$picker.outerHeight(true),m=this.$picker.outerWidth(true),g=this.$element.offset(),k=-1,j=-1;if(v!="below"&&v!="above"){var s=a(window).innerHeight(),q=a(document).scrollTop(),f=this.$element.outerHeight(true);var r=-q+g.top-l,e=q+s-(g.top+f+l);if(Math.max(r,e)===e){v="below"}else{v="above"}}if(u!="right"&&u!="left"){var t=a(window).innerWidth(),h=this.$element.outerWidth(true);var n=g.left-(h>m?h-m:m-h),i=t-(g.left+m);if(n>0&&i>0){u="left"}else{if(Math.max(n,i)===n){u="right"}else{u="left"}}}if(v=="below"){k=g.top+this.$element.height()+this.options.heightPosition;this.$picker.removeClass("open-above");this.$picker.addClass("open-below")}else{if(v=="above"){k=g.top-this.$element.height()-l+16;this.$picker.removeClass("open-below");this.$picker.addClass("open-above")}}if(u!="right"&&u!="left"){u="left"}if(u=="left"){j=g.left;this.$picker.removeClass("open-right");this.$picker.addClass("open-left")}else{if(u=="right"){j=g.left+this.$element.outerWidth()-this.$picker.outerWidth();this.$picker.removeClass("open-left");this.$picker.addClass("open-right")}}if(this.options.fixedPicker===true){this.$picker.css("position","fixed")}if(typeof this._savedPosition==="undefined"){this._initialPosition={top:k,left:j};if(k!==-1){this.$picker.css("top",k)}if(j!==-1){this.$picker.css("left",j)}}else{var p=this._savedPosition.top,o=this._savedPosition.left;if(typeof p==="undefined"){this.$picker.css("top",k)}if(typeof o==="undefined"){this.$picker.css("left",j)}return}};b.prototype._updateDateView=function(f){if(f!==true&&!this.$picker.is(":visible")&&this.options.deferredRender){this._needsRendering=true;return this}else{this._needsRendering=false}if(this.renderModel.WithDate){var g=this.getRenderModel();var e=this.renderer.renderDate(g);this.$picker.find(".bs-date-wrapper").html(e.html())}return this};b.prototype._updateTimeView=function(){if(this.renderModel.WithTime){var f=this.getRenderModel();var e=this.renderer.renderTime(f);this.$picker.find(".bs-time-wrapper").html(e.html())}return this};b.prototype._deselectValue=function(){this._valueSet=false;this._updateDisplays("");this._updateDateView();this._trigger("onChange",{date:null,formattedDate:""})};b.prototype._setCurrentValue=function(f){var e=true;if(typeof f!=="undefined"){if(typeof f!=="boolean"){this.currentValue=f}else{e=f}}this._updateDisplays();if(typeof this.$input!=="undefined"&&typeof this.$input.valid==="function"&&this.$input.parents("form").length){this.$input.valid()}this._valueSet=true;this._trigger("onChange",{date:this.currentValue.clone(),formattedDate:this.currentValue.format(this._displayFormat)});if(this.options.closeOnChange&&e){this.hide()}};b.prototype._trigger=function(f,e,g){if(typeof this.options[f]==="function"){this.options[f](e)}if(g!==true){this.$element.trigger(f,e)}};b.prototype.getRenderModel=function(){var e=a.extend(true,{},this.renderModel);e.Value=this.value.clone();if(this._type==this.enums.Type.Timepicker){if(typeof this.options.wrapperClass!=="undefined"){this.options.wrapperClass+=" bs-onlytime-picker"}else{this.options.wrapperClass="bs-onlytime-picker "}}if(this.isInline){if(typeof this.options.wrapperClass!=="undefined"){this.options.wrapperClass+=" bs-inline-picker"}else{this.options.wrapperClass="bs-inline-picker "}}a.extend(true,e,{Is12Hours:this.options.is12Hours,HeadText:this.getHeadText(e.Value),Days:this.getDays(e.Value),Months:this.getMonths(e.Value),Years:this.getYears(e.Value),HideDays:!this.isActiveView(this.enums.Display.Days),HideMonths:!this.isActiveView(this.enums.Display.Months),HideYears:!this.isActiveView(this.enums.Display.Years),Time:this.getTime(e.Value),WrapperClass:this.options.wrapperClass,DaysNames:this.getDaysNames(),Theme:this.options.theme});var g=this.value.clone(),f=this.value.clone();if(e.HideDays==false){g=g.startOf("month").subtract("day",1);f=f.endOf("month").add("day",1);if(!this.isValidDate(g,true,{format:"month",allowSame:true})){e.disabledPrev=true}if(!this.isValidDate(f,true,{format:"month",allowSame:true})){e.disabledNext=true}}if(e.HideMonths==false){g.subtract("year",1);f.add("year",1);if(!this.isValidDate(g,true,{format:"year",allowSame:true})){e.disabledPrev=true}if(!this.isValidDate(f,true,{format:"year",allowSame:true})){e.disabledNext=true}}if(e.HideYears==false){var i=g.format("YYYY"),h=i-i%10;g.year(h).subtract("year",1);if(!this.isValidDate(g,true,{format:"year",allowSame:true})){e.disabledPrev=true}f.year(h).add("year",10);if(!this.isValidDate(f,true,{format:"year",allowSame:true})){e.disabledNext=true}}return e};b.prototype._getDefaultDate=function(q){q=q||this.options.defaultDate;if(q=="now"){return d()}else{var e=d(q);if(e.isValid()){return e}else{var j=this.options.defaultDateValue!=null?d(this.options.defaultDateValue).clone():d();var n=q.split(" "),g=0,h=n.length;for(;g<h;g++){var m=n[g];var k=m[0],f=m[m.length-1],o=window.parseInt(m.slice(1,m.length-1),10);if(!window.isNaN(o)){if(k==="+"){j.add(o,f)}else{if(k==="-"){j.subtract(o,f)}}}}return j}}};b.prototype.option_type=function(){switch(this.options.type){case"datepicker":default:this._type=this.enums.Type.Datepicker;break;case"timepicker":this._type=this.enums.Type.Timepicker;break;case"datetimepicker":this._type=this.enums.Type.DateTimepicker;break;case this.enums.Type.Datepicker:case this.enums.Type.Timepicker:case this.enums.Type.DateTimepicker:this._type=this.options.type;break}this._getInitialValue();this._initRenderModel();this._initOptions();if(this.$input!=null&&this.$input.val()!=""){this._updateDisplays()}this._updateDateView();this._updateTimeView()};b.prototype.option_minDate=function(){this._updateDateView();this._updateTimeView()};b.prototype.option_maxDate=function(){this._updateDateView();this._updateTimeView()};b.prototype.option_beforeShowDay=function(){this._updateDateView()};b.prototype.show=function(e){if(this._visible!==true){var f={preventShow:false};this._trigger("beforeShow",f);if(f.preventShow==false){if(this._needsRendering){this._updateDateView(true)}this._positionPicker();if(typeof e!=="undefined"){this.updatePosition(e)}this.$picker.show();this._visible=true;this._trigger("afterShow",{datepicker:this.$picker,element:this.$element,datepickerType:this._type})}}return this};b.prototype.hide=function(){if(this._visible!==false){var e={preventHide:false};this._trigger("beforeHide",e);if(e.preventHide==false){this.$picker.hide();this._visible=false;if(typeof this.$input!=="undefined"){this.$input.trigger("blur")}this._trigger("afterHide",{datepicker:this.$picker,element:this.$element,datepickerType:this._type})}}return this};b.prototype.resetValue=function(){this._updateDisplays("");this._getInitialValue();this._updateDateView();this._updateTimeView();if(typeof this.options.initialValue!=="undefined"&&this.options.initialValue!=""){this._updateDisplays()}else{this._updateDisplays("")}};b.prototype.getValue=function(){return this._valueSet==true?this.currentValue.format(this._displayFormat):""};b.prototype.getUnformattedValue=function(){return this._valueSet==true?this.currentValue.clone():null};b.prototype.clearValue=function(){this._deselectValue()};b.prototype.setValue=function(f){if(f!=null){var e=d(f).lang(this.options.language);if(this.isValidDate(e)){this._setCurrentValue(e);this.value=this.currentValue.clone();this._updateDateView();this._updateTimeView();this._updateDisplays();return true}else{return false}}else{return false}};b.prototype.getFormat=function(){return this._displayFormat};b.prototype.getInitialValue=function(){return this._getInitialValue()};b.prototype.format=function(e){if(e!=null){var f=d(e).lang(this.options.language);if(f.isValid()){return f.format(this._displayFormat)}}};b.prototype.option=function(e,f){if(typeof f==="undefined"){return this.options[e]}else{this.options[e]=f;if(typeof this["option_"+e]==="function"){this["option_"+e].apply(this,[f])}}};b.prototype.updatePosition=function(i){if(typeof i!=="undefined"&&i!=null){var j=i.top,g=i.left;if(j!=null){if(typeof j==="number"){this.$picker.css({top:j})}else{if(typeof j==="string"){var f=this.$picker.position().top,k=window.parseInt(j,10);if(j.indexOf("-")!==-1||j.indexOf("+")!==-1){this.$picker.css({top:f+k})}}}}if(g!=null){if(typeof g==="number"){this.$picker.css({left:g})}else{if(typeof g==="string"){var e=this.$picker.position().left,h=window.parseInt(g,10);if(g.indexOf("-")!==-1||g.indexOf("+")!==-1){this.$picker.css({left:e+h})}}}}this._savedPosition=i}};b.prototype.destroy=function(){this.$picker.remove();this.$element.removeData("bDatepicker");this.$element.removeClass("hasDatepicker");if(this.options.readonlyInput){this.$element.removeProp("readonly")}if(this.options.openOnFocus){this.$element.off("focus")}};b.prototype.render=function(e){this._updateDateView(e);this._updateTimeView()};b.prototype.applyExpression=function(e,q){if(!d.isMoment(q)){q=d()}if(e=="now"){return d()}else{var h=q.clone();var o=e.split(" "),j=0,k=o.length;for(;j<k;j++){var n=o[j];var m=n[0],f=n[n.length-1],r=window.parseInt(n.slice(1,n.length-1),10);if(!window.isNaN(r)){if(m==="+"){h.add(r,f)}else{if(m==="-"){h.subtract(r,f)}else{var g="";switch(f){case"m":g="minute";break;case"s":g="second";break;case"h":g="hour";break;case"M":g="month";break;case"d":g="hour";break;case"y":g="year";break}if(typeof h[g]==="function"){h[g](r)}}}}}return h}};b.prototype.setValueFromExpression=function(e,g){var h=g;if(!d.isMoment(g)){h=this.getUnformattedValue()}var f=this.applyExpression(e,h);this.setValue(f);return f};b.prototype.getHeadText=function(e){switch(this._currentDisplay){case this.enums.Display.Days:return e.format("MMMM YYYY");case this.enums.Display.Months:return e.format("YYYY");case this.enums.Display.Years:var g=e.format("YYYY"),f=g-g%10;return f+" - "+(f+9)+"";default:}};b.prototype.getMonthName=function(e){return e.format("MMMM")};b.prototype.getDays=function(f){var h=[],j=this.value.clone(),i=j.clone(),e=j.month();j.startOf("month");i.endOf("month");j.hour(f.hour());i.hour(f.hour());j.minute(f.minute());i.minute(f.minute());j.second(f.second());i.second(f.second());var k=0;while(j.day()!=d.langData(this.options.language)._week.dow){j.subtract("days",1)}while(k<42){var g={day:j.date(),otherMonth:j.month()!=e,value:j.format(),selected:(this._valueSet||this._valueSet==null)&&j.isSame(this.currentValue,"day")&&j.isSame(this.currentValue,"month")&&j.isSame(this.currentValue,"year"),selectable:true};if(!this.isValidDate(j,true)){g.selectable=false;g.cssClass="inactive"}if(typeof this.options.beforeShowDay==="function"){a.extend(true,g,this.options.beforeShowDay(j.toISOString(),g))}if(g.selectable==false&&(typeof g.cssClass==="undefined"||g.cssClass.indexOf("inactive")===-1)){if(typeof g.cssClass==="undefined"){g.cssClass="inactive"}else{g.cssClass+=" inactive"}}h.push(g);j.add("days",1);k++}return h};b.prototype.getDaysNames=function(){return this.value.clone().lang()._weekdaysMin};b.prototype.getMonths=function(e){var h=e.clone(),g=0,j=[],f=h.date();h.month(0);for(;g<12;g++){j.push({month:h.format("MMM"),value:h.format(),selected:(this._valueSet||this._valueSet==null)&&h.isSame(this.currentValue,"month")&&h.isSame(this.currentValue,"year"),selectable:this.isValidDate(h,true,{allowSame:true,format:"month"})});h.add(1,"month")}return j};b.prototype.getYears=function(e){var l=e.format("YYYY"),k=l-l%10,n=[],g=e.clone();g.year(k).subtract("year",1);var j={year:g.format("YYYY"),value:g.format(),selectable:this.isValidDate(g,true,{format:"year",allowSame:true}),selected:(this._valueSet||this._valueSet==null)&&g.isSame(this.currentValue,"year")};if(j.selectable){j.otherDecade=true}n.push(j);var f=0;for(;f<10;){g.add("year",1);var m={year:g.format("YYYY"),otherDecade:false,value:g.format(),selected:(this._valueSet||this._valueSet==null)&&g.isSame(this.currentValue,"year"),selectable:this.isValidDate(g,true,{format:"year",allowSame:true})};n.push(m);f++}g.add("year",1);var h={year:g.format("YYYY"),value:g.format(),selectable:this.isValidDate(g,true,{format:"year",allowSame:true}),selected:(this._valueSet||this._valueSet==null)&&g.isSame(this.currentValue,"year")};if(h.selectable){h.otherDecade=true}n.push(h);return n};b.prototype.getTime=function(e){var f=e.clone();return{hour:f.format(this.options.is12Hours?"h":"H"),minute:f.minute(),second:f.second(),meridiem:f.lang().meridiem(f.clone().add("hour",12).format("H")),}};b.prototype.isActiveView=function(e){return e===this._currentDisplay};b.prototype.isValidDate=function(g,e,l){if(g==null){return}var j=null,k=null,n=false,m=false,f=this.options.allowSame;if(typeof this.options.maxDate!=="undefined"&&this.options.maxDate!==null){j=this.options.maxDate==="now"?d().lang(this.options.language):d(this.options.maxDate).lang(this.options.language);m=true}if(typeof this.options.minDate!=="undefined"&&this.options.minDate!==null){k=d(this.options.minDate).lang(this.options.language);n=true}var i=g.isValid()||e,h=this._type==this.enums.Type.Datepicker?"day":"second";if(this._type==this.enums.Type.Timepicker&&(n||m)){g=g.clone();if(n){k=k.clone();k.year(g.year());k.month(g.month());k.date(g.date())}if(m){j=j.clone();j.year(g.year());j.month(g.month());j.date(g.date())}}if(typeof l!=="undefined"){if(l.format){h=l.format}if(l.allowSame){f=true}}if(n){i=(g.isAfter(k,h)||(f&&g.isSame(k,h)))&&i}if(m){i=(g.isBefore(j,h)||(f&&g.isSame(j,h)))&&i}return i};b.prototype.unbindEvent=function(g,f,e){if(typeof g!=="undefined"&&typeof f!=="undefined"){if(typeof e==="undefined"){e=a("body")}e.off(f,g)}};a.fn.bsDatepickerDefaults={type:"datepicker",language:"en",startView:"days",openOnFocus:true,closeOnBlur:true,closeOnChange:false,defaultDate:"now",is12Hours:false,showClose:false,inline:false,allowDeselect:false,selectOnly:"",selectOnlyFormats:{year:"YYYY",month:"MM",date:"DD","year&month":"YYYY MM","month&date":"MMMM DD"},nowText:"Now",setDateText:"Set date",setTimeText:"Set time",readonlyInput:false,throwExceptions:false,ignoreClass:"",forceParse:true,heightPosition:20,checkForMobileDevice:true,withScrollTimeout:true,allowSame:false,holdInterval:175,holdMinInterval:50,holdDecreaseFactor:4,deferredRender:false};a.fn.bsDatepickerLang={en:{nowText:"Now",setDateText:"Set date",setTimeText:"Set time"},ro:{nowText:"Acum",setDateText:"Setează data",setTimeText:"Setează ora"}};a.fn.bsDatepicker=function(){if(a(this).length==0){return a(this)}var e=Array.prototype.slice.call(arguments,0),h=e[0],g=e.splice(1);if(typeof h==="undefined"||typeof h==="object"){return new b(a(this),a.extend(true,{},a.fn.bsDatepickerDefaults,h))}else{if(typeof h==="string"){var f=(this).data("bDatepicker");if(typeof f==="undefined"){if(a.fn.bsDatepickerDefaults.throwExceptions===true){throw"Cannot call method "+h+" before initializing plugin"}}else{return f[h].apply(f,g)}}}};window.minMaxDate=function(i,g,j,h){var f=a(i),e=a(g);f.bsDatepicker(j);e.bsDatepicker(h||j);f.on("onChange",function(l,k){e.bsDatepicker("option","minDate",k.date)});e.on("onChange",function(l,k){f.bsDatepicker("option","maxDate",k.date)})}}));(function(a){if(typeof define==="function"&&define.amd){define("bforms-datepicker-tmpl",["jquery","icanhaz"],a)}else{a(window.jQuery,window.ich)}}(function(a){var b=function(c){this.options=a.extend(true,{},c);this.r=ich;this.moment=moment();this.initTemplates()};b.prototype.enums={Display:{Days:0,Months:1,Years:2},Type:{Datepicker:1,Timepicker:2,DateTimepicker:3}};b.prototype.renderDatepicker=function(c){var d=this.r.bDatepicker(c,true);return a(d)};b.prototype.renderRangeContainer=function(c){var d=this.r.rangePicker(c,true);return a(d)};b.prototype.renderDate=function(c){var d=this.r.datepickerTemplate(c,true);return a(d)};b.prototype.renderTime=function(c){var d=this.r.timepickerTemplate(c,true);return a(d)};b.prototype.renderModal=function(c){var d=this.r.modalPicker(c,true);return a(d)};b.prototype.getTemplate=function(c){return this.r.bDatepicker(c,true)};b.prototype.initTemplates=function(){if(typeof this.r.yearsTemplate!=="function"){this.r.addTemplate("yearsTemplate",this.dateTemplates.yearsTemplate)}if(typeof this.r.monthsTemplate!=="function"){this.r.addTemplate("monthsTemplate",this.dateTemplates.monthsTemplate)}if(typeof this.r.daysTemplate!=="function"){this.r.addTemplate("daysTemplate",this.dateTemplates.daysTemplate)}if(typeof this.r.dateHeadTemplate!=="function"){this.r.addTemplate("dateHeadTemplate",this.dateTemplates.headTemplate)}if(typeof this.r.dateContTemplate!=="function"){this.r.addTemplate("dateContTemplate",this.dateTemplates.contTemplate)}if(typeof this.r.dateFooterTemplate!=="function"){this.r.addTemplate("dateFooterTemplate",this.dateTemplates.secondaryActions)}if(typeof this.r.timeContTemplate!=="function"){this.r.addTemplate("timeContTemplate",this.timeTemplates.contTemplate)}if(typeof this.r.timeFooterTemplate!=="function"){this.r.addTemplate("timeFooterTemplate",this.timeTemplates.secondaryActions)}if(typeof this.r.datepickerTemplate!=="function"){this.r.addTemplate("datepickerTemplate",this.mainTemplates.datepickerTemplate)}if(typeof this.r.timepickerTemplate!=="function"){this.r.addTemplate("timepickerTemplate",this.mainTemplates.timepickerTemplate)}if(typeof this.r.bDatepicker!=="function"){this.r.addTemplate("bDatepicker",this.mainTemplates.mainTemplate)}if(typeof this.r.rangePicker!=="function"){this.r.addTemplate("rangePicker",this.mainTemplates.rangeTemplate)}if(typeof this.r.modalPicker!=="function"){this.r.addTemplate("modalPicker",this.mainTemplates.modalPickerTemplate)}};b.prototype.mainTemplates={rangeTemplate:'<div class="bs-range-picker {{theme}} {{#hideRanges}}bs-hide_range{{/hideRanges}}"><div class="ranges"><div class="form-group"><label>{{fromText}}</label><div class="input-group"><input type="text" class="bs-rangeStartLabel" value="" disabled="disabled">{{#allowDeselectStart}}<a href="#" class="btn bs-resetDateRange"></a>{{/allowDeselectStart}}</div></div><div class="form-group"><label>{{toText}}</label><div class="input-group"><input type="text" class="bs-rangeEndLabel" value="" disabled="disabled">{{#allowDeselectEnd}}<a href="#" class="btn bs-resetDateRange"></a>{{/allowDeselectEnd}}</div></div><button class="btn btn-default bs-applyRange">{{applyText}}</button>&nbsp;<button class="btn bs-cancelRange">{{cancelText}}</button>{{#hasPresetRanges}}<div class="bs-preset-ranges_container" style="margin-top:10px"><label>{{presetRangesText}}</label><select style="width:100%" class="bs-preset-ranges"><option value="">{{presetRangesPlaceholderText}}</option>{{#presetRanges}}<option value="{{value}}" data-source="{{source}}" data-priority="{{priority}}" data-expressionfrom="{{expressionFrom}}" data-expressionto="{{expressionTo}}">{{text}}</option>{{/presetRanges}}</select></div>{{/hasPresetRanges}}</div><div class="bs-start-replace"></div><div class="bs-end-replace"></div></div>',mainTemplate:'<div class="bs-datetime-picker {{WrapperClass}} {{Theme}}">{{#ShowClose}}<a href="#" class="btn btn-close bs-closeBtn"></a>{{/ShowClose}}{{#WithDate}} {{>datepickerTemplate}} {{/WithDate}}{{#WithTime}} {{>timepickerTemplate}} {{/WithTime}}</div>',datepickerTemplate:'<div class="bs-date-wrapper">{{>dateHeadTemplate}}{{>dateContTemplate}}{{>dateFooterTemplate}}</div>',timepickerTemplate:'<div class="bs-time-wrapper" style="{{#WithDate}}{{#DateVisible}}display:none;{{/DateVisible}}{{/WithDate}}-ms-touch-action: none;">{{>timeContTemplate}}{{>timeFooterTemplate}}</div>',modalPickerTemplate:'<div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">{{Title}}</h4></div><div class="modal-body"><div class="bs-modal-replace"></div></div></div></div></div>'};b.prototype.dateTemplates={headTemplate:'<div class="bs-date-action"><a href="#" class="btn btn-left bs-prevView {{#disabledPrev}}disabled{{/disabledPrev}}"></a><a href="#" class="month bs-upView">{{HeadText}}</a><a href="#" class="btn btn-right bs-nextView {{#disabledNext}}disabled{{/disabledNext}}"></a></div>',contTemplate:"{{>yearsTemplate}}{{>monthsTemplate}}{{>daysTemplate}}",secondaryActions:'<div class="bs-secondary-action">{{#HasCustomButtons}}{{#Buttons}}<a href="#" class="{{cssClass}} bs-customPickerBtn">{{text}}</a>{{/Buttons}}{{/HasCustomButtons}}{{^HasCustomButtons}}{{#DateNowButton}}<a href="#" class="btn btn-default bs-dateNow">{{NowText}}</a>{{/DateNowButton}}{{#WithTime}}<a href="#" class="btn btn-set time pull-right bs-setTimeBtn">{{SetTimeText}}</a>{{/WithTime}}{{/HasCustomButtons}}</div>',yearsTemplate:'<ul class="years" {{#HideYears}}style="display:none"{{/HideYears}}>{{#Years}}<li class="{{#selected}}active{{/selected}} {{#otherDecade}} new {{/otherDecade}} {{^selectable}} inactive bs-notSelectable{{/selectable}}"><a href="#" class="bs-yearValue" data-value="{{value}}">{{year}}</a></li>{{/Years}}</ul>',monthsTemplate:'<ul class="months" {{#HideMonths}}style="display:none"{{/HideMonths}}>{{#Months}}<li class="{{#selected}}active{{/selected}} {{^selectable}}inactive bs-notSelectable{{/selectable}}"><a href="#" class="bs-monthValue" data-value="{{value}}">{{month}}</a></li>{{/Months}}</ul>',daysTemplate:'<ul class="days" {{#HideDays}}style="display:none"{{/HideDays}}>{{#DaysNames}}<li class="day">{{.}}</li>{{/DaysNames}}{{#Days}}<li class="{{#selectable}}{{#selected}}active {{/selected}} {{#otherMonth}} new {{/otherMonth}} {{/selectable}}{{^selectable}} bs-notSelectable {{/selectable}} {{ cssClass }}" {{#tooltip}}title="{{tooltip}}}"{{/tooltip}}><a href="#" class="bs-dateValue" data-value="{{value}}">{{day}}</a></li>{{/Days}}</ul>'};b.prototype.timeTemplates={contTemplate:'<ul class="{{#Is12Hours}}us-time{{/Is12Hours}}"><li><span>HH</span></li><li><span>MM</span></li><li><span>SS</span></li>{{#Is12Hours}}<li>&nbsp;</li>{{/Is12Hours}}<li><span class="btn btn-up bs-hourUp"></span></li><li><span class="btn btn-up bs-minuteUp"></span></li><li><span class="btn btn-up bs-secondUp"></span></li>{{#Is12Hours}}<li>&nbsp;</li>{{/Is12Hours}}<li><input type="text" class="bs-hourInput" maxlength="2" value="{{Time.hour}}"></li><li><input type="text" class="bs-minuteInput" maxlength="2" value="{{Time.minute}}"></li><li><input type="text" class="bs-secondInput" maxlength="2" value="{{Time.second}}"></li>{{#Is12Hours}}<li><a href="#" class="btn btn-default bs-timeMeridiem">{{Time.meridiem}}</a></li>{{/Is12Hours}}<li><span class="btn btn-down bs-hourDown"></span></li><li><span class="btn btn-down bs-minuteDown"></span></li><li><span class="btn btn-down bs-secondDown"></span></li>{{#Is12Hours}}<li>&nbsp;</li>{{/Is12Hours}}</ul>',secondaryActions:'<div class="bs-secondary-action">{{#TimeNowButton}}<a href="#" class="btn btn-default bs-timeNow">{{NowText}}</a>{{/TimeNowButton}}{{#WithDate}}<a href="#" class="btn btn-set date pull-right bs-setDateBtn">{{SetDateText}}</a>{{/WithDate}}</div>'};b.prototype._extendOptions=function(c){return a.extend(true,{},c,this.options)};window.bsDatepickerRenderer=b;if(typeof module!=="undefined"&&module.exports){module.exports=b}if(typeof define==="function"&&define.amd){return b}}));(function(a){if(typeof define==="function"&&define.amd){define("bforms-datepicker-range",["jquery","bforms-datepicker","bforms-datepicker-tmpl"],a)}else{a(window.jQuery,window.bsDatepicker,window.bsDatepickerRenderer)}}(function(a,b,c){var d=function(e,f){this.$element=e;this.options=a.extend(true,{},f);this.init()};d.prototype.init=function(){this.renderer=new c();if(this.options.checkForMobileDevice==true){this.options.inlineMobile=a.browser!=null&&a.browser.mobile==true}if(this.options.inlineMobile&&this.options.inline!=true){this._initInlineMobile();if(this.$element.is("input")){if(this.options.readonlyInput||(a.browser!=null&&a.browser.mobile==true)){this.$element.prop("readonly",true)}}}else{if(this.$element.is("input")){this.$input=this.$element;if(this.options.readonlyInput||(a.browser!=null&&a.browser.mobile==true)){this.$input.prop("readonly",true)}}this._initLang(this.options.language);this.isInline=this.options.inline||false;this._visible=this.options.inline?true:false;if(this.options.visible==false){this._visible=false}if(typeof this.options.placeholderValue==="undefined"){this.options.placeholderValue=this.options.placeholder}this._buildElement();this._addHandlers();this.$element.data("bRangepicker",this);this.$element.addClass("hasRangepicker");this._timeoutHandler=null}};d.prototype._buildElement=function(){if(this.options.allowDeselect){this.options.allowDeselectStart=this.options.allowDeselectEnd=true}this.$container=this.renderer.renderRangeContainer({applyText:this.options.applyText,cancelText:this.options.cancelText,fromText:this.options.fromText,presetRangesText:this.options.presetRangesText,presetRangesPlaceholderText:this.options.presetRangesPlaceholderText,toText:this.options.toText,allowDeselectStart:this.options.allowDeselectStart,allowDeselectEnd:this.options.allowDeselectEnd,theme:this.options.theme,hideRanges:this.options.hideRanges,hasPresetRanges:this.options.usePresetRanges,presetRanges:this.options.usePresetRanges?this._getPresetRanges():null});this.$start=this.$container.find(".bs-start-replace");this.$end=this.$container.find(".bs-end-replace");this.$startLabel=this.$container.find(".bs-rangeStartLabel");this.$endLabel=this.$container.find(".bs-rangeEndLabel");if(typeof this.options.language!=="undefined"){if(typeof this.options.startOptions!=="undefined"&&typeof this.options.startOptions.language==="undefined"){this.options.startOptions.language=this.options.language}if(typeof this.options.endOptions!=="undefined"&&typeof this.options.endOptions.language==="undefined"){this.options.endOptions.language=this.options.language}}if(typeof this.options.theme!=="undefined"){this.options.startOptions.theme=this.options.endOptions.theme="blue"}var h=this.options.startOptions;h.maxDate=this.options.endOptions.maxDate||null;this.options.allowInvalidMinMax=this.options.allowInvalidMinMax&&!this.options.startOptions.defaultDateValue&&!this.options.endOptions.defaultDate;this.$start.bsDatepicker(a.extend(true,{},{onChange:a.proxy(this.onStartChange,this),onDayMouseOver:a.proxy(this.onStartDaysMouseOver,this),onDaysMouseOut:a.proxy(this.onStartDaysMouseOut,this),allowSame:this.options.allowSame,allowDeselect:this.options.allowDeselectStart,deferredRender:this.options.deferredRender},h,{inline:true,ShowClose:false,}));var f=this.options.endOptions;f.minDate=h.minDate||null;this.$end.bsDatepicker(a.extend(true,{},{defaultDateValue:this.$start.bsDatepicker("getUnformattedValue"),defaultDate:f.type=="timepicker"?"+1h":"+1d",onChange:a.proxy(this.onEndChange,this),onDayMouseOver:a.proxy(this.onEndDaysMouseOver,this),onDaysMouseOut:a.proxy(this.onEndDaysMouseOut,this),allowSame:this.options.allowSame,allowDeselect:this.options.allowDeselectEnd,deferredRender:this.options.deferredRender},f,{inline:true,ShowClose:false,}));if(!this.options.allowInvalidMinMax){this.$start.bsDatepicker("option","maxDate",this.$end.bsDatepicker("getUnformattedValue"));this.$end.bsDatepicker("option","minDate",this.$start.bsDatepicker("getUnformattedValue"))}this.$start.bsDatepicker("option","beforeShowDay",a.proxy(this.beforeShowDay,this));this.$end.bsDatepicker("option","beforeShowDay",a.proxy(this.beforeShowDay,this));this._setStartLabel(this.$start.bsDatepicker("getValue"));this._setEndLabel(this.$end.bsDatepicker("getValue"));if(this.isInline){this.$element.after(this.$container.show());this.$element.hide();if(this.isInline){this.$container.addClass("bs-inline-picker")}}else{a("body").append(this.$container);this._positionRange()}if(this._visible==false){this.$container.hide()}var e=this.options.startOptions.initialValue&&this.options.endOptions.initialValue||this.options.startOptions.initialValue&&this.options.allowDeselectEnd||this.options.endOptions.initialValue&&this.options.allowDeselectStart;var i=this.$start.bsDatepicker("getValue"),g=this.$end.bsDatepicker("getValue");if(i!=null&&i!=""){this._valueSettedForFirst=true}if(g!=null&&g!=""){this._valueSettedForSecond=true}if(e){this.applyRange()}};d.prototype._addHandlers=function(){if(!this.isInline||this.inlineMobile){a(document).on("scroll",a.proxy(function(){if(this._visible){window.clearTimeout(this._timeoutHandler);this._timeoutHandler=window.setTimeout(a.proxy(this._positionRange,this),20)}},this));a(window).on("resize",a.proxy(function(){this._positionRange()},this));if(this.options.openOnFocus===true){this.$element.on("focus",a.proxy(function(g){this.show()},this))}if(this.options.closeOnBlur===true){a(document).on("mouseup",a.proxy(function(j){var g=a(j.target);if(g[0]!=this.$element[0]&&g.closest(".bs-range-picker").length===0){if(!g.hasClass("glyphicon")||g.parent()[0]!=this.$input.parent()[0]){var i=true;if(typeof this.options.toggleButtons!=="undefined"){for(var k in this.options.toggleButtons){var h=a(this.options.toggleButtons[k].selector);if(g.closest(h).length>0){i=false}}}if(i){this.hide()}}}},this))}if(typeof this.$input!=="undefined"&&this.$input.length){this.$input.on("change",a.proxy(this.onInputChange,this))}if(typeof this.options.toggleButtons!=="undefined"&&a.isArray(this.options.toggleButtons)){for(var f in this.options.toggleButtons){var e=this.options.toggleButtons[f];this.unbindEvent(e.selector,e.event);a("body").on(e.event,e.selector,a.proxy(function(g){if(this._visible){this.hide()}else{this.show()}},this))}}if(typeof this.$input!=="undefined"){this.$input.on("focusout",a.proxy(function(g){if(g.relatedTarget&&a(g.relatedTarget).parents(this.$element).length==0){this.hide()}},this))}}this.$container.on("click",".bs-applyRange",a.proxy(this.applyRangeClick,this));this.$container.on("click",".bs-cancelRange",a.proxy(this.cancelRange,this));this.$container.on("click",".bs-resetDateRange",a.proxy(this.cancelDate,this));this.$container.on("change",".bs-preset-ranges",a.proxy(this._onPresetRangeChange,this))};d.prototype._initInlineMobile=function(){var f=a.extend(true,{},this.options,{inline:true,altFields:[{selector:this.$element}],visible:false,closeOnBlur:false});var e=a('<div class="bs-picker-replace"></div>');this.$element.parent().after(e);e.bsDateRange(f);this.$element.on("click",function(){e.bsDateRange("show")})};d.prototype._initLang=function(e){a.extend(true,this.options,a.fn.bsDateRangeLang[e])};d.prototype.onInputChange=function(g){var f=a(g.currentTarget);var l=f.val().split(" "+this.options.delimiter+" ");if(l.length==2){var k=l[0],i=l[1];var j=moment(k,this.$start.bsDatepicker("getFormat"),this.$start.bsDatepicker("option","language")),h=moment(i,this.$end.bsDatepicker("getFormat"),this.$end.bsDatepicker("option","language"));if(j!=null&&j.isValid()&&this.$start.bsDatepicker("isValidDate",j)){this.$start.bsDatepicker("setValue",j)}if(h!=null&&h.isValid()&&this.$end.bsDatepicker("isValidDate",h)){this.$end.bsDatepicker("setValue",h)}this.applyRange()}else{if(l[0]==""){this.resetRange("");this._updateAltFields("","")}else{this.applyRange()}}};d.prototype.onStartChange=function(e){if(e.date==null&&typeof this.options.startOptions.minDate!=="undefined"&&this.options.startOptions.minDate!=""){this.$end.bsDatepicker("option","minDate",this.options.startOptions.minDate)}else{this.$end.bsDatepicker("option","minDate",e.date)}this._setStartLabel(e.formattedDate);this.$startLabel.data("value",e.date);if(e.date!=null){this._valueSettedForFirst=true}else{this._valueSettedForFirst=false}var f=this.$end.data("bDatepicker").currentValue;if((e.date!=null)&&f==null||!this.$end.bsDatepicker("isValidDate",f)){this.$end.bsDatepicker("setValue",e.date.clone().add("days",1))}this._trigger("onStartChange",e);if(this._resetRangeOnChange){this.$container.find(".bs-preset-ranges").val("");this._resetRangeOnChange=false}};d.prototype.onEndChange=function(e){if(e.date==null&&typeof this.options.endOptions.maxDate!=="undefined"&&this.options.endOptions.maxDate!=""){this.$start.bsDatepicker("option","maxDate",this.options.endOptions.maxDate)}else{this.$start.bsDatepicker("option","maxDate",e.date)}this._setEndLabel(e.formattedDate);this.$endLabel.data("value",e.date);if(e.date!=null){this._valueSettedForSecond=true}else{this._valueSettedForSecond=false}var f=this.$start.data("bDatepicker").currentValue;if((e.date!=null)&&f!=null&&!this.$start.bsDatepicker("isValidDate",f)){this.$start.bsDatepicker("setValue",e.date.clone().subtract("days",1))}this._trigger("onEndChange",e);if(this._resetRangeOnChange){this.$container.find(".bs-preset-ranges").val("");this._resetRangeOnChange=false}};d.prototype.applyRange=function(f){this._startValue=this.$startLabel.data("value");if(typeof this._startValue==="undefined"){this._startValue=this.$start.bsDatepicker("getUnformattedValue");this.$startLabel.data(this._startValue)}this._endValue=this.$endLabel.data("value");if(typeof this._endValue==="undefined"){this._endValue=this.$end.bsDatepicker("getUnformattedValue");this.$endLabel.data(this._endValue)}var e=typeof f==="string"?f:this.getValue();if(typeof this.$input!=="undefined"){this.$input.val(e);if(typeof this.$input.valid==="function"&&this.$input.parents("form").length){this.$input.valid()}}this._updateAltFields();this._trigger("onRangeChange",{$container:this.$container,startValue:this._startValue,endValue:this._endValue,$start:this.$start,$end:this.$end,value:this.getValue()})};d.prototype.applyRangeClick=function(f){if(f!=null&&typeof f.preventDefault==="function"){f.preventDefault();f.stopPropagation()}this.applyRange();if(this.options.allowHideOnApply){this.hide()}};d.prototype.cancelRange=function(f){if(f!=null&&typeof f.preventDefault==="function"){f.preventDefault();f.stopPropagation()}this.hide();if(typeof this._startValue!=="undefined"){this.$start.bsDatepicker("setValue",this._startValue)}if(typeof this._endValaue!=="undefined"){this.$end.bsDatepicker("setValue",this._endValue)}};d.prototype.cancelDate=function(g){g.preventDefault();g.stopPropagation();var f=a(g.currentTarget);if(f.prev(".bs-rangeStartLabel").length){this.$start.bsDatepicker("clearValue")}else{this.$end.bsDatepicker("clearValue")}};d.prototype.onStartDaysMouseOver=function(g,e,f){if(f&&this.$startLabel.val()!=""){this._setStartLabel(e)}};d.prototype.onStartDaysMouseOut=function(f,e){if(this.$startLabel.val()!=""){this._setStartLabel(e)}};d.prototype.onEndDaysMouseOver=function(g,e,f){if(f&&this.$endLabel.val()!=""){this._setEndLabel(e)}};d.prototype.onEndDaysMouseOut=function(f,e){if(this.$endLabel.val()!=""){this._setEndLabel(e)}};d.prototype.beforeShowDay=function(j,f){var g=this.$end.bsDatepicker("getUnformattedValue"),i=this.$start.bsDatepicker("getUnformattedValue"),e=moment(j),h={};if((this._valueSettedForSecond==false||g==null||e.isSame(g,"day")||e.isBefore(g))&&(i==null||e.isAfter(i)||e.isSame(i,"day")||this._valueSettedForFirst==false)){if(f.selectable===true){h.cssClass="in-range"}}if(typeof this.options.beforeShowDay==="function"){a.extend(true,h,this.options.beforeShowDay(j,f))}if(h.selectable===false&&typeof h.cssClass!=="undefined"&&h.cssClass.indexOf("in-range")!==-1){h.cssClass=h.cssClass.replace("in-range","")}return h};d.prototype._onPresetRangeChange=function(h){h.preventDefault();var f=a(h.currentTarget).find("option:selected"),g=f.data();if(f.attr("value")){this._resetRangeOnChange=false;var i=g.expressionfrom,j=g.expressionto,l=g.priority;if(g.priority=="to"){var m=this.$end.bsDatepicker("setValueFromExpression",g.expressionto,g.source=="now"?moment():null);this.$start.bsDatepicker("setValueFromExpression",g.expressionfrom,m)}else{var k=this.$start.bsDatepicker("setValueFromExpression",g.expressionfrom,g.source=="now"?moment():null);this.$end.bsDatepicker("setValueFromExpression",g.expressionto,k)}this._resetRangeOnChange=true;this.applyRangeClick()}else{this._resetRangeOnChange=false}};d.prototype._setStartLabel=function(e){this.$startLabel.val(e);if(this.options.allowDeselectStart){if(e==""){this.$startLabel.next(".bs-resetDateRange").hide()}else{this.$startLabel.next(".bs-resetDateRange").show()}}};d.prototype._setEndLabel=function(e){this.$endLabel.val(e);if(this.options.allowDeselectEnd){if(e==""){this.$endLabel.next(".bs-resetDateRange").hide()}else{this.$endLabel.next(".bs-resetDateRange").show()}}};d.prototype._positionRange=function(){if(this.isInline){return}var q=this.options.xOrient,r=this.options.yOrient,j=this.$container.outerHeight(true),k=this.$container.outerWidth(true),g=this.$element.offset();if(r!="below"&&r!="above"){var o=a(window).innerHeight(),m=a(document).scrollTop(),f=this.$element.outerHeight(true);var n=-m+g.top-j,e=m+o-(g.top+f+j);if(Math.max(n,e)===e){r="below"}else{r="above"}}if(q!="right"&&q!="left"){var p=a(window).innerWidth(),h=this.$element.outerWidth(true);var l=g.left-(h>k?h-k:k-h),i=p-(g.left+k);if(l>0&&i>0){q="left"}else{if(Math.max(l,i)===l){q="right"}else{q="left"}}}if(r=="below"){this.$container.css({top:g.top+this.$element.height()+20});this.$container.removeClass("open-above");this.$container.addClass("open-below")}else{if(r=="above"){this.$container.css({top:g.top-this.$element.height()-j+16});this.$container.removeClass("open-below");this.$container.addClass("open-above")}}if(q!="right"&&q!="left"){q="left"}if(q=="left"){this.$container.css("left",g.left);this.$container.removeClass("open-right");this.$container.addClass("open-left")}else{if(q=="right"){this.$container.css("left",g.left+this.$element.outerWidth()-this.$container.outerWidth());this.$container.removeClass("open-left");this.$container.addClass("open-right")}}};d.prototype._trigger=function(f,e,g){if(typeof this.options[f]==="function"){this.options[f](e)}if(g!==true){this.$element.trigger(f,e)}};d.prototype._updateAltFields=function(o,k){if(typeof this.options.startAltFields!=="undefined"&&a.isArray(this.options.startAltFields)){for(var n in this.options.startAltFields){var j=this.options.startAltFields[n];var g=a(j.selector);if(g.length>0){if(g.is("input")){g.val(typeof o==="undefined"?moment.isMoment(this._startValue)?this._startValue.format():"":o)}else{g.text(moment.isMoment(this._startValue)?this._startValue.format():"")}}}}if(typeof this.options.endAltFields!=="undefined"&&a.isArray(this.options.endAltFields)){for(var m in this.options.endAltFields){var i=this.options.endAltFields[m];var f=a(i.selector);if(f.length>0){if(f.is("input")){f.val(typeof k==="undefined"?moment.isMoment(this._endValue)?this._endValue.format():"":"")}else{f.text(moment.isMoment(this._endValue)?this._endValue.format():"")}}}}if(typeof this.options.altFields!=="undefined"&&a.isArray(this.options.altFields)){for(var l in this.options.altFields){var h=this.options.altFields[l];var e=a(h.selector);if(e.length>0){if(e.is("input")){e.val(this.getValue())}else{e.text(this.getValue())}}}}};d.prototype._getPresetRanges=function(){if(typeof this.options.getPresetRanges=="function"){return this.options.getPresetRanges()}return[{text:"Today",value:1,source:"now",expressionFrom:"_0h _0m _0s",expressionTo:"_23h _59m _59s",priority:"to"},{text:"Last 12 hours",expressionFrom:"-12h",expressionTo:"now",value:2,priority:"to"},{text:"Last 7 days",expressionFrom:"-7d",expressionTo:"now",value:3,priority:"to"},{text:"Last month",expressionFrom:"-1M",expressionTo:"now",value:4,priority:"to"}]};d.prototype.show=function(){if(this._visible!==true){this._positionRange();var e={preventShow:false};this._trigger("beforeShow",e);if(e.preventShow==false){if(this.options.deferredRender){this.$start.bsDatepicker("render",true);this.$end.bsDatepicker("render",true)}this.$container.show();this._visible=true;this._trigger("afterShow",{datepicker:this.$container,element:this.$element,datepickerType:this._type})}}return this};d.prototype.hide=function(){if(this._visible!==false){var e={preventHide:false};this._trigger("beforeHide",e);if(e.preventHide==false){this.$container.hide();this._visible=false;if(typeof this.$input!=="undefined"){this.$input.trigger("blur")}this._trigger("afterHide",{datepicker:this.$container,element:this.$element,datepickerType:this._type})}}return this};d.prototype.getStartValue=function(){return this._valueSettedForFirst!==false?this.$startLabel.val():this.options.placeholderValue};d.prototype.getEndValue=function(){return this._valueSettedForSecond!==false?this.$endLabel.val():this.options.placeholderValue};d.prototype.resetRange=function(e){this.$startLabel.data("value",this._startValue);this.$startLabel.val(this.$start.bsDatepicker("format",this._startValue));this.$start.bsDatepicker("setValue",this._startValue);this.$endLabel.data("value",this._endValue);this.$endLabel.val(this.$end.bsDatepicker("format",this._endValue));this.$end.bsDatepicker("setValue",this._endValue);this.applyRange(e)};d.prototype.resetValue=function(){if(this.options.startOptions.initialValue){this.$startLabel.data("value",this._startValue);this.$startLabel.val(this.$start.bsDatepicker("format",this._startValue));this.$start.bsDatepicker("setValue",this._startValue)}else{this.$startLabel.removeData("value");this.$start.bsDatepicker("resetValue");this._setStartLabel(this.$start.bsDatepicker("getValue"));this.$end.bsDatepicker("option","minDate",null)}if(this.options.endOptions.initialValue){this.$endLabel.data("value",this._endValue);this.$endLabel.val(this.$end.bsDatepicker("format",this._endValue));this.$end.bsDatepicker("setValue",this._endValue)}else{this.$endLabel.removeData("value");this.$end.bsDatepicker("resetValue");this._setEndLabel(this.$end.bsDatepicker("getValue"));this.$start.bsDatepicker("option","maxDate",null)}this.applyRange("");if(typeof this.$input!=="undefined"){this.$input.val("")}if(this.options.startOptions.initialValue&&this.options.endOptions.initialValue){this.applyRange()}else{this._updateAltFields("","")}};d.prototype.destroy=function(){this.$element.removeData("bRangepicker");this.$element.removeClass("hasRangepicker");this.$container.remove()};d.prototype.unbindEvent=function(g,f,e){if(typeof g!=="undefined"&&typeof f!=="undefined"){if(typeof e==="undefined"){e=a("body")}e.off(f,g)}};d.prototype.getValue=function(){if((typeof this._valueSettedForFirst!=="undefined"&&this._valueSettedForFirst!==false)||(typeof this._valueSettedForSecond!=="undefined"&&this._valueSettedForSecond!==false)){var f=this.getStartValue(),e=this.getEndValue();if(f===""&&e===""){return""}else{if(f===""){f=this.options.placeholderValue}if(e===""){e=this.options.placeholderValue}return f+" "+this.options.delimiter+" "+e}}else{return""}};d.prototype.option=function(e,f){if(typeof f==="undefined"){return this.options[e]}else{this.options[e]=f;if(typeof this["option_"+e]==="function"){this["option_"+e].apply(this,[f])}}};d.prototype.setStartValue=function(f){var e;if(!moment.isMoment(f)){e=moment(f,this.$start.bsDatepicker("getFormat"),this.$start.bsDatepicker("option","language"))}else{e=f.clone()}if(e!=null&&e.isValid()&&this.$start.bsDatepicker("isValidDate",e)){this.$start.bsDatepicker("setValue",e)}else{this.$start.bsDatepicker("clearValue")}this.applyRange()};d.prototype.setEndValue=function(f){var e;if(!moment.isMoment(f)){e=moment(f,this.$end.bsDatepicker("getFormat"),this.$end.bsDatepicker("option","language"))}else{e=f.clone()}if(e!=null&&e.isValid()&&this.$end.bsDatepicker("isValidDate",e)){this.$end.bsDatepicker("setValue",e)}else{this.$end.bsDatepicker("clearValue")}this.applyRange()};d.prototype.option_beforeShowDay=function(){this.$start.bsDatepicker("render");this.$end.bsDatepicker("render")};a.fn.bsDateRangeDefaults={openOnFocus:true,closeOnBlur:true,time:false,delimiter:"-",allowHideOnApply:true,startOptions:{inline:true,ShowClose:false},endOptions:{inline:true,ShowClose:false},language:"en",allowInvalidMinMax:true,checkForMobileDevice:true,allowSame:true,deferredRender:true,usePresetRanges:false};a.fn.bsDateRangeLang={en:{applyText:"Apply",cancelText:"Cancel",fromText:"From",toText:"To",placeholder:"not specified",presetRangesPlaceholderText:"Choose preset",presetRangesText:"Preset ranges"},ro:{applyText:"Setează",cancelText:"Anulare",fromText:"De la",toText:"Până la",placeholder:"nespecificat",presetRangesPlaceholderText:"Alege intervalul",presetRangesText:"Intervale predefinite"}};a.fn.bsDateRange=function(){var e=Array.prototype.slice.call(arguments,0),h=e[0],g=e.splice(1);if(typeof h==="undefined"||typeof h==="object"){return new d(a(this),a.extend(true,{},a.fn.bsDateRangeDefaults,h))}else{if(typeof h==="string"){var f=(this).data("bRangepicker");if(typeof f==="undefined"){throw"Cannot call method "+h+" before initializing plugin"}else{return f[h].apply(f,g)}}}}}));(function(a){if(typeof define==="function"&&define.amd){define("bforms-datepicker-i18n",["moment"],a)}else{a(window.moment)}}(function(a){a.lang("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:"ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+((this.hours()!==1)?"s":"")+"] LT"},nextDay:function(){return"[manana a la"+((this.hours()!==1)?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+((this.hours()!==1)?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+((this.hours()!==1)?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+((this.hours()!==1)?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinal:"%do",week:{dow:1,doy:4}});a.lang("ro",{months:"Ianuarie_Februarie_Martie_Aprilie_Mai_Iunie_Iulie_August_Septembrie_Octombrie_Noiembrie_Decembrie".split("_"),monthsShort:"Ian_Feb_Mar_Apr_Mai_Iun_Iul_Aug_Sep_Oct_Noi_Dec".split("_"),weekdays:"Luni_Marţi_Miercuri_Joi_Vineri_Sâmbătă_Duminică".split("_"),weekdaysShort:"Lun_Mar_Mie_Joi_Vin_Sâm_Dum".split("_"),weekdaysMin:"Lu_Ma_Mi_Jo_Vi_Sâ_Du".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:"%d minute",h:"o oră",hh:"%d ore",d:"o zi",dd:"%d zile",M:"o lună",MM:"%d luni",y:"un an",yy:"%d ani"},week:{dow:1,doy:7}});a.lang("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_aout_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._aout_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui a] LT",nextDay:"[Demain a] LT",nextWeek:"dddd [a] LT",lastDay:"[Hier a] LT",lastWeek:"dddd [dernier a] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(b){return b+(b===1?"er":"")},week:{dow:1,doy:4}});a.lang("en")}));(function(a){if(typeof define==="function"&&define.amd){define("moment",[],a)}else{a()}}(function(){(function(ah){var K,ak="2.1.0",ae=Math.round,r,x={},q=(typeof module!=="undefined"&&module.exports),d=/^\/?Date\((\-?\d+)/i,e=/(\-)?(\d*)?\.?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,m=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,A=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,T=/\d\d?/,U=/\d{1,3}/,X=/\d{3}/,S=/\d{1,4}/,V=/[+\-]?\d{1,6}/,aa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Z=/Z|[\+\-]\d\d:?\d\d/i,W=/T/i,Y=/[\+\-]?\d+(\.\d{1,3})?/,u=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,t="YYYY-MM-DDTHH:mm:ssZ",v=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],R=/([\+\-]|\d\d)/gi,ab="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),aj={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},ai={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",M:"month",y:"year"},k={},O="DDD w W M D d".split(" "),P="M D H h m s w W".split(" "),n={M:function(){return this.month()+1},MMM:function(i){return this.lang().monthsShort(this,i)},MMMM:function(i){return this.lang().months(this,i)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(i){return this.lang().weekdaysMin(this,i)},ddd:function(i){return this.lang().weekdaysShort(this,i)},dddd:function(i){return this.lang().weekdays(this,i)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return y(this.year()%100,2)},YYYY:function(){return y(this.year(),4)},YYYYY:function(){return y(this.year(),5)},gg:function(){return y(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return y(this.weekYear(),5)},GG:function(){return y(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return y(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return ~~(this.milliseconds()/100)},SS:function(){return y(~~(this.milliseconds()/10),2)},SSS:function(){return y(this.milliseconds(),3)},Z:function(){var i=-this.zone(),am="+";if(i<0){i=-i;am="-"}return am+y(~~(i/60),2)+":"+y(~~i%60,2)},ZZ:function(){var i=-this.zone(),am="+";if(i<0){i=-i;am="-"}return am+y(~~(10*i/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};function Q(am,i){return function(an){return y(am.call(this,an),i)}}function N(i,am){return function(an){return this.lang().ordinal(i.call(this,an),am)}}while(O.length){r=O.pop();n[r+"o"]=N(n[r],r)}while(P.length){r=P.pop();n[r+r]=Q(n[r],2)}n.DDDD=Q(n.DDD,3);function w(){}function L(i){j(this,i)}function h(am){var au=am.years||am.year||am.y||0,aq=am.months||am.month||am.M||0,at=am.weeks||am.week||am.w||0,i=am.days||am.day||am.d||0,an=am.hours||am.hour||am.h||0,ap=am.minutes||am.minute||am.m||0,ar=am.seconds||am.second||am.s||0,ao=am.milliseconds||am.millisecond||am.ms||0;this._input=am;this._milliseconds=ao+ar*1000+ap*60000+an*3600000;this._days=i+at*7;this._months=aq+au*12;this._data={};this._bubble()}function j(am,an){for(var ao in an){if(an.hasOwnProperty(ao)){am[ao]=an[ao]}}return am}function a(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function y(i,an){var am=i+"";while(am.length<an){am="0"+am}return am}function b(au,an,aq,ap){var ar=an._milliseconds,am=an._days,av=an._months,at,ao,i;if(ar){au._d.setTime(+au._d+ar*aq)}if(am||av){at=au.minute();ao=au.hour()}if(am){au.date(au.date()+am*aq)}if(av){au.month(au.month()+av*aq)}if(ar&&!ap){K.updateOffset(au)}if(am||av){au.minute(at);au.hour(ao)}}function s(i){return Object.prototype.toString.call(i)==="[object Array]"}function f(am,an){var aq=Math.min(am.length,an.length),ar=Math.abs(am.length-an.length),ao=0,ap;for(ap=0;ap<aq;ap++){if(~~am[ap]!==~~an[ap]){ao++}}return ao+ar}function M(i){return i?ai[i]||i.toLowerCase().replace(/(.)s$/,"$1"):i}w.prototype={set:function(am){var ao,an;for(an in am){ao=am[an];if(typeof ao==="function"){this[an]=ao}else{this["_"+an]=ao}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(i){return this._months[i.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()]},monthsParse:function(ao){var am,an,ap;if(!this._monthsParse){this._monthsParse=[]}for(am=0;am<12;am++){if(!this._monthsParse[am]){an=K([2000,am]);ap="^"+this.months(an,"")+"|^"+this.monthsShort(an,"");this._monthsParse[am]=new RegExp(ap.replace(".",""),"i")}if(this._monthsParse[am].test(ao)){return am}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()]},weekdaysParse:function(ap){var am,an,ao;if(!this._weekdaysParse){this._weekdaysParse=[]}for(am=0;am<7;am++){if(!this._weekdaysParse[am]){an=K([2000,1]).day(am);ao="^"+this.weekdays(an,"")+"|^"+this.weekdaysShort(an,"")+"|^"+this.weekdaysMin(an,"");this._weekdaysParse[am]=new RegExp(ao.replace(".",""),"i")}if(this._weekdaysParse[am].test(ap)){return am}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(i){var am=this._longDateFormat[i];if(!am&&this._longDateFormat[i.toUpperCase()]){am=this._longDateFormat[i.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(an){return an.slice(1)});this._longDateFormat[i]=am}return am},isPM:function(i){return((i+"").toLowerCase()[0]==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(i,an,am){if(i>11){return am?"pm":"PM"}else{return am?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(i,am){var an=this._calendar[i];return typeof an==="function"?an.apply(am):an},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(am,ap,ao,i){var an=this._relativeTime[ao];return(typeof an==="function")?an(am,ap,ao,i):an.replace(/%d/i,am)},pastFuture:function(i,an){var am=this._relativeTime[i>0?"future":"past"];return typeof am==="function"?am(an):am.replace(/%s/i,an)},ordinal:function(i){return this._ordinal.replace("%d",i)},_ordinal:"%d",preparse:function(i){return i},postformat:function(i){return i},week:function(i){return al(i,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}};function z(i,am){am.abbr=i;if(!x[i]){x[i]=new w()}x[i].set(am);return x[i]}function o(am){if(!am){return K.fn._lang}if(!x[am]&&q){try{require("./lang/"+am)}catch(i){return K.fn._lang}}return x[am]}function ad(i){if(i.match(/\[.*\]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function H(an){var am=an.match(m),ao,ap;for(ao=0,ap=am.length;ao<ap;ao++){if(n[am[ao]]){am[ao]=n[am[ao]]}else{am[ao]=ad(am[ao])}}return function(i){var aq="";for(ao=0;ao<ap;ao++){aq+=am[ao] instanceof Function?am[ao].call(i,an):am[ao]}return aq}}function l(ao,am){var an=5;function ap(i){return ao.lang().longDateFormat(i)||i}while(an--&&A.test(am)){am=am.replace(A,ap)}if(!k[am]){k[am]=H(am)}return k[am](ao)}function p(am,i){switch(am){case"DDDD":return X;case"YYYY":return S;case"YYYYY":return V;case"S":case"SS":case"SSS":case"DDD":return U;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return aa;case"a":case"A":return o(i._l)._meridiemParse;case"X":return Y;case"Z":case"ZZ":return Z;case"T":return W;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return T;default:return new RegExp(am.replace("\\",""))}}function ag(an){var ao=(Z.exec(an)||[])[0],am=(ao+"").match(R)||["-",0,0],i=+(am[1]*60)+~~am[2];return am[0]==="+"?-i:i}function c(ap,ao,am){var i,an=am._a;switch(ap){case"M":case"MM":an[1]=(ao==null)?0:~~ao-1;break;case"MMM":case"MMMM":i=o(am._l).monthsParse(ao);if(i!=null){an[1]=i}else{am._isValid=false}break;case"D":case"DD":case"DDD":case"DDDD":if(ao!=null){an[2]=~~ao}break;case"YY":an[0]=~~ao+(~~ao>68?1900:2000);break;case"YYYY":case"YYYYY":an[0]=~~ao;break;case"a":case"A":am._isPm=o(am._l).isPM(ao);break;case"H":case"HH":case"h":case"hh":an[3]=~~ao;break;case"m":case"mm":an[4]=~~ao;break;case"s":case"ss":an[5]=~~ao;break;case"S":case"SS":case"SSS":an[6]=~~(("0."+ao)*1000);break;case"X":am._d=new Date(parseFloat(ao)*1000);break;case"Z":case"ZZ":am._useUTC=true;am._tzm=ag(ao);break}if(ao==null){am._isValid=false}}function g(am){var ao,an,ap=[];if(am._d){return}for(ao=0;ao<7;ao++){am._a[ao]=ap[ao]=(am._a[ao]==null)?(ao===2?1:0):am._a[ao]}ap[3]+=~~((am._tzm||0)/60);ap[4]+=~~((am._tzm||0)%60);an=new Date(0);if(am._useUTC){an.setUTCFullYear(ap[0],ap[1],ap[2]);an.setUTCHours(ap[3],ap[4],ap[5],ap[6])}else{an.setFullYear(ap[0],ap[1],ap[2]);an.setHours(ap[3],ap[4],ap[5],ap[6])}am._d=an}function E(am){var aq=am._f.match(m),ap=am._i,an,ao;am._a=[];for(an=0;an<aq.length;an++){ao=(p(aq[an],am).exec(ap)||[])[0];if(ao){ap=ap.slice(ap.indexOf(ao)+ao.length)}if(n[aq[an]]){c(aq[an],ao,am)}}if(ap){am._il=ap}if(am._isPm&&am._a[3]<12){am._a[3]+=12}if(am._isPm===false&&am._a[3]===12){am._a[3]=0}g(am)}function D(an){var ar,at,am,aq=99,ap,ao;for(ap=0;ap<an._f.length;ap++){ar=j({},an);ar._f=an._f[ap];E(ar);at=new L(ar);ao=f(ar._a,at.toArray());if(at._il){ao+=at._il.length}if(ao<aq){aq=ao;am=at}}j(an,am)}function C(am){var an,ap=am._i,ao=u.exec(ap);if(ao){am._f="YYYY-MM-DD"+(ao[2]||" ");for(an=0;an<4;an++){if(v[an][1].exec(ap)){am._f+=v[an][0];break}}if(Z.exec(ap)){am._f+=" Z"}E(am)}else{am._d=new Date(ap)}}function B(i){var am=i._i,an=d.exec(am);if(am===ah){i._d=new Date()}else{if(an){i._d=new Date(+an[1])}else{if(typeof am==="string"){C(i)}else{if(s(am)){i._a=am.slice(0);g(i)}else{i._d=am instanceof Date?new Date(+am):new Date(am)}}}}}function af(ao,an,ap,i,am){return am.relativeTime(an||1,!!ap,ao,i)}function ac(ap,at,ao){var ar=ae(Math.abs(ap)/1000),aq=ae(ar/60),an=ae(aq/60),am=ae(an/24),au=ae(am/365),i=ar<45&&["s",ar]||aq===1&&["m"]||aq<45&&["mm",aq]||an===1&&["h"]||an<22&&["hh",an]||am===1&&["d"]||am<=25&&["dd",am]||am<=45&&["M"]||am<345&&["MM",ae(am/30)]||au===1&&["y"]||["yy",au];i[2]=at;i[3]=ap>0;i[4]=ao;return af.apply({},i)}function al(aq,ao,ap){var an=ap-ao,am=ap-aq.day(),i;if(am>an){am-=7}if(am<an-7){am+=7}i=K(aq).add("d",am);return{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function J(i){var an=i._i,am=i._f;if(an===null||an===""){return null}if(typeof an==="string"){i._i=an=o().preparse(an)}if(K.isMoment(an)){i=j({},an);i._d=new Date(+an._d)}else{if(am){if(s(am)){D(i)}else{E(i)}}else{B(i)}}return new L(i)}K=function(am,i,an){return J({_i:am,_f:i,_l:an,_isUTC:false})};K.utc=function(am,i,an){return J({_useUTC:true,_isUTC:true,_l:an,_i:am,_f:i})};K.unix=function(i){return K(i*1000)};K.duration=function(am,ap){var an=K.isDuration(am),ao=(typeof am==="number"),i=(an?am._input:(ao?{}:am)),aq=e.exec(am),at,ar;if(ao){if(ap){i[ap]=am}else{i.milliseconds=am}}else{if(aq){at=(aq[1]==="-")?-1:1;i={y:0,d:~~aq[2]*at,h:~~aq[3]*at,m:~~aq[4]*at,s:~~aq[5]*at,ms:~~aq[6]*at}}}ar=new h(i);if(an&&am.hasOwnProperty("_lang")){ar._lang=am._lang}return ar};K.version=ak;K.defaultFormat=t;K.updateOffset=function(){};K.lang=function(i,am){if(!i){return K.fn._lang._abbr}if(am){z(i,am)}else{if(!x[i]){o(i)}}K.duration.fn._lang=K.fn._lang=o(i)};K.langData=function(i){if(i&&i._lang&&i._lang._abbr){i=i._lang._abbr}return o(i)};K.isMoment=function(i){return i instanceof L};K.isDuration=function(i){return i instanceof h};K.fn=L.prototype={clone:function(){return K(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return l(K(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()]},isValid:function(){if(this._isValid==null){if(this._a){this._isValid=!f(this._a,(this._isUTC?K.utc(this._a):K(this._a)).toArray())}else{this._isValid=!isNaN(this._d.getTime())}}return !!this._isValid},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;return this},format:function(i){var am=l(this,i||K.defaultFormat);return this.lang().postformat(am)},add:function(am,an){var i;if(typeof am==="string"){i=K.duration(+an,am)}else{i=K.duration(am,an)}b(this,i,1);return this},subtract:function(am,an){var i;if(typeof am==="string"){i=K.duration(+an,am)}else{i=K.duration(am,an)}b(this,i,-1);return this},diff:function(an,aq,i){var ap=this._isUTC?K(an).zone(this._offset||0):K(an).local(),ar=(this.zone()-ap.zone())*60000,am,ao;aq=M(aq);if(aq==="year"||aq==="month"){am=(this.daysInMonth()+ap.daysInMonth())*43200000;ao=((this.year()-ap.year())*12)+(this.month()-ap.month());ao+=((this-K(this).startOf("month"))-(ap-K(ap).startOf("month")))/am;ao-=((this.zone()-K(this).startOf("month").zone())-(ap.zone()-K(ap).startOf("month").zone()))*60000/am;if(aq==="year"){ao=ao/12}}else{am=(this-ap);ao=aq==="second"?am/1000:aq==="minute"?am/60000:aq==="hour"?am/3600000:aq==="day"?(am-ar)/86400000:aq==="week"?(am-ar)/604800000:am}return i?ao:a(ao)},from:function(i,am){return K.duration(this.diff(i)).lang(this.lang()._abbr).humanize(!am)},fromNow:function(i){return this.from(K(),i)},calendar:function(){var i=this.diff(K().startOf("day"),"days",true),am=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(am,this))},isLeapYear:function(){var i=this.year();return(i%4===0&&i%100!==0)||i%400===0},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(am){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();if(am!=null){if(typeof am==="string"){am=this.lang().weekdaysParse(am);if(typeof am!=="number"){return this}}return this.add({d:am-i})}else{return i}},month:function(an){var ao=this._isUTC?"UTC":"",i,am;if(an!=null){if(typeof an==="string"){an=this.lang().monthsParse(an);if(typeof an!=="number"){return this}}i=this.date();this.date(1);this._d["set"+ao+"Month"](an);this.date(Math.min(i,this.daysInMonth()));K.updateOffset(this);return this}else{return this._d["get"+ao+"Month"]()}},startOf:function(i){i=M(i);switch(i){case"year":this.month(0);case"month":this.date(1);case"week":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(i==="week"){this.weekday(0)}return this},endOf:function(i){return this.startOf(i).add(i,1).subtract("ms",1)},isAfter:function(i,am){am=typeof am!=="undefined"?am:"millisecond";return +this.clone().startOf(am)>+K(i).startOf(am)},isBefore:function(i,am){am=typeof am!=="undefined"?am:"millisecond";return +this.clone().startOf(am)<+K(i).startOf(am)},isSame:function(i,am){am=typeof am!=="undefined"?am:"millisecond";return +this.clone().startOf(am)===+K(i).startOf(am)},min:function(i){i=K.apply(null,arguments);return i<this?this:i},max:function(i){i=K.apply(null,arguments);return i>this?this:i},zone:function(i){var am=this._offset||0;if(i!=null){if(typeof i==="string"){i=ag(i)}if(Math.abs(i)<16){i=i*60}this._offset=i;this._isUTC=true;if(am!==i){b(this,K.duration(am-i,"m"),1,true)}}else{return this._isUTC?am:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},daysInMonth:function(){return K.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(am){var i=ae((K(this).startOf("day")-K(this).startOf("year"))/86400000)+1;return am==null?i:this.add("d",(am-i))},weekYear:function(i){var am=al(this,this.lang()._week.dow,this.lang()._week.doy).year;return i==null?am:this.add("y",(i-am))},isoWeekYear:function(i){var am=al(this,1,4).year;return i==null?am:this.add("y",(i-am))},week:function(i){var am=this.lang().week(this);return i==null?am:this.add("d",(i-am)*7)},isoWeek:function(i){var am=al(this,1,4).week;return i==null?am:this.add("d",(i-am)*7)},weekday:function(i){var am=(this._d.getDay()+7-this.lang()._week.dow)%7;return i==null?am:this.add("d",i-am)},isoWeekday:function(i){return i==null?this.day()||7:this.day(this.day()%7?i:i-7)},lang:function(i){if(i===ah){return this._lang}else{this._lang=o(i);return this}}};function I(am,i){K.fn[am]=K.fn[am+"s"]=function(an){var ao=this._isUTC?"UTC":"";if(an!=null){this._d["set"+ao+i](an);K.updateOffset(this);return this}else{return this._d["get"+ao+i]()}}}for(r=0;r<ab.length;r++){I(ab[r].toLowerCase().replace(/s$/,""),ab[r])}I("year","FullYear");K.fn.days=K.fn.day;K.fn.months=K.fn.month;K.fn.weeks=K.fn.week;K.fn.isoWeeks=K.fn.isoWeek;K.fn.toJSON=K.fn.toISOString;K.duration.fn=h.prototype={_bubble:function(){var ao=this._milliseconds,am=this._days,aq=this._months,i=this._data,ar,ap,an,at;i.milliseconds=ao%1000;ar=a(ao/1000);i.seconds=ar%60;ap=a(ar/60);i.minutes=ap%60;an=a(ap/60);i.hours=an%24;am+=a(an/24);i.days=am%30;aq+=a(am/30);i.months=aq%12;at=a(aq/12);i.years=at},weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+~~(this._months/12)*31536000000},humanize:function(an){var i=+this,am=ac(i,!an,this.lang());if(an){am=this.lang().pastFuture(i,am)}return this.lang().postformat(am)},add:function(am,an){var i=K.duration(am,an);this._milliseconds+=i._milliseconds;this._days+=i._days;this._months+=i._months;this._bubble();return this},subtract:function(am,an){var i=K.duration(am,an);this._milliseconds-=i._milliseconds;this._days-=i._days;this._months-=i._months;this._bubble();return this},get:function(i){i=M(i);return this[i.toLowerCase()+"s"]()},as:function(i){i=M(i);return this["as"+i.charAt(0).toUpperCase()+i.slice(1)+"s"]()},lang:K.fn.lang};function G(i){K.duration.fn[i]=function(){return this._data[i]}}function F(am,i){K.duration.fn["as"+am]=function(){return +this/i}}for(r in aj){if(aj.hasOwnProperty(r)){F(r,aj[r]);G(r.toLowerCase())}}F("Weeks",604800000);K.duration.fn.asMonths=function(){return(+this-this.years()*31536000000)/2592000000+this.years()*12};K.lang("en",{ordinal:function(am){var i=am%10,an=(~~(am%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return am+an}});if(q){module.exports=K}if(typeof ender==="undefined"){this["moment"]=K}}).call(this);return moment}));(function(a){if(typeof define==="function"&&define.amd){define("moment-calendar",["moment"],a)}else{a(window.moment)}}(function(g){var c=function(j){var i=g([j]),h=i.day();if(h===0){h=7}if(h>4){i.add("weeks",1)}i.subtract("days",h-1);return i},f=["year","week","day","minute"],d=function(h,j){if(j){var i=this.isocalendar();i[h]=j;this._d=g.fromIsocalendar(i).toDate();return this}else{return this.isocalendar()[h]}},b=function(h){return function(i){return d.call(this,h,i)}};g.fn.isocalendar=function(){var l=this.year(),i=c(l),k=Math.floor(this.diff(i,"weeks",true))+1,h=this.day(),j=this.hours()*60+this.minutes();if(k==53&&c(l+1)<=this){l+=1;k=1}else{if(k<1){l-=1;k=g([l,11,31,0,0]).isocalendar()[1]}}if(h===0){h=7}return[l,k,h,j]};g.fromIsocalendar=function(h){var i=c(h[0]).add({weeks:h[1]-1,days:h[2]-1,minutes:h[3]});return i};for(var e=0,a=f.length;e<a;e++){g.fn["iso"+f[e]]=b(e)}}));(function(a){if(typeof define==="function"&&define.amd){define("bforms-rangepicker",["jquery","icanhaz"],a)}else{a(window.jQuery,window.ich)}}(function(a){var b=function(c,d){this.$element=c;this.options=a.extend(true,{},d);if(this.$element.hasClass("hasNumberRangepicker")){return}else{this.$element.addClass("hasNumberRangepicker");this._init()}};b.prototype._init=function(){this.r=window.ich;if(this.$element.is("input")){this.$input=this.$element;if(!this.options.isSingleNumberInline&&(this.options.readonlyInput||(a.browser!=null&&a.browser.mobile==true))){this.$input.prop("readonly",true)}}this._initOptions();this._initRenderModel();this._initRenderer();this._buildElement();this._hasInitialValue=this.$element.val()!="";this._initInitialValues(!this._hasInitialValue);this._addHandlers();this.$element.data("bsNumberRangepicker",this)};b.prototype._addHandlers=function(){if(!this.options.isSingleNumberInline&&(!this.isInline||this.options.inlineMobile)){if(this.options.closeOnBlur){a(document).on("mouseup",a.proxy(function(l){var i=a(l.target);if(i[0]!=this.$element[0]&&i.closest(".bs-number_range-picker").length===0){if((!i.hasClass("glyphicon")||i.parent()[0]!=this.$input.parent()[0])&&!i.hasClass(this.options.ignoreBlurClass)){var k=true;if(typeof this.options.toggleButtons!=="undefined"){for(var m in this.options.toggleButtons){var j=a(this.options.toggleButtons[m].selector);if(i.closest(j).length>0){k=false}}}if(k){this.hide()}}}},this))}if(this.options.openOnFocus){this.$element.on("focus",a.proxy(function(i){this.show()},this))}if(typeof this.$input!=="undefined"){this.$input.on("focusout",a.proxy(function(i){if(i.relatedTarget&&!(a(i.relatedTarget).hasClass("bs-rangeInput"))){this.hide()}},this))}if(typeof this.options.openOn!=="undefined"&&a.isArray(this.options.openOn)){for(var g in this.options.openOn){var d=this.options.openOn[g];this.unbindEvent(d.selector,d.event);a("body").on(d.event,d.selector,a.proxy(function(i){this.show()},this))}}if(typeof this.options.closeOn!=="undefined"&&a.isArray(this.options.closeOn)){for(var f in this.options.closeOn){var c=this.options.closeOn[f];this.unbindEvent(c.selector,c.event);a("body").on(c.event,c.selector,a.proxy(function(i){this.hide()},this))}}if(typeof this.options.toggleButtons!=="undefined"&&a.isArray(this.options.toggleButtons)){for(var h in this.options.toggleButtons){var e=this.options.toggleButtons[h];this.unbindEvent(e.selector,e.event);a("body").on(e.event,e.selector,a.proxy(function(i){if(this._visible){this.hide()}else{this.show()}},this))}}a(document).on("scroll",a.proxy(function(){if(this._visible){if(this.options.withScrollTimeout){window.clearTimeout(this._timeoutHandler);this._timeoutHandler=window.setTimeout(a.proxy(this._positionPicker,this),20)}else{this._positionPicker()}}},this));a(window).on("resize",a.proxy(function(){this._positionPicker()},this));this.$picker.on("click",".bs-closeBtn",a.proxy(function(i){this._stopEvent(i);this.hide()},this))}if(this.$element.is(":input")){this.$element.on("change",a.proxy(this._onTextValueChange,this))}this.$picker.on("mousedown touchstart",".bs-rangeUp",a.proxy(function(i){var j=a(i.currentTarget).data("index");this._rangeUpTimeout(j)},this));this.$picker.on("mouseup mouseleave touchend",".bs-rangeUp",a.proxy(function(i){window.clearTimeout(this._rangeUpHandler);this._rangeUpTimeoutSpeed=null},this));this.$picker.on("mousedown touchstart",".bs-rangeDown",a.proxy(function(i){var j=a(i.currentTarget).data("index");this._rangeDownTimeout(j)},this));this.$picker.on("mouseup mouseleave touchend",".bs-rangeDown",a.proxy(function(i){window.clearTimeout(this._rangeDownHandler);this._rangeDownTimeoutSpeed=null},this));this.$picker.on("change",".bs-rangeInput",a.proxy(this._onInputChange,this));this.$picker.on("keypress",".bs-rangeInput",a.proxy(this._onInputKeyPress,this))};b.prototype._initRenderer=function(){if(typeof this.r.rangePickerRanges!=="function"){this.r.addTemplate("rangePickerRanges",a.fn.bsRangePickerTemplates.rangesTemplate)}if(typeof this.r.renderNumberRangeInline!=="function"){this.r.addTemplate("renderNumberRangeInline",a.fn.bsRangePickerTemplates.rangesInlineTemplate)}if(typeof this.r.renderNumberRangePicker!=="function"){this.r.addTemplate("renderNumberRangePicker",a.fn.bsRangePickerTemplates.mainTemplate)}};b.prototype._initInitialValues=function(d){this._initialValues={};this._currentValues={};var c=false;this.$picker.find(".bs-rangeInput").each(a.proxy(function(f,g){var e=a(g),h=e.val();this._initialValues[f]=h;this._currentValues[f]=h;if(h!=""&&h!=null){c=true}},this));if(c){this._updateLabels(d)}};b.prototype._initOptions=function(){if(this.options.ranges.length==1){this._single=true}else{this._single=false}if(typeof this.options.minValue==="undefined"||this.options.minValue===""){this.options.minValue=-Infinity}if(typeof this.options.maxValue==="undefined"||this.options.maxValue===""){this.options.maxValue=Infinity}};b.prototype._initRenderModel=function(){a.each(this.options.ranges,function(e,d){d.index=e});this._renderModel={showClose:this.options.showClose,ranges:this.options.ranges,renderTitle:true,wrapperClass:typeof this.options.wrapperClass==="string"?(this.options.wrapperClass+" "+(this._single?"bs-single_range ":"")):(this._single?"bs-single_range ":"")};var c=a.grep(this._renderModel.ranges,function(d){return typeof d.title!=="undefined"&&d.title!=null&&d.title!=""});if(typeof c[0]==="undefined"){this._renderModel.renderTitle=false}};b.prototype._buildElement=function(){this.$picker=this._renderPicker(this._renderModel);if(this.isInline&&!this.options.isSingleNumberInline){this.$element.after(this.$picker.show());this.$element.hide()}else{if(this.options.isSingleNumberInline){this.$element.after(this.$picker);this.$picker=this.$picker.parent()}else{a("body").append(this.$picker);this._positionPicker()}}if(!this._visible&&!this.options.isSingleNumberInline){this.$picker.hide()}if(this.options.isSingleNumberInline&&this.$element.prop("readonly")){this.block()}else{this._blockRanges()}};b.prototype._renderPicker=function(){var c;if(this.options.isSingleNumberInline){c=this.r.renderNumberRangeInline(this._renderModel,true)}else{c=this.r.renderNumberRangePicker(this._renderModel,true)}return a(c)};b.prototype._positionPicker=function(){if(this.isInline||this.options.isSingleNumberInline){return}if(this.options.fixedPicker===true&&this.$picker.css("position")=="fixed"){return}var q=this.options.xOrient,r=this.options.yOrient,j=this.$picker.outerHeight(true),k=this.$picker.outerWidth(true),e=this.$element.offset(),i=-1,h=-1;if(r!="below"&&r!="above"){var o=a(window).innerHeight(),m=a(document).scrollTop(),d=this.$element.outerHeight(true);var n=-m+e.top-j,c=m+o-(e.top+d+j);if(Math.max(n,c)===c){r="below"}else{r="above"}}if(q!="right"&&q!="left"){var p=a(window).innerWidth(),f=this.$element.outerWidth(true);var l=e.left-(f>k?f-k:k-f),g=p-(e.left+k);if(l>0&&g>0){q="left"}else{if(Math.max(l,g)===l){q="right"}else{q="left"}}}if(r=="below"){i=e.top+this.$element.height()+this.options.heightPosition;this.$picker.removeClass("open-above");this.$picker.addClass("open-below")}else{if(r=="above"){i=e.top-this.$element.height()-j+16;this.$picker.removeClass("open-below");this.$picker.addClass("open-above")}}if(q!="right"&&q!="left"){q="left"}if(q=="left"){h=e.left;this.$picker.removeClass("open-right");this.$picker.addClass("open-left")}else{if(q=="right"){h=e.left+this.$element.outerWidth()-this.$picker.outerWidth();this.$picker.removeClass("open-left");this.$picker.addClass("open-right")}}if(this.options.fixedPicker===true){this.$picker.css("position","fixed")}if(i!==-1){this.$picker.css("top",i)}if(h!==-1){this.$picker.css("left",h)}};b.prototype._trigger=function(d,c,e){if(typeof this.options[d]==="function"){this.options[d].apply(this,c)}if(e!==true){this.$element.trigger(d,c)}};b.prototype._getLimits=function(e){var f={max:this.options.maxValue,min:this.options.minValue};var d=this._getInput(e-1);if(d.length){f.min=window.parseInt(d.val()||f.min,10)}var c=this._getInput(e+1);if(c.length){f.max=window.parseInt(c.val()||f.max,10)}return f};b.prototype._getInput=function(c){return this.$picker.find('.bs-rangeInput[data-index="'+c+'"]')};b.prototype._getUpArrow=function(c){return this.$picker.find('.bs-rangeUp[data-index="'+c+'"]')};b.prototype._getDownArrow=function(c){return this.$picker.find('.bs-rangeDown[data-index="'+c+'"]')};b.prototype._allowHold=function(){return !this.options.isSingleNumberInline?this._visible:true};b.prototype._blockRanges=function(){var c=this.$picker.find(".bs-rangeInput");c.each(a.proxy(function(g,i){var d=a(i),f=d.data("index"),e=d.val();var h=this._getLimits(f);if(e!=""&&h.min>=e){this._getDownArrow(f).addClass("disabled")}else{this._getDownArrow(f).removeClass("disabled")}if(e!=""&&h.max<=e){this._getUpArrow(f).addClass("disabled")}else{this._getUpArrow(f).removeClass("disabled")}},this))};b.prototype._updateLabels=function(e){var d="";this._trigger("beforeFormatLabel");var f=this._getInput(0).val();if(this._single){d=typeof this.options.format!=="undefined"?this.options.format.replace("{0}",f):f}else{var c=this._getInput(1).val();d=typeof this.options.format!=="undefined"?this.options.format.replace("{0}",f).replace("{1}",c):f+this.options.delimiter+c}if(e===true){d=""}var g={label:d};this._trigger("afterFormatLabel",[g]);this.$input.val(g.label);if(typeof this.$element.valid==="function"&&this.options.preventValidation!=true&&this.$element.hasClass("input-validation-error")){this.$input.valid()}this.$picker.find(".bs-rangeInput").each(a.proxy(function(j,k){var h=a(k),l=h.val(),i=h.data("index");this._updateListener(i,l)},this))};b.prototype._isValidValue=function(f,c){var d=this._getLimits(c),e=window.parseInt(f,10);if(!window.isNaN(e)&&e==f&&e>=d.min&&e<=d.max){return true}return false};b.prototype._updateListener=function(d,e){if(this.options.listeners&&this.options.listeners[d]){var c=this.options.listeners[d];if(c.is(":input")){c.val(e)}else{c.text(e)}}};b.prototype.upClick=function(d){var e=d;if(typeof d==="object"){e=a(d.currentTarget).data("index")}var f=this._getLimits(e),c=this._getInput(e),h=window.parseInt(c.val(),10),g;if(!window.isNaN(h)){g=h+1}else{g=f.max}if(g==Infinity||g==-Infinity){if(!window.isNaN(f.min)&&f.min>0){g=f.min}else{g=0}}if(g>=f.min&&g<=f.max){c.val(g).trigger("change")}};b.prototype._rangeUpTimeout=function(c){this.upClick(c);if(this._allowHold()){this._rangeUpTimeoutSpeed=this._rangeUpTimeoutSpeed||this.options.holdInterval;this._rangeUpHandler=window.setTimeout(a.proxy(function(){this._rangeUpTimeout(c)},this),this._rangeUpTimeoutSpeed);if(this._rangeUpTimeoutSpeed&&this._rangeUpTimeoutSpeed>this.options.holdMinInterval){this._rangeUpTimeoutSpeed-=this.options.holdDecreaseFactor}}else{window.clearTimeout(this._rangeUpHandler);this._rangeUpTimeoutSpeed=null}};b.prototype.downClick=function(d){var e=d;if(typeof d==="object"&&d!=null){e=a(d.currentTarget).data("index")}var f=this._getLimits(e),c=this._getInput(e),h=window.parseInt(c.val(),10),g;if(!window.isNaN(h)){g=h-1}else{g=f.min}if(g==Infinity||g==-Infinity){if(!window.isNaN(f.max)&&f.max<0){g=f.max}else{g=0}}if(g>=f.min&&g<=f.max){c.val(g).trigger("change")}};b.prototype._rangeDownTimeout=function(c){this.downClick(c);if(this._allowHold()){this._rangeDownTimeoutSpeed=this._rangeDownTimeoutSpeed||this.options.holdInterval;this._rangeDownHandler=window.setTimeout(a.proxy(function(){this._rangeDownTimeout(c)},this),this._rangeDownTimeoutSpeed);if(this._rangeDownTimeoutSpeed&&this._rangeDownTimeoutSpeed>this.options.holdMinInterval){this._rangeDownTimeoutSpeed-=this.options.holdDecreaseFactor}}else{window.clearTimeout(this._rangeDownHandler);this._rangeDownTimeoutSpeed=null}};b.prototype._onInputKeyPress=function(c){var d=(c.keyCode?c.keyCode:c.which);if(d=="13"){this._onInputChange(c)}};b.prototype._onInputChange=function(f){var c=a(f.currentTarget),d=c.val(),g=c.data("index");if(this._isValidValue(d,g)){this._currentValues[g]=d;this._blockRanges();this._updateLabels()}else{c.val(this._currentValues[g])}};b.prototype._onTextValueChange=function(c){var d=this.$element.val(),f=d.split(this.options.delimiter);if(d===""&&this.options.allowEmptyValue){a.each(this.options.ranges,a.proxy(function(e){this._getInput(e).val("");this._blockRanges();this._updateListener(e,null)},this))}else{if(d===""&&this._hasInitialValue==false){a.each(this.options.ranges,a.proxy(function(e){if(this.options.minValueOnClear){var g=this._getLimits(e);this._getInput(e).val(g.min);this._updateListener(e,g.min)}else{this._updateListener(e,d)}},this));if(this.options.minValueOnClear){this._updateLabels()}}else{if(f.length==this.options.ranges.length){a.each(f,a.proxy(function(e,h){var g=window.parseInt(h,10);if(this._isValidValue(g,e)){this._getInput(e).val(g)}else{this._updateLabels();return false}},this))}}this._updateLabels()}};b.prototype.show=function(){if(this._visible!==true){var c={preventShow:false};this._trigger("beforeShow",c);if(c.preventShow==false){this._positionPicker();if(typeof position!=="undefined"){this.updatePosition(position)}this.$picker.show();this._visible=true;this._trigger("afterShow",{rangepicker:this.$picker,element:this.$element})}}return this};b.prototype.hide=function(){if(this._visible!==false){var c={preventHide:false};this._trigger("beforeHide",c);if(c.preventHide==false){this.$picker.hide();this._visible=false;this._trigger("afterHide",{rangepicker:this.$picker,element:this.$element})}}return this};b.prototype.resetValue=function(){this._currentValues=a.extend(true,{},this._initialValues);a.each(this.options.ranges,a.proxy(function(c,e){var d=this._initialValues[c];this._getInput(c).val(d)},this));this._updateLabels(this._hasInitialValue!==true)};b.prototype.block=function(){this.$element.prop("readonly",true);var c=this.$picker.find(".bs-rangeInput");c.each(a.proxy(function(f,g){var d=a(g),e=d.data("index");this._getDownArrow(e).addClass("disabled");this._getUpArrow(e).addClass("disabled")},this))};b.prototype.unblock=function(){this.$element.prop("readonly",false);var c=this.$picker.find(".bs-rangeInput");c.each(a.proxy(function(f,g){var d=a(g),e=d.data("index");this._getDownArrow(e).removeClass("disabled");this._getUpArrow(e).removeClass("disabled")},this))};b.prototype.option=function(c,d){if(typeof d==="undefined"){return this.options[c]}else{this.options[c]=d;if(typeof this["option_"+c]==="function"){this["option_"+c].apply(this,[d])}}};a.fn.bsRangePickerTemplates={mainTemplate:'<div class="bs-number_range-picker {{wrapperClass}}">{{#showClose}}<a href="#" class="btn btn-close bs-closeBtn"></a>{{/showClose}}<div class="bs-ranges-wrapper">{{>rangePickerRanges}}</div></div>',rangesTemplate:'{{#renderTitle}}<ul>{{#ranges}}<li><div> {{title}} </span></li>{{/ranges}}</ul>{{/renderTitle}} <ul>{{#ranges}}<li><span class="btn btn-up bs-rangeUp" data-index="{{index}}" {{#start}}data-start="true"{{/start}} {{#end}}data-end="true"{{/end}} {{#single}}data-single="true"{{/single}}></span></li>{{/ranges}}</ul><ul>{{#ranges}}<li><input type="text" class="bs-rangeInput" value="{{value}}" {{#maxlength}}maxlength={{maxlength}}{{/maxlength}} data-index="{{index}}" {{#start}}data-start="true"{{/start}} {{#end}}data-end="true"{{/end}} {{#single}}data-single="true"{{/single}}></li>{{/ranges}}</ul><ul>{{#ranges}}<li><span class="btn btn-down bs-rangeDown" {{#start}}data-start="true"{{/start}} {{#end}}data-end="true"{{/end}} data-index="{{index}}" {{#single}}data-single="true"{{/single}}></span></li>{{/ranges}}</ul>',rangesInlineTemplate:'{{#ranges}}<a class="btn btn-primary input-group-addon bs-rangeUp" data-index="{{index}}" {{#start}}data-start="true"{{/start}} {{#end}}data-end="true"{{/end}} {{#single}}data-single="true"{{/single}}><span class="glyphicon glyphicon-plus"></span></a><input type="hidden" class="bs-rangeInput" value="{{value}}" {{#maxlength}}maxlength={{maxlength}}{{/maxlength}} data-index="{{index}}" {{#start}}data-start="true"{{/start}} {{#end}}data-end="true"{{/end}} {{#single}}data-single="true"{{/single}}><a class="btn btn-warning input-group-addon bs-rangeDown" data-index="{{index}}" {{#start}}data-start="true"{{/start}} {{#end}}data-end="true"{{/end}} {{#single}}data-single="true"{{/single}}><span class="glyphicon glyphicon-minus"></span></a>{{/ranges}}'};a.fn.bsRangePickerDefaults={closeOnBlur:true,openOnFocus:true,readonlyInput:false,heightPosition:20,holdInterval:150,holdDecreaseFactor:4,holdMinInterval:50,delimiter:" - ",minValueOnClear:false,allowEmptyValue:false};a.fn.bsRangePicker=function(){var c=Array.prototype.slice.call(arguments,0),f=c[0],e=c.splice(1);if(typeof f==="undefined"||typeof f==="object"){return new b(a(this),a.extend(true,{},a.fn.bsRangePickerDefaults,f))}else{if(typeof f==="string"){var d=(this).data("bsNumberRangepicker");if(typeof d==="undefined"){if(a.fn.bsRangePickerDefaults.throwExceptions===true){throw"Cannot call method "+f+" before initializing plugin"}}else{return d[f].apply(d,e)}}}};return b}));(function(a){if(typeof define==="function"&&define.amd){define("bforms-radiolist",["jquery"],a)}else{a(window.jQuery)}})(function(a){a.fn.extend({bsRadioButtonsList:function(){return a(this).each(function(){if(!a(this).hasClass("radioButtonsList-done")){return new b(a(this))}})}});a.fn.extend({bsRadioButtonsListUpdateSelf:function(d){return a(this).each(function(){if(a(this).hasClass("radioButtonsList-done")){return new c(a(this),d)}})}});a.fn.extend({bsResetRadioButtons:function(){var d=a(this);return a(this).each(function(){if(a(this).hasClass("radioButtonsList-done")){return new c(a(this),a(this).data("initialvalue"),true)}})}});var b=(function(){function d(g){function e(l){var m=a("<div tabindex='0' style='display: none;' id='"+l.attr("id")+"_checkBox' class='checkbox_replace'></div>");var k=a('<div class="btn-group-justified"></div>');m.append(k);if(l.hasClass("form-control")){m.addClass("form-control")}l.children().each(function(){var n=a(this).find("label").text();var o=a(this).find("input[type='radio']");k.append("<a data-value='"+o.val()+"' class='option'>"+n+"</a>")});i(l,m);return m}function i(k,l){k.children().each(function(){var m=a(this).find("input[type='radio']");var n=l.find("a[data-value='"+m.val()+"']");if(m.is(":checked")){n.addClass("selected")}else{n.removeClass("selected")}})}function h(n){var m=n.find("input[type='radio']:checked");var k=m.parent().next(":first");if(k.length==0){k=n.children(":first")}var l=k.find("input[type='radio']");n.bsRadioButtonsListUpdateSelf(l.val())}var j=e(g);g.after(j);g.hide();j.show();g.addClass("radioButtonsList-done");var f=g.data("options")||{};if(g.data("initialvalue")==undefined){g.data("initialvalue",g.find('input[type="radio"]:checked').val());g.data("value",g.find('input[type="radio"]:checked').val())}g.on("change",{self:g,wrapper:j},function(k){i(k.data.self,k.data.wrapper)});j.on("click","a.option",{self:g},function(l){l.preventDefault();var k=a(l.currentTarget);if(!k.hasClass("selected")||f.preventDeselect!==true){l.data.self.bsRadioButtonsListUpdateSelf(a(this).data("value"))}a(this).focus()});j.on("keypress",{self:g},function(k){if(k.keyCode==13||(k.keyCode==0||k.keyCode==32)){k.preventDefault();h(k.data.self)}});j.parents(":last").on("click","label[for='"+g.attr("id")+"']",{self:g,wrapper:j},function(k){h(k.data.self);k.data.wrapper.focus()})}return d})();var c=(function(){function d(f,g,e){f.find("input[type='radio']").each(function(){var h=a(this),j=h.prop("checked"),i=h.val()==g?true:false;if(i&&j&&e!==true){i=false}h.prop("checked",i);if(h.val()==g){f.data("value",g)}if(typeof h.valid==="function"){h.valid()}});f.trigger("change")}return d})()});(function(a){if(typeof define==="function"&&define.amd){define("bforms-checklist",["jquery"],a)}else{a(window.jQuery)}})(function(a){a.fn.extend({bsCheckBoxList:function(){return a(this).each(function(){if(!a(this).hasClass("checkBoxList-done")){return new b(a(this))}})}});a.fn.extend({bsCheckBoxListUpdateSelf:function(e){return a(this).each(function(){if(a(this).hasClass("checkBoxList-done")){return new d(a(this),e)}})}});a.fn.extend({bsResetCheckboxList:function(){var e=a(this);if(e.hasClass("checkBoxList-done")){return new d(e,e.data("initialvalue"))}}});a.fn.bsParseCheckList=function(){var e=a(this);if(e.hasClass("checkBoxList-done")){return new c(e)}};var b=(function(){function e(h){function f(l){var m=a("<div tabindex='0' style='display: none;' id='"+l.attr("id")+"_checkBox' class='checkbox_replace'></div>");var k=a('<div class="btn-group-justified"></div>');m.append(k);if(l.hasClass("form-control")){m.addClass("form-control")}l.children().each(function(){var n=a(this).find("label").text();var o=a(this).find("input[type='checkbox']");o.data("noparse",true);var p=o.data("value");k.append("<a data-value='"+p+"' class='option'>"+n+"</a>")});i(l,m);return m}function i(k,l){k.children().each(function(){var m=a(this).find("input[type='checkbox']"),n=m.data("value");var o=l.find("a[data-value='"+n+"']");if(m.is(":checked")){o.addClass("selected")}else{o.removeClass("selected")}})}var j=f(h);h.after(j);h.hide();j.show();h.addClass("checkBoxList-done");if(h.data("initialvalue")==undefined){var g=h.find('input[type="checkbox"]:checked').map(function(){return a(this).data("value")});h.data("initialvalue",g);h.data("value",g)}h.on("change",{self:h,wrapper:j},function(k){i(k.data.self,k.data.wrapper)});j.on("click","a.option",{self:h},function(k){k.preventDefault();k.data.self.bsCheckBoxListUpdateSelf(a(this).data("value"));a(this).focus()})}return e})();var d=(function(){function e(f,g){if(!a.isArray(g)){g=[g]}f.find("input[type='checkbox']").each(function(){var h=a(this),i=h.data("value");if(a.inArray(i,g)!=-1){var k=h.prop("checked"),j=k?false:true;h.prop("checked",j);if(typeof h.valid==="function"){h.valid()}}});f.data("value",g);f.trigger("change")}return e})();var c=(function(e){function f(j){var i=j.find('input[type="checkbox"]:first').prop("name"),h={};var g=j.find('input[type="checkbox"]:checked');g.each(function(m,l){var k=a(l);if(k.is(":checked")){h[i+"["+m+"]"]=k.data("value")}});return h}return f(e)})});(function(a){if(typeof define==="function"&&define.amd){define("bforms-navscroll",["jquery"],a)}else{a(window.jQuery)}}(function(a){var b=function(c,d){this.$element=c;if(this.$element.length){this.options=d;this.hash=null;this.breakOffset=null;this.$container=a(this.options.container);this.$sidebar=a(this.options.sidebar);this.$relativeElement=a(this.options.relativeElement);this.heightOffset=(this.$container.height()-this.$element.height()-(this.$element.outerHeight()-this.$element.height()))/2;this.menuItems=this.$element.find("a");this.topBreak=this.options.topBreak;this.bottomBreak=this.options.bottomBreak;this.init()}};b.prototype.init=function(){this.updateHash();this._setPosition(true);this.addHandlers()};b.prototype.updateHash=function(){this.hash=window.location.hash;if(this.hash!=""){this.updateNav(this.hash)}else{this._setHash()}};b.prototype.addHandlers=function(){a(window).on("hashchange",a.proxy(this.updateHash,this));a(window).on("scroll",a.proxy(this.onScroll,this));this.$element.on("click","a:first",a.proxy(this._firstAnchorClick,this))};b.prototype.onScroll=function(c){this._setHash();this._setPosition(true)};b.prototype._setHash=function(){var d=a(window).scrollTop()+a("header").height()+300;var g=this.menuItems.map(function(k,j){var h=a(j),i=a(h.attr("href"));if(i.length===1&&i.offset().top<d){return i}});if(g!=null){var f=g.length-1;var c=g[f];if(typeof c!=="undefined"){var e=c.prop("id");if(window.location.hash!="#"+e){c.prop("id",e+"_temp");window.location.hash="#"+e;c.prop("id",e)}}}};b.prototype._setPosition=function(c){var d=a(window).scrollTop();if(!this.$sidebar.hasClass("affix-bottom")){if(this.$sidebar.offset().top+this.$sidebar.outerHeight()-this.heightOffset>=this.bottomBreak){this.$sidebar.removeClass("affix-top");this.$sidebar.removeClass("affix");var e=this.bottomBreak-this.$sidebar.height()-this.$relativeElement.offset().top-this.heightOffset;this.$sidebar.css({top:e});this.$sidebar.addClass("affix-bottom");this.breakOffset=d}else{if(d>this.topBreak){this.$sidebar.removeClass("affix-top");this.$sidebar.addClass("affix");this.$sidebar.removeClass("affix-bottom");this.$sidebar.css({top:0})}else{this.$sidebar.removeClass("affix");this.$sidebar.removeClass("affix-bottom");this.$sidebar.addClass("affix-top");this.$sidebar.css({top:0})}}}else{if(this.breakOffset>d){this.breakOffset=null;if(d>this.topBreak){this.$sidebar.removeClass("affix-top");this.$sidebar.addClass("affix");this.$sidebar.removeClass("affix-bottom");this.$sidebar.css({top:0})}else{this.$sidebar.removeClass("affix");this.$sidebar.removeClass("affix-bottom");this.$sidebar.addClass("affix-top");this.$sidebar.css({top:0})}}}if(c){this._setPosition()}};b.prototype.updateNav=function(d){var c=this.$element.find("*[href="+d+"]").parentsUntil(this.$element,this.options.receiver);if(c.length){this.removePrevious()}c.addClass(this.options.activeClass)};b.prototype._firstAnchorClick=function(c){c.preventDefault();c.stopPropagation();a(window).scrollTop(0)};b.prototype.removePrevious=function(){this.$element.find("."+this.options.activeClass).removeClass(this.options.activeClass)};a.fn.bsNavScrollDefaults={container:".hidden-sm",sidebar:".bs-sidebar",sidebarTopClass:"affix-top",sidebarClass:"affix",sidebarBottomClass:"affix-bottom",activeClass:"active",receiver:"li"};a.fn.bsNavScroll=function(c){return new b(a(this),a.extend(true,{},c,a.fn.bsNavScrollDefaults))}}));(function(a){if(typeof define==="function"&&define.amd){define("select2",["jquery"],function(b){a(b);var c=requireConfig.locale=="ro"?"select2-ro":"";require([c])})}else{a(window.jQuery)}})((function(a){(function(N){if(typeof N.fn.each2=="undefined"){N.fn.extend({each2:function(O){var Q=N([0]),P=-1,R=this.length;while(++P<R&&(Q.context=Q[0]=this[P])&&O.call(Q[0],P,Q)!==false){}return this}})}})(jQuery);if(window.Select2!==undefined){return}var u,k,c,G,D,E,H,x={x:0,y:0},b,F,u={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(N){N=N.which?N.which:N;switch(N){case u.LEFT:case u.RIGHT:case u.UP:case u.DOWN:return true}return false},isControl:function(N){var O=N.which;switch(O){case u.SHIFT:case u.CTRL:case u.ALT:return true}if(N.metaKey){return true}return false},isFunctionKey:function(N){N=N.which?N.which:N;return N>=112&&N<=123}},A="<div class='select2-measure-scrollbar'></div>";k={"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z",};b=a(document);E=(function(){var N=1;return function(){return N++}}());function J(R){var Q,O,P,N;if(!R||R.length<1){return R}Q="";for(O=0,P=R.length;O<P;O++){N=R.charAt(O);Q+=k[N]||N}return Q}function q(Q,N){var O=0,P=N.length;for(;O<P;O=O+1){if(l(Q,N[O])){return O}}return -1}function B(){var N=a(A);N.appendTo("body");var O={width:N.width()-N[0].clientWidth,height:N.height()-N[0].clientHeight};N.remove();return O}function l(N,O){if(N===O){return true}if(N===undefined||O===undefined){return false}if(N===null||O===null){return false}if(N.constructor===String){return N+""===O+""}if(O.constructor===String){return O+""===N+""}return false}function I(Q,P){var R,N,O;if(Q===null||Q.length<1){return[]}R=Q.split(P);for(N=0,O=R.length;N<O;N=N+1){R[N]=a.trim(R[N])}return R}function p(N){return N.outerWidth(false)-N.width()}function t(N){var O="keyup-change-value";N.on("keydown",function(){if(a.data(N,O)===undefined){a.data(N,O,N.val())}});N.on("keyup",function(){var P=a.data(N,O);if(P!==undefined&&N.val()!==P){a.removeData(N,O);N.trigger("keyup-change")}})}b.on("mousemove",function(N){x.x=N.pageX;x.y=N.pageY});function s(N){N.on("mousemove",function(O){var P=x;if(P===undefined||P.x!==O.pageX||P.y!==O.pageY){a(O.target).trigger("mousemove-filtered",O)}})}function h(P,O,N){N=N||undefined;var Q;return function(){var R=arguments;window.clearTimeout(Q);Q=window.setTimeout(function(){O.apply(N,R)},P)}}function M(O){var N=false,P;return function(){if(N===false){P=O();N=true}return P}}function r(P,N){var O=h(P,function(Q){N.trigger("scroll-debounced",Q)});N.on("scroll",function(Q){if(q(Q.target,N.get())>=0){O(Q)}})}function n(N){if(N[0]===document.activeElement){return}window.setTimeout(function(){var O=N[0],P=N.val().length,Q;N.focus();if(N.is(":visible")&&O===document.activeElement){if(O.setSelectionRange){O.setSelectionRange(P,P)}else{if(O.createTextRange){Q=O.createTextRange();Q.collapse(false);Q.select()}}}},0)}function o(N){N=a(N)[0];var P=0;var O=0;if("selectionStart" in N){P=N.selectionStart;O=N.selectionEnd-P}else{if("selection" in document){N.focus();var Q=document.selection.createRange();O=document.selection.createRange().text.length;Q.moveStart("character",-N.value.length);P=Q.text.length-O}}return{offset:P,length:O}}function v(N){N.preventDefault();N.stopPropagation()}function w(N){N.preventDefault();N.stopImmediatePropagation()}function C(N){if(!H){var O=N[0].currentStyle||window.getComputedStyle(N[0],null);H=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:O.fontSize,fontFamily:O.fontFamily,fontStyle:O.fontStyle,fontWeight:O.fontWeight,letterSpacing:O.letterSpacing,textTransform:O.textTransform,whiteSpace:"nowrap"});H.attr("class","select2-sizer");a("body").append(H)}H.text(N.val());return H.width()}function K(Q,S,O){var P,R=[],N;P=Q.attr("class");if(P){P=""+P;a(P.split(" ")).each2(function(){if(this.indexOf("select2-")===0){R.push(this)}})}P=S.attr("class");if(P){P=""+P;a(P.split(" ")).each2(function(){if(this.indexOf("select2-")!==0){N=O(this);if(N){R.push(this)}}})}Q.attr("class",R.join(" "))}function z(R,Q,O,N){var P=R.toUpperCase().indexOf(Q.toUpperCase()),S=Q.length;if(P<0){O.push(N(R));return}O.push(N(R.substring(0,P)));O.push("<span class='select2-match'>");O.push(N(R.substring(P,P+S)));O.push("</span>");O.push(N(R.substring(P+S,R.length)))}function i(N){var O={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(N).replace(/[&<>"'\/\\]/g,function(P){return O[P]})}function d(P){var T,R=0,O=null,Q=P.quietMillis||100,N=P.url,S=this;return function(U){window.clearTimeout(T);T=window.setTimeout(function(){R+=1;var Y=R,V=P.data,aa=N,Z=P.transport||a.fn.select2.ajaxDefaults.transport,W={type:P.type||"GET",cache:P.cache||false,jsonpCallback:P.jsonpCallback||undefined,dataType:P.dataType||"json"},X=a.extend({},a.fn.select2.ajaxDefaults.params,W);V=V?V.call(S,U.term,U.page,U.context):null;aa=(typeof aa==="function")?aa.call(S,U.term,U.page,U.context):aa;if(O){O.abort()}if(P.params){if(a.isFunction(P.params)){a.extend(X,P.params.call(S))}else{a.extend(X,P.params)}}a.extend(X,{url:aa,dataType:P.dataType,data:V,success:function(ab){if(Y<R){return}var ac=P.results(ab,U.page);U.callback(ac)}});O=Z.call(S,X)},Q)}}function y(Q){var N=Q,P,S,R=function(T){return""+T.text};if(a.isArray(N)){S=N;N={results:S}}if(a.isFunction(N)===false){S=N;N=function(){return S}}var O=N();if(O.text){R=O.text;if(!a.isFunction(R)){P=O.text;R=function(T){return T[P]}}}return function(V){var W=V.term,T={results:[]},U;if(W===""){V.callback(N());return}U=function(Z,Y){var aa,X;Z=Z[0];if(Z.children){aa={};for(X in Z){if(Z.hasOwnProperty(X)){aa[X]=Z[X]}}aa.children=[];a(Z.children).each2(function(ac,ab){U(ab,aa.children)});if(aa.children.length||V.matcher(W,R(aa),Z)){Y.push(aa)}}else{if(V.matcher(W,R(Z),Z)){Y.push(Z)}}};a(N().results).each2(function(Y,X){U(X,T.results)});V.callback(T)}}function L(N){var O=a.isFunction(N);return function(Q){var R=Q.term,P={results:[]};a(O?N():N).each(function(){var S=this.text!==undefined,T=S?this.text:this;if(R===""||Q.matcher(R,T)){P.results.push(S?this:{id:this,text:this})}});Q.callback(P)}}function e(N,O){if(a.isFunction(N)){return true}if(!N){return false}throw new Error(O+" must be a function or a falsy value")}function m(N){return a.isFunction(N)?N():N}function g(O){var N=0;a.each(O,function(P,Q){if(Q.children){N+=g(Q.children)}else{N++}});return N}function j(Q,V,U,S){var T=Q,N=false,X,P,O,R,W;if(!S.createSearchChoice||!S.tokenSeparators||S.tokenSeparators.length<1){return undefined}while(true){P=-1;for(O=0,R=S.tokenSeparators.length;O<R;O++){W=S.tokenSeparators[O];P=Q.indexOf(W);if(P>=0){break}}if(P<0){break}X=Q.substring(0,P);Q=Q.substring(P+W.length);if(X.length>0){X=S.createSearchChoice(X,V);if(X!==undefined&&X!==null&&S.id(X)!==undefined&&S.id(X)!==null){N=false;for(O=0,R=V.length;O<R;O++){if(l(S.id(X),S.id(V[O]))){N=true;break}}if(!N){U(X)}}}}if(T!==Q){return Q}}function f(P,O){var N=function(){};N.prototype=new P;N.prototype.constructor=N;N.prototype.parent=P.prototype;N.prototype=a.extend(N.prototype,O);return N}c=f(Object,{bind:function(N){var O=this;return function(){N.apply(O,arguments)}},init:function(O){var Q,S,R=".select2-results",N,P;this.opts=O=this.prepareOpts(O);this.id=O.id;if(O.element.data("select2")!==undefined&&O.element.data("select2")!==null){this.destroy()}this.container=this.createContainer();this.containerId="s2id_"+(O.element.attr("id")||"autogen"+E());this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.body=M(function(){return O.element.closest("body")});K(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.css(m(O.containerCss));this.container.addClass(m(O.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.addClass(m(O.dropdownCssClass));this.dropdown.data("select2",this);this.results=Q=this.container.find(R);this.search=S=this.container.find("input.select2-input");this.resultsPage=0;this.context=null;this.initContainer();s(this.results);this.dropdown.on("mousemove-filtered touchstart touchmove touchend",R,this.bind(this.highlightUnderEvent));r(80,this.results);this.dropdown.on("scroll-debounced",R,this.bind(this.loadMoreIfNeeded));a(this.container).on("change",".select2-input",function(T){T.stopPropagation()});a(this.dropdown).on("change",".select2-input",function(T){T.stopPropagation()});if(a.fn.mousewheel){Q.mousewheel(function(W,T,U,V){var Y=Q.scrollTop(),X;if(V>0&&Y-V<=0){Q.scrollTop(0);v(W)}else{if(V<0&&Q.get(0).scrollHeight-Q.scrollTop()+V<=Q.height()){Q.scrollTop(Q.get(0).scrollHeight-Q.height());v(W)}}})}t(S);S.on("keyup-change input paste",this.bind(this.updateResults));S.on("focus",function(){S.addClass("select2-focused")});S.on("blur",function(){S.removeClass("select2-focused")});Q.on("click",".js-saveOption",this.bind(this.saveOption));this.dropdown.on("mouseup",R,this.bind(function(T){if(a(T.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(T);this.selectHighlighted(T)}}));this.dropdown.on("click mouseup mousedown",function(T){T.stopPropagation()});if(a.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(O.maximumInputLength!==null){this.search.attr("maxlength",O.maximumInputLength)}var N=O.element.prop("disabled");if(N===undefined){N=false}this.enable(!N);var P=O.element.prop("readonly");if(P===undefined){P=false}this.readonly(P);F=F||B();this.autofocus=O.element.prop("autofocus");O.element.prop("autofocus",false);if(this.autofocus){this.focus()}},destroy:function(){var N=this.opts.element.data("select2");if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}if(N!==undefined){N.container.remove();N.dropdown.remove();N.opts.element.removeClass("select2-offscreen").removeData("select2").off(".select2").attr({tabindex:this.elementTabIndex}).prop("autofocus",this.autofocus||false).show()}},optionToData:function(N){if(N.is("option")){return{id:N.prop("value"),text:N.text(),element:N.get(),css:N.attr("class"),disabled:N.prop("disabled"),locked:l(N.attr("locked"),"locked")}}else{if(N.is("optgroup")){return{text:N.attr("label"),children:[],element:N.get(),css:N.attr("class")}}}},prepareOpts:function(Q){var O,R,P,N,S=this;O=Q.element;if(O.get(0).tagName.toLowerCase()==="select"){this.select=R=Q.element}if(R){a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in Q){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}Q=a.extend({},{populateResults:function(U,aa,Y){var X,V,Z,T,W=this.opts.id;X=function(am,ac,ad){var ag,ai,al,an,ae,ab,ak,aj,ah,af;am=Q.sortResults(am,ac,Y);for(ag=0,ai=am.length;ag<ai;ag=ag+1){al=am[ag];ae=(al.disabled===true);an=(!ae)&&(W(al)!==undefined);ab=al.children&&al.children.length>0;ak=a("<li></li>");ak.addClass("select2-results-dept-"+ad);ak.addClass("select2-result");ak.addClass(an?"select2-result-selectable":"select2-result-unselectable");if(ae){ak.addClass("select2-disabled")}if(ab){ak.addClass("select2-result-with-children")}ak.addClass(S.opts.formatResultCssClass(al));aj=a(document.createElement("div"));aj.addClass("select2-result-label");af=Q.formatResult(al,aj,Y,S.opts.escapeMarkup);if(af!==undefined){aj.html(af)}ak.append(aj);if(ab){ah=a("<ul></ul>");ah.addClass("select2-result-sub");X(al.children,ah,ad+1);ak.append(ah)}ak.data("select2-data",al);ac.append(ak)}};X(aa,U,0)}},a.fn.select2.defaults,Q);if(typeof(Q.id)!=="function"){P=Q.id;Q.id=function(T){return T[P]}}if(a.isArray(Q.element.data("select2Tags"))){if("tags" in Q){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+Q.element.attr("id")}Q.tags=Q.element.data("select2Tags")}if(R){Q.query=this.bind(function(X){var U={results:[],more:false},Y=X.term,T,V,W;W=function(aa,Z){var ab;if(aa.is("option")){if(X.matcher(Y,aa.text(),aa)){Z.push(S.optionToData(aa))}}else{if(aa.is("optgroup")){ab=S.optionToData(aa);aa.children().each2(function(ad,ac){W(ac,ab.children)});if(ab.children.length>0){Z.push(ab)}}}};T=O.children();if(this.getPlaceholder()!==undefined&&T.length>0){V=this.getPlaceholderOption();if(V){T=T.not(V)}}T.each2(function(aa,Z){W(Z,U.results)});X.callback(U)});Q.id=function(T){return T.id};Q.formatResultCssClass=function(T){return T.css}}else{if(!("query" in Q)){if("ajax" in Q){N=Q.element.data("ajax-url");if(N&&N.length>0){Q.ajax.url=N}Q.query=d.call(Q.element,Q.ajax)}else{if("data" in Q){Q.query=y(Q.data)}else{if("tags" in Q){Q.query=L(Q.tags);if(Q.createSearchChoice===undefined){Q.createSearchChoice=function(T){return{id:T,text:T}}}if(Q.initSelection===undefined){Q.initSelection=function(V,T){var U=[];a(I(V.val(),Q.separator)).each(function(){var W=this,Y=this,X=Q.tags;if(a.isFunction(X)){X=X()}a(X).each(function(){if(l(this.id,W)){Y=this.text;return false}});U.push({id:W,text:Y})});T(U)}}}}}}}if(typeof(Q.query)!=="function"){throw"query function not defined for Select2 "+Q.element.attr("id")}Q=a.extend(true,{},Q,this.copyOptions(O));return Q},copyOptions:function(N,O){var R=a(N).data(),S={};if(typeof O!=="undefined"){for(var Q in R){if(R.hasOwnProperty(Q)){var P=Q.replace(O,"");S[P]=R[Q]}}}else{S=R}return S},saveOption:function(P){var N=a(P.currentTarget),R=N.data("value"),Q=this;var O={};O[this.opts.propName]=R;if(this.opts.additionalData){if(typeof this.opts.additionalDataValue==="undefined"||this.opts.additionalDataValue.length==0){this.select.trigger("additionalDataValue",O)}else{O[this.opts.additionalData]=this.opts.additionalDataValue}}Q.close();Q.disable();a.ajax({url:this.opts.saveNewUrl,data:JSON.stringify(O),type:"POST",dataType:"json",contentType:"application/json; charset=utf-8"}).then(function(W){var U;U=W.Id||W.Data.Id;if(U){var T=a('<option value="'+U+'">'+R+"</option>"),S=Q.select.find("option:last");if(S.length){Q.select.find("option:last").after(T)}else{Q.select.append(T)}var V=Q.select.select2("val");if(typeof V!=="undefined"&&a.isArray(V)){V.push(U)}else{V=U}Q.select.select2("val",V)}Q.enable();if(typeof Q.select.valid!=="undefined"){Q.select.valid()}})},monitorSource:function(){var N=this.opts.element,O;N.on("change.select2",this.bind(function(P){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));O=this.bind(function(){var Q,R,S=this;var P=N.prop("disabled");if(P===undefined){P=false}this.enable(!P);var R=N.prop("readonly");if(R===undefined){R=false}this.readonly(R);K(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(m(this.opts.containerCssClass));K(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(m(this.opts.dropdownCssClass))});N.on("propertychange.select2 DOMAttrModified.select2",O);if(this.mutationCallback===undefined){this.mutationCallback=function(P){P.forEach(O)}}if(typeof WebKitMutationObserver!=="undefined"){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new WebKitMutationObserver(this.mutationCallback);this.propertyObserver.observe(N.get(0),{attributes:true,subtree:false})}},triggerSelect:function(N){var O=a.Event("select2-selecting",{val:this.id(N),object:N});this.opts.element.trigger(O);return !O.isDefaultPrevented()},triggerChange:function(N){N=N||{};N=a.extend({},N,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(N);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange){this.opts.element.blur()}},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var O=this._enabled&&!this._readonly,N=!O;if(O===this.enabledInterface){return false}this.container.toggleClass("select2-container-disabled",N);this.close();this.enabledInterface=O;return true},enable:function(N){if(N===undefined){N=true}if(this._enabled===N){return false}this._enabled=N;this.opts.element.prop("disabled",!N);this.enableInterface();return true},disable:function(){this.enable(false)},updateOptions:function(N,O){this.select.html(N);this.select.trigger("change");if(typeof O!=="undefined"){this.val(O)}},readonly:function(N){if(N===undefined){N=false}if(this._readonly===N){return false}this._readonly=N;this.opts.element.prop("readonly",N);this.enableInterface();return true},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var N=this.dropdown,aa=this.container.offset(),Z=this.container.outerHeight(false),ae=this.container.outerWidth(false),S=N.outerHeight(false),ad=a(window).scrollLeft()+a(window).width(),ac=a(window).scrollTop()+a(window).height(),U=aa.top+Z,T=aa.left,X=U+S<=ac,W=(aa.top-S)>=this.body().scrollTop(),V=N.outerWidth(false),Y=T+V<=ad,P=N.hasClass("select2-drop-above"),Q,O,R,ab;if(this.opts.dropdownAutoWidth){ab=a(".select2-results",N)[0];N.addClass("select2-drop-auto-width");N.css("width","");V=N.outerWidth(false)+(ab.scrollHeight===ab.clientHeight?0:F.width);V>ae?ae=V:V=ae;Y=T+V<=ad}else{this.container.removeClass("select2-drop-auto-width")}if(this.body().css("position")!=="static"){Q=this.body().offset();U-=Q.top;T-=Q.left}if(P){O=true;if(!W&&X){O=false}}else{O=false;if(!X&&W){O=true}}if(!Y){T=aa.left+ae-V}if(O){U=aa.top-S;this.container.addClass("select2-drop-above");N.addClass("select2-drop-above")}else{this.container.removeClass("select2-drop-above");N.removeClass("select2-drop-above")}R=a.extend({top:U,left:T,width:ae},m(this.opts.dropdownCss));N.css(R)},shouldOpen:function(){var N;if(this.opened()){return false}if(this._enabled===false||this._readonly===true){return false}N=a.Event("select2-opening");this.opts.element.trigger(N);return !N.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return false}this.opening();return true},opening:function(){var O=this.containerId,T="scroll."+O,S="resize."+O,R="orientationchange."+O,P,Q;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body())}P=a("#select2-drop-mask");if(P.length==0){P=a(document.createElement("div"));P.attr("id","select2-drop-mask").attr("class","select2-drop-mask");P.hide();P.appendTo(this.body());P.on("mousedown touchstart click",function(W){var V=a("#select2-drop"),X;if(V.length>0){X=V.data("select2");if(X.opts.selectOnBlur){X.selectHighlighted({noFocus:true})}X.close();W.preventDefault();W.stopPropagation()}})}if(this.dropdown.prev()[0]!==P[0]){this.dropdown.before(P)}a("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");Q=N();P.css(Q).show();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var U=this;this.container.parents().add(window).each(function(){a(this).on(S+" "+T+" "+R,function(V){var W=N();a("#select2-drop-mask").css(W);U.positionDropdown()})});function N(){return{width:Math.max(document.documentElement.scrollWidth,a(window).width()),height:Math.max(document.documentElement.scrollHeight,a(window).height())}}},close:function(){if(!this.opened()){return}var N=this.containerId,Q="scroll."+N,P="resize."+N,O="orientationchange."+N;this.container.parents().add(window).each(function(){a(this).off(Q).off(P).off(O)});this.clearDropdownAlignmentPreference();a("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(a.Event("select2-close"))},externalSearch:function(N){this.open();this.search.val(N);this.updateResults(false)},clearSearch:function(){},getMaximumSelectionSize:function(){return m(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var T=this.results,O,Q,N,P,S,U,R;Q=this.highlight();if(Q<0){return}if(Q==0){T.scrollTop(0);return}O=this.findHighlightableChoices().find(".select2-result-label");N=a(O[Q]);P=N.offset().top+N.outerHeight(true);if(Q===O.length-1){R=T.find("li.select2-more-results");if(R.length>0){P=R.offset().top+R.outerHeight(true)}}S=T.offset().top+T.outerHeight(true);if(P>S){T.scrollTop(T.scrollTop()+(P-S))}U=N.offset().top-T.offset().top;if(U<0&&N.css("display")!="none"){T.scrollTop(T.scrollTop()+U)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(P){var O=this.findHighlightableChoices(),Q=this.highlight();while(Q>-1&&Q<O.length){Q+=P;var N=a(O[Q]);if(N.hasClass("select2-result-selectable")&&!N.hasClass("select2-disabled")&&!N.hasClass("select2-selected")){this.highlight(Q);break}}},highlight:function(Q){var O=this.findHighlightableChoices(),N,P;if(arguments.length===0){return q(O.filter(".select2-highlighted")[0],O.get())}if(Q>=O.length){Q=O.length-1}if(Q<0){Q=0}this.results.find(".select2-highlighted").removeClass("select2-highlighted");N=a(O[Q]);N.addClass("select2-highlighted");this.ensureHighlightVisible();P=N.data("select2-data");if(P){this.opts.element.trigger({type:"select2-highlight",val:this.id(P),choice:P})}},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(P){var O=a(P.target).closest(".select2-result-selectable");if(O.length>0&&!O.is(".select2-highlighted")){var N=this.findHighlightableChoices();this.highlight(N.index(O))}else{if(O.length==0){this.results.find(".select2-highlighted").removeClass("select2-highlighted")}}},loadMoreIfNeeded:function(){var S=this.results,P=S.find("li.select2-more-results"),N,Q=-1,R=this.resultsPage+1,T=this,U=this.search.val(),O=this.context;if(P.length===0){return}N=P.offset().top-S.offset().top-S.height();if(N<=this.opts.loadMorePadding){P.addClass("select2-active");this.opts.query({element:this.opts.element,term:U,page:R,context:O,matcher:this.opts.matcher,callback:this.bind(function(V){if(!T.opened()){return}T.opts.populateResults.call(this,S,V.results,{term:U,page:R,context:O});T.postprocessResults(V,false,false);if(V.more===true){P.detach().appendTo(S).text(T.opts.formatLoadMore(R+1));window.setTimeout(function(){T.loadMoreIfNeeded()},10)}else{P.remove()}T.positionDropdown();T.resultsPage=R;T.context=V.context})})}},tokenize:function(){},updateResults:function(O){var W=this.search,V=this.results,S=this.opts,N,X=this,P,Y=W.val(),Q=a.data(this.container,"select2-last-term");if(O!==true&&Q&&l(Y,Q)){return}a.data(this.container,"select2-last-term",Y);if(O!==true&&(this.showSearchInput===false||!this.opened())){return}function T(){W.removeClass("select2-active");X.positionDropdown()}function U(Z){V.html(Z);T()}var R=this.getMaximumSelectionSize();if(R>=1){N=this.data();if(a.isArray(N)&&N.length>=R&&e(S.formatSelectionTooBig,"formatSelectionTooBig")){U("<li class='select2-selection-limit'>"+S.formatSelectionTooBig(R)+"</li>");return}}if(W.val().length<S.minimumInputLength){if(e(S.formatInputTooShort,"formatInputTooShort")){U("<li class='select2-no-results'>"+S.formatInputTooShort(W.val(),S.minimumInputLength)+"</li>")}else{U("")}if(O&&this.showSearch){this.showSearch(true)}return}if(S.maximumInputLength&&W.val().length>S.maximumInputLength){if(e(S.formatInputTooLong,"formatInputTooLong")){U("<li class='select2-no-results'>"+S.formatInputTooLong(W.val(),S.maximumInputLength)+"</li>")}else{U("")}return}if(S.formatSearching&&this.findHighlightableChoices().length===0){U("<li class='select2-searching'>"+S.formatSearching()+"</li>")}W.addClass("select2-active");P=this.tokenize();if(P!=undefined&&P!=null){W.val(P)}this.resultsPage=1;S.query({element:S.element,term:W.val(),page:this.resultsPage,context:null,matcher:S.matcher,callback:this.bind(function(Z){var aa;if(!this.opened()){this.search.removeClass("select2-active");return}this.context=(Z.context===undefined)?null:Z.context;if(this.opts.createSearchChoice&&W.val()!==""){aa=this.opts.createSearchChoice.call(null,W.val(),Z.results);if(aa!==undefined&&aa!==null&&X.id(aa)!==undefined&&X.id(aa)!==null){if(a(Z.results).filter(function(){return l(X.id(this),X.id(aa))}).length===0){Z.results.unshift(aa)}}}if(Z.results.length===0&&e(S.formatNoMatches,"formatNoMatches")){if(S.allowsave==true&&W.val()!=""){U('<li class="select2-save js-saveOption" data-value="'+W.val()+'"><a class="btn btn-white">'+a.fn.select2.defaults.formatSaveItem("")+"</a>"+W.val()+"</li>")}else{U("<li class='select2-no-results'>"+a.fn.select2.defaults.formatNoMatches(W.val())+"</li>")}return}V.empty();X.opts.populateResults.call(this,V,Z.results,{term:W.val(),page:this.resultsPage,context:null});if(Z.more===true&&e(S.formatLoadMore,"formatLoadMore")){V.append("<li class='select2-more-results'>"+X.opts.escapeMarkup(S.formatLoadMore(this.resultsPage))+"</li>");window.setTimeout(function(){X.loadMoreIfNeeded()},10)}this.postprocessResults(Z,O);T();this.opts.element.trigger({type:"select2-loaded",data:Z})})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur){this.selectHighlighted({noFocus:true})}this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){n(this.search)},selectHighlighted:function(R){var Q=this.highlight(),P=this.results.find(".select2-highlighted"),O=P.closest(".select2-result").data("select2-data"),N=this.results.find(".js-saveOption");if(N.length==1&&P.length==0){N.trigger("click");return}if(O){this.highlight(Q);this.onSelect(O,R)}else{if(R&&R.noFocus){this.close()}}},getPlaceholder:function(){var N;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((N=this.getPlaceholderOption())!==undefined?N.text():undefined)},getPlaceholderOption:function(){if(this.select){var N=this.select.children().first();if(this.opts.placeholderOption!==undefined){return(this.opts.placeholderOption==="first"&&N)||(typeof this.opts.placeholderOption==="function"&&this.opts.placeholderOption(this.select))}else{if(N.val()===""){return N.clone()}}}},initContainerWidth:function(){function N(){var T,P,S,Q,R;if(this.opts.width==="off"){return null}else{if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){T=this.opts.element.attr("style");if(T!==undefined){P=T.split(";");for(Q=0,R=P.length;Q<R;Q=Q+1){S=P[Q].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(S!==null&&S.length>=1){return S[1]}}}if(this.opts.width==="resolve"){T=this.opts.element.css("width");if(T.indexOf("%")>0){return T}return(this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px")}return null}else{if(a.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}}}}var O=N.call(this);if(O!==null){this.container.css("width",O)}}});G=f(c,{createContainer:function(){var N=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <div><b></b></div>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return N},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled())}},opening:function(){var N,P,O;if(this.opts.minimumResultsForSearch>=0){this.showSearch(true)}this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val())}this.search.focus();N=this.search.get(0);if(N.createTextRange){P=N.createTextRange();P.collapse(false);P.select()}else{if(N.setSelectionRange){O=this.search.val().length;N.setSelectionRange(O,O)}}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(a.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},focus:function(){if(this.opened()){this.close()}else{this.focusser.removeAttr("disabled");this.focusser.focus()}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},initContainer:function(){var P,N=this.container,O=this.dropdown;if(this.opts.minimumResultsForSearch<0){this.showSearch(false)}else{this.showSearch(true)}this.selection=P=N.find(".select2-choice");this.focusser=N.find(".select2-focusser");this.focusser.attr("id","s2id_autogen"+E());a("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(Q){if(!this.isInterfaceEnabled()){return}if(Q.which===u.PAGE_UP||Q.which===u.PAGE_DOWN){v(Q);return}switch(Q.which){case u.UP:case u.DOWN:this.moveHighlight((Q.which===u.UP)?-1:1);v(Q);return;case u.ENTER:this.selectHighlighted();v(Q);return;case u.TAB:this.selectHighlighted({noFocus:true});return;case u.ESC:this.cancel(Q);v(Q);return}}));this.search.on("blur",this.bind(function(Q){if(document.activeElement===this.body().get(0)){window.setTimeout(this.bind(function(){this.search.focus()}),0)}}));this.focusser.on("keydown",this.bind(function(Q){if(!this.isInterfaceEnabled()){return}if(Q.which===u.TAB||u.isControl(Q)||u.isFunctionKey(Q)||Q.which===u.ESC){return}if(this.opts.openOnEnter===false&&Q.which===u.ENTER){v(Q);return}if(Q.which==u.DOWN||Q.which==u.UP||(Q.which==u.ENTER&&this.opts.openOnEnter)){this.open();v(Q);return}if(Q.which==u.DELETE||Q.which==u.BACKSPACE){if(this.opts.allowClear){this.clear()}v(Q);return}}));t(this.focusser);this.focusser.on("keyup-change input",this.bind(function(Q){if(this.opts.minimumResultsForSearch>=0){Q.stopPropagation();if(this.opened()){return}this.open()}}));P.on("mousedown","abbr",this.bind(function(Q){if(!this.isInterfaceEnabled()){return}this.clear();w(Q);this.close();this.selection.focus()}));P.on("mousedown",this.bind(function(Q){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}if(this.opened()){this.close()}else{if(this.isInterfaceEnabled()){this.open()}}v(Q)}));O.on("mousedown",this.bind(function(){this.search.focus()}));P.on("focus",this.bind(function(Q){v(Q)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(a.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");if(this.opts.startData!=null){this.updateSelection(this.opts.startData)}else{this.setPlaceholder()}},clear:function(P){var N=this.selection.data("select2-data");if(N){var O=this.getPlaceholderOption();this.opts.element.val(O?O.val():"");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(P!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(N),choice:N});this.triggerChange({removed:N})}}},initSelection:function(){var N;if(this.isPlaceholderOptionSelected()){this.updateSelection([]);this.close();this.setPlaceholder()}else{var O=this;this.opts.initSelection.call(null,this.opts.element,function(P){if(P!==undefined&&P!==null){O.updateSelection(P);O.close();O.setPlaceholder()}})}},isPlaceholderOptionSelected:function(){var N;return((N=this.getPlaceholderOption())!==undefined&&N.is(":selected"))||(this.opts.element.val()==="")||(this.opts.element.val()===undefined)||(this.opts.element.val()===null)},prepareOpts:function(){var N=this.parent.prepareOpts.apply(this,arguments),O=this;if(N.element.get(0).tagName.toLowerCase()==="select"){N.initSelection=function(Q,P){var R=Q.find(":selected");P(O.optionToData(R))}}else{if("data" in N){N.initSelection=N.initSelection||function(Q,P){var R=Q.val();var S=null;N.query({matcher:function(V,W,T){var U=l(R,N.id(T));if(U){S=T}return U},callback:!a.isFunction(P)?a.noop:function(){P(S)}})}}}return N},getPlaceholder:function(){if(this.select){if(this.getPlaceholderOption()===undefined){return undefined}}return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var N=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&N!==undefined){if(this.select&&this.getPlaceholderOption()===undefined){return}this.selection.find("span").html(this.opts.escapeMarkup(N));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(N,O,Q){var R=0,S=this,T=true;this.findHighlightableChoices().each2(function(V,U){if(l(S.id(U.data("select2-data")),S.opts.element.val())){R=V;return false}});if(Q!==false){if(O===true&&R>=0){this.highlight(R)}else{this.highlight(0)}}if(O===true){var P=this.opts.minimumResultsForSearch;if(P>=0){this.showSearch(g(N.results)>=P)}}},showSearch:function(N){if(this.showSearchInput===N){return}this.showSearchInput=N;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!N);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!N);a(this.dropdown,this.container).toggleClass("select2-with-searchbox",N)},onSelect:function(N,Q){if(!this.triggerSelect(N)){return}var O=this.opts.element.val(),P=this.data();this.opts.element.val(this.id(N));this.updateSelection(N);this.opts.element.trigger({type:"select2-selected",val:this.id(N),choice:N});this.close();if(!Q||!Q.noFocus){this.selection.focus()}if(!l(O,this.id(N))){this.triggerChange({added:N,removed:P})}},updateSelection:function(P){var N=this.selection.find("span"),Q,O;this.selection.data("select2-data",P);N.empty();Q=this.opts.formatSelection(P,N);if(Q!==undefined){N.append(this.opts.escapeMarkup(Q))}O=this.opts.formatSelectionCssClass(P,N);if(O!==undefined){N.addClass(O)}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==undefined){this.container.addClass("select2-allowclear")}},val:function(){var R,Q=false,N=null,P=this,O=this.data();if(arguments.length===0){return this.opts.element.val()}R=arguments[0];if(arguments.length>1){Q=arguments[1]}if(this.select){this.select.val(R).find(":selected").each2(function(T,S){N=P.optionToData(S);return false});this.updateSelection(N);this.setPlaceholder();if(Q){this.triggerChange({added:N,removed:O})}}else{if(!R&&R!==0){this.clear(Q);return}if(this.opts.initSelection===undefined){throw new Error("cannot call val() if initSelection() is not defined")}this.opts.element.val(R);this.opts.initSelection(this.opts.element,function(S){P.opts.element.val(!S?"":P.id(S));P.updateSelection(S);P.setPlaceholder();if(Q){P.triggerChange({added:S,removed:O})}})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(P,O){var N;if(arguments.length===0){N=this.selection.data("select2-data");if(N==undefined){N=null}return N}else{if(!P||P===""){this.clear(O)}else{N=this.data();this.opts.element.val(!P?"":this.id(P));this.updateSelection(P);if(O){this.triggerChange({added:P,removed:N})}}}}});D=f(c,{createContainer:function(){var N=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return N},prepareOpts:function(){var N=this.parent.prepareOpts.apply(this,arguments),O=this;if(typeof a.fn.select2.defaults.placeholder==="undefined"&&typeof N.placeholder==="undefined"&&typeof N.element.data("placeholder")==="undefined"){N.element.data("placeholder",a.fn.select2.defaults.formatPlaceholder())}if(typeof N.containerCssClass==="undefined"||N.containerCssClass===a.fn.select2.defaults.containerCssClass){N.containerCssClass=a.fn.select2.defaults.containerMultiCssClass}if(N.element.get(0).tagName.toLowerCase()==="select"){N.initSelection=function(R,P){var Q=[];R.find(":selected").each2(function(T,S){Q.push(O.optionToData(S))});P(Q)}}else{if("data" in N){N.initSelection=N.initSelection||function(Q,P){var R=I(Q.val(),N.separator);var S=[];N.query({matcher:function(V,W,T){var U=a.grep(R,function(X){return l(X,N.id(T))}).length;if(U){S.push(T)}return U},callback:!a.isFunction(P)?a.noop:function(){var X=[];for(var T=0;T<R.length;T++){var U=R[T];for(var V=0;V<S.length;V++){var W=S[V];if(l(U,N.id(W))){X.push(W);S.splice(V,1);break}}}P(X)}})}}}return N},selectChoice:function(N){var O=this.container.find(".select2-search-choice-focus");if(O.length&&N&&N[0]==O[0]){}else{if(O.length){this.opts.element.trigger("choice-deselected",O)}O.removeClass("select2-search-choice-focus");if(N&&N.length){this.close();N.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",N)}}},initContainer:function(){var P=".select2-choices",O;this.searchContainer=this.container.find(".select2-search-field");this.selection=O=this.container.find(P);var N=this;this.selection.on("mousedown",".select2-search-choice",function(Q){N.search[0].focus();N.selectChoice(a(this))});this.search.attr("id","s2id_autogen"+E());a("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.opened()){this.open()}}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(Q){if(!this.isInterfaceEnabled()){return}++this.keydowns;var U=O.find(".select2-search-choice-focus");var T=U.prev(".select2-search-choice:not(.select2-locked)");var R=U.next(".select2-search-choice:not(.select2-locked)");var S=o(this.search);if(U.length&&(Q.which==u.LEFT||Q.which==u.RIGHT||Q.which==u.BACKSPACE||Q.which==u.DELETE||Q.which==u.ENTER)){var V=U;if(Q.which==u.LEFT&&T.length){V=T}else{if(Q.which==u.RIGHT){V=R.length?R:null}else{if(Q.which===u.BACKSPACE){this.unselect(U.first());this.search.width(10);V=T.length?T:R}else{if(Q.which==u.DELETE){this.unselect(U.first());this.search.width(10);V=R.length?R:null}else{if(Q.which==u.ENTER){V=null}}}}}this.selectChoice(V);v(Q);if(!V||!V.length){this.open()}return}else{if(((Q.which===u.BACKSPACE&&this.keydowns==1)||Q.which==u.LEFT)&&(S.offset==0&&!S.length)){this.selectChoice(O.find(".select2-search-choice:not(.select2-locked)").last());v(Q);return}else{this.selectChoice(null)}}if(this.opened()){switch(Q.which){case u.UP:case u.DOWN:this.moveHighlight((Q.which===u.UP)?-1:1);v(Q);return;case u.ENTER:this.selectHighlighted();v(Q);return;case u.SPACE:if(typeof this.opts.tokenSeparators!=="undefined"){if(this.opts.tokenSeparators.indexOf(" ")>-1){this.selectHighlighted();v(Q);return}}break;case u.TAB:this.selectHighlighted({noFocus:true});this.close();return;case u.ESC:this.cancel(Q);v(Q);return}}if(Q.which===u.TAB||u.isControl(Q)||u.isFunctionKey(Q)||Q.which===u.BACKSPACE||Q.which===u.ESC){return}if(Q.which===u.ENTER){if(this.opts.openOnEnter===false){return}else{if(Q.altKey||Q.ctrlKey||Q.shiftKey||Q.metaKey){return}}}this.open();if(Q.which===u.PAGE_UP||Q.which===u.PAGE_DOWN){v(Q)}if(Q.which===u.ENTER){v(Q)}}));this.search.on("keyup",this.bind(function(Q){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(Q){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened()){this.clearSearch()}Q.stopImmediatePropagation();this.opts.element.trigger(a.Event("select2-blur"))}));this.container.on("click",P,this.bind(function(Q){if(!this.isInterfaceEnabled()){return}if(a(Q.target).closest(".select2-search-choice").length>0){if(this.opts.editOnClick){var S=a(Q.target).text();var R=typeof a.browser!=="undefined"&&a.browser.msie;if(R){a(Q.target).closest(".select2-search-choice").hide();this.unselect(a(Q.target));this.open();this.focusSearch()}else{a(Q.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(a(Q.target));this.open();this.focusSearch()})).dequeue()}O.find(".select2-search-field input").val(S);this.resizeSearch()}return}this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}this.open();this.focusSearch();Q.preventDefault()}));this.container.on("focus",P,this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch();a(window).on("resize",a.proxy(function(){this.search.css({width:"auto"});var R=this.getPlaceholder(),Q=this.getMaxSearchWidth();if(R!==undefined&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.width(Q>0?Q:this.container.css("width"))}},this))},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled())}},initSelection:function(){var N;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var O=this;this.opts.initSelection.call(null,this.opts.element,function(P){if(P!==undefined&&P!==null){O.updateSelection(P);O.close();O.clearSearch()}})}},clearSearch:function(){var O=this.getPlaceholder(),N=this.getMaxSearchWidth();if(O!==undefined&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(O).addClass("select2-default");this.search.width(N>0?N:this.container.css("width"))}else{this.search.val("").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(true);this.search.focus();this.opts.element.trigger(a.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(N){var P=[],O=[],Q=this;a(N).each(function(){if(q(Q.id(this),P)<0){P.push(Q.id(this));O.push(this)}});N=O;this.selection.find(".select2-search-choice").remove();a(N).each(function(){Q.addSelectedChoice(this)});Q.postprocessResults()},tokenize:function(){var N=this.search.val();N=this.opts.tokenizer(N,this.data(),this.bind(this.onSelect),this.opts);if(N!=null&&N!=undefined){this.search.val(N);if(N.length>0){this.open()}}},onSelect:function(N,O){if(!this.triggerSelect(N)){return}this.addSelectedChoice(N);this.opts.element.trigger({type:"selected",val:this.id(N),choice:N});if(this.select||!this.opts.closeOnSelect){this.postprocessResults()}if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({added:N});if(!O||!O.noFocus){this.focusSearch()}},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(P){var R=!P.locked,S=a("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),Q=a("<li class='select2-search-choice select2-locked'><div></div></li>");var N=R?S:Q,U=this.id(P),V=this.getVal(),T,O;T=this.opts.formatSelection(P,N.find("div"));if(T!=undefined){N.find("div").replaceWith("<div>"+this.opts.escapeMarkup(T)+"</div>")}O=this.opts.formatSelectionCssClass(P,N.find("div"));if(O!=undefined){N.addClass(O)}if(R){N.find(".select2-search-choice-close").on("mousedown",v).on("click dblclick",this.bind(function(W){if(!this.isInterfaceEnabled()){return}var X=typeof a.browser!=="undefined"&&a.browser.msie;if(X){a(W.target).closest(".select2-search-choice").hide();this.unselect(a(W.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()}else{a(W.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(a(W.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");this.close();this.focusSearch()})).dequeue()}v(W)})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled()){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}N.data("select2-data",P);N.insertBefore(this.searchContainer);V.push(U);this.setVal(V)},unselect:function(Q){var R=this.getVal(),N,P;Q=Q.closest(".select2-search-choice");if(Q.length===0){throw"Invalid argument: "+Q+". Must be .select2-search-choice"}N=Q.data("select2-data");if(!N){return}P=q(this.id(N),R);if(P>=0){R.splice(P,1);this.setVal(R);if(this.select){this.postprocessResults()}}Q.remove();this.opts.element.trigger({type:"removed",val:this.id(N),choice:N});var O=a.Event("select2-removing");O.val=this.id(N);O.choice=N;this.opts.element.trigger(O);if(O.isDefaultPrevented()){return}this.opts.element.trigger({type:"select2-removed",val:this.id(N),choice:N});this.triggerChange({removed:N})},postprocessResults:function(P,Q,R){var T=this.getVal(),N=this.results.find(".select2-result"),O=this.results.find(".select2-result-with-children"),S=this;N.each2(function(V,U){var W=S.id(U.data("select2-data"));if(q(W,T)>=0){U.addClass("select2-selected");U.find(".select2-result-selectable").addClass("select2-selected")}});O.each2(function(V,U){if(!U.is(".select2-result-selectable")&&U.find(".select2-result-selectable:not(.select2-selected)").length===0){U.addClass("select2-selected")}});if(this.highlight()==-1&&R!==false){S.highlight(0)}if(!this.opts.createSearchChoice&&!N.filter(".select2-result:not(.select2-selected)").length>0){if(!P||P&&!P.more&&this.results.find(".select2-no-results").length===0){if(e(S.opts.formatNoMatches,"formatNoMatches")){this.results.append("<li class='select2-no-results'>"+S.opts.formatNoMatches(S.search.val())+"</li>")}}}},getMaxSearchWidth:function(){return this.selection.width()-p(this.search)},resizeSearch:function(){var Q,O,P,N,R,S=p(this.search);Q=C(this.search)+10;O=this.search.offset().left;P=this.selection.width();N=this.selection.offset().left;R=P-(O-N)-S;if(R<Q){R=P-S}if(R<40){R=P-S}if(R<=0){R=Q}this.search.width(R)},getVal:function(){var N;if(this.select){N=this.select.val();return N===null?[]:N}else{N=this.opts.element.val();return I(N,this.opts.separator)}},setVal:function(O){var N;if(this.select){this.select.val(O)}else{N=[];a(O).each(function(){if(q(this,N)<0){N.push(this)}});this.opts.element.val(N.length===0?"":N.join(this.opts.separator))}},buildChangeDetails:function(Q,N){var N=N.slice(0),Q=Q.slice(0);for(var O=0;O<N.length;O++){for(var P=0;P<Q.length;P++){if(l(this.opts.id(N[O]),this.opts.id(Q[P]))){N.splice(O,1);O--;Q.splice(P,1);P--}}}return{added:N,removed:Q}},val:function(R,Q){var O,P=this,N;if(arguments.length===0){return this.getVal()}O=this.data();if(!O.length){O=[]}if(!R&&R!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(Q){this.triggerChange({added:this.data(),removed:O})}return}this.setVal(R);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(Q){this.triggerChange(this.buildChangeDetails(O,this.data()))}}else{if(this.opts.initSelection===undefined){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(S){var T=a.map(S,P.id);P.setVal(T);P.updateSelection(S);P.clearSearch();if(Q){P.triggerChange(this.buildChangeDetails(O,this.data()))}})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var O=[],N=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){O.push(N.opts.id(a(this).data("select2-data")))});this.setVal(O);this.triggerChange()},data:function(R,Q){var P=this,N,O;if(arguments.length===0){return this.selection.find(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get()}else{O=this.data();if(!R){R=[]}N=a.map(R,function(S){return P.opts.id(S)});this.setVal(N);this.updateSelection(R);this.clearSearch();if(Q){this.triggerChange(this.buildChangeDetails(O,this.data()))}}}});a.fn.select2=function(){var O=Array.prototype.slice.call(arguments,0),S,T,P,U,R,N=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search","updateOptions"],V=["val","opened","isFocused","container","data"],Q={search:"externalSearch"};this.each(function(){if(O.length===0||typeof(O[0])==="object"){S=O.length===0?{}:a.extend({},O[0]);S.element=a(this);if(S.element.get(0).tagName.toLowerCase()==="select"){R=S.element.prop("multiple")}else{R=S.multiple||false;if("tags" in S){S.multiple=R=true}}T=R?new D():new G();T.init(S)}else{if(typeof(O[0])==="string"){if(q(O[0],N)<0){throw"Unknown method: "+O[0]}U=undefined;T=a(this).data("select2");if(T===undefined){return}P=O[0];if(P==="container"){U=T.container}else{if(P==="dropdown"){U=T.dropdown}else{if(Q[P]){P=Q[P]}U=T[P].apply(T,O.slice(1))}}if(q(O[0],V)>=0){return false}}else{throw"Invalid arguments to select2 plugin: "+O}}});return(U===undefined)?this:U};if(typeof a.fn.select2.defaults==="undefined"){a.fn.select2.defaults={}}a.extend(a.fn.select2.defaults,{width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,editOnClick:false,containerCss:{},dropdownCss:{},containerCssClass:"custom_select no-initUI",containerMultiCssClass:"custom_select-multi no-initUI",dropdownCssClass:"",formatResult:function(R,N,Q,O){var P=[];z(R.text,Q.term,P,O);return P.join("")},formatSelection:function(O,N){return O?O.text:undefined},sortResults:function(P,N,O){return P},formatResultCssClass:function(N){return undefined},formatSelectionCssClass:function(O,N){return undefined},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(N,O){var P=O-N.length;return"Please enter "+P+" more character"+(P==1?"":"s")},formatInputTooLong:function(N,O){var P=N.length-O;return"Please delete "+P+" character"+(P==1?"":"s")},formatSelectionTooBig:function(N){return"You can only select "+N+" item"+(N==1?"":"s")},formatLoadMore:function(N){return"Loading more results..."},formatSearching:function(){return"Searching..."},formatPlaceholder:function(){return requireConfig.websiteOptions!=null&&requireConfig.websiteOptions.locale=="ro"?"Alege?i":"Choose"},formatSaveItem:function(N){return"Add "+N},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(N){return N.id},matcher:function(N,O){return J(""+O).toUpperCase().indexOf(J(""+N).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:j,escapeMarkup:i,blurOnChange:false,selectOnBlur:false,javascriptClassesPrefix:"js-",adaptContainerCssClass:function(N){var S="";if(N!=""){var O=N.split(/\s+/g),Q=0,R=O.length;for(;Q<R;Q++){var P=O[Q];if(P.indexOf(a.fn.select2.defaults.javascriptClassesPrefix)!==0){S+=P+" "}}}return S},adaptDropdownCssClass:function(N){return null}});a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:d,local:y,tags:L},util:{debounce:h,markMatch:z,escapeMarkup:i,stripDiacritics:J},"class":{"abstract":c,single:G,multi:D}}}));(function(a){if(typeof define==="function"&&define.amd){define("bforms-select2",["jquery","select2"],function(b){a(b,window.jQuery.fn.select2)})}else{a(window.jQuery,window.jQuery.fn.select2)}})(function(a,b){var c=function(d,e){this.$elem=d;this.options=e;this.init()};jQuery.fn.bsSelectInputDefaults={textTag:true,select2TagsOpts:{tokenSeparators:[","," "],tags:[],selectedValues:[]},tags:true};c.prototype.init=function(){if(this.options.tags===true){this._selectSettings=this._getSelectTagsSettings();this._initElement();this._applySelect2(this.$input)}else{this._selectSettings=this._getMultiSelectSettings(this.$elem);this._applySelect2(this.$elem)}this.$elem.addClass("bs-hasBformsSelect")};c.prototype._initElement=function(){var d=a("<input></input>");d.prop("type","hidden");d.prop("id",this.$elem.prop("id"));d.prop("name",this.$elem.prop("name"));d.prop("class",this.$elem.prop("class"));d.prop("value",this._selectSettings.selectedValues);d.data(this.$elem.data());var f=this.$elem[0].attributes,g=0,j=f.length,k=[];for(;g<j;g++){var e=f[g];if(typeof e.nodeName!=="undefined"&&e.nodeName.indexOf("data-")===0){d.attr(e.nodeName,e.nodeValue);k.push(e.nodeName)}}for(var h=0;h<k.length;h++){this.$elem.removeAttr(k[h])}this.$elem.prop("id","tag_"+d.prop("id"));this.$elem.prop("name","tag_"+d.prop("name"));this.$input=d;this.$input.on("change",function(){if(typeof a(this).valid==="function"){a(this).valid()}});this.$elem.before(this.$input);this.$elem.hide()};c.prototype._getSelectTagsSettings=function(){var d=a.extend(true,{},this.options.select2TagsOpts);if(this.$elem.is("select")){this.$elem.find("option").each(a.proxy(function(f,g){var e=a(g),i=e.val();if(typeof i!=="undefined"&&i!==""){var h=this.options.textTag===true?e.text():i;d.tags.push(h);if(e.prop("selected")==true){d.selectedValues.push(h)}}else{d.placeholder=e.text()}},this))}return d};c.prototype._getMultiSelectSettings=function(){var e={};var d=this.$elem.find("option:first"),f=d.val();if(typeof f==="undefined"||f==""){e.placeholder=d.text();d.remove()}return e};c.prototype._applySelect2=function(d){d.select2(this._selectSettings)};a.fn.bsSelectInput=function(d){if(a(this).length===0){console.warn("bsSelectInput must be applied on an element");return a(this)}return new c(a(this),a.extend(true,{},a.fn.bsSelectInputDefaults,d))}});/*
 * typeahead.js 0.9.3
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(a){if(typeof define==="function"&&define.amd){define("typeahead",["jquery"],a)}else{a(window.jQuery)}}(function(a){var l="0.9.3";var k={isMsie:function(){var m=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return m?parseInt(m[2],10):false},isBlankString:function(m){return !m||/^\s*$/.test(m)},escapeRegExChars:function(m){return m.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(m){return typeof m==="string"},isNumber:function(m){return typeof m==="number"},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(m){return typeof m==="undefined"},bind:a.proxy,bindAll:function(n){var o;for(var m in n){a.isFunction(o=n[m])&&(n[m]=a.proxy(o,n))}},indexOf:function(m,o){for(var n=0;n<m.length;n++){if(m[n]===o){return n}}return -1},each:a.each,map:a.map,filter:a.grep,every:function(m,o){var n=true;if(!m){return n}a.each(m,function(p,q){if(!(n=o.call(null,q,p,m))){return false}});return !!n},some:function(m,o){var n=false;if(!m){return n}a.each(m,function(p,q){if(n=o.call(null,q,p,m)){return false}});return !!n},mixin:a.extend,getUniqueId:function(){var m=0;return function(){return m++}}(),defer:function(m){setTimeout(m,0)},debounce:function(m,q,n){var p,o;return function(){var t=this,r=arguments,u,s;u=function(){p=null;if(!n){o=m.apply(t,r)}};s=n&&!p;clearTimeout(p);p=setTimeout(u,q);if(s){o=m.apply(t,r)}return o}},throttle:function(o,t){var n,m,s,r,q,p;q=0;p=function(){q=new Date();s=null;r=o.apply(n,m)};return function(){var u=new Date(),v=t-(u-q);n=this;m=arguments;if(v<=0){clearTimeout(s);s=null;q=u;r=o.apply(n,m)}else{if(!s){s=setTimeout(p,v)}}return r}},tokenizeQuery:function(m){return a.trim(m).toLowerCase().split(/[\s]+/)},tokenizeText:function(m){return a.trim(m).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}};var e=function(){var m=/\s+/;return{on:function(p,n){var o;if(!n){return this}this._callbacks=this._callbacks||{};p=p.split(m);while(o=p.shift()){this._callbacks[o]=this._callbacks[o]||[];this._callbacks[o].push(n)}return this},trigger:function(q,o){var p,n;if(!this._callbacks){return this}q=q.split(m);while(p=q.shift()){if(n=this._callbacks[p]){for(var r=0;r<n.length;r+=1){n[r].call(this,{type:p,data:o})}}}return this}}}();var d=function(){var n="typeahead:";function m(p){if(!p||!p.el){a.error("EventBus initialized without el")}this.$el=a(p.el)}k.mixin(m.prototype,{trigger:function(p){var o=[].slice.call(arguments,1);this.$el.trigger(n+p,o)}});return m}();var g=function(){var p,q;try{p=window.localStorage;p.setItem("~~~","!");p.removeItem("~~~")}catch(o){p=null}function s(t){this.prefix=["__",t,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(p&&window.JSON){q={_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){if(this.isExpired(t)){this.remove(t)}return m(p.getItem(this._prefix(t)))},set:function(t,v,u){if(k.isNumber(u)){p.setItem(this._ttlKey(t),n(r()+u))}else{p.removeItem(this._ttlKey(t))}return p.setItem(this._prefix(t),n(v))},remove:function(t){p.removeItem(this._ttlKey(t));p.removeItem(this._prefix(t));return this},clear:function(){var t,u,v=[],w=p.length;for(t=0;t<w;t++){if((u=p.key(t)).match(this.keyMatcher)){v.push(u.replace(this.keyMatcher,""))}}for(t=v.length;t--;){this.remove(v[t])}return this},isExpired:function(t){var u=m(p.getItem(this._ttlKey(t)));return k.isNumber(u)&&r()>u?true:false}}}else{q={get:k.noop,set:k.noop,remove:k.noop,clear:k.noop,isExpired:k.noop}}k.mixin(s.prototype,q);return s;function r(){return new Date().getTime()}function n(t){return JSON.stringify(k.isUndefined(t)?null:t)}function m(t){return JSON.parse(t)}}();var h=function(){function m(n){k.bindAll(this);n=n||{};this.sizeLimit=n.sizeLimit||10;this.cache={};this.cachedKeysByAge=[]}k.mixin(m.prototype,{get:function(n){return this.cache[n]},set:function(p,o){var n;if(this.cachedKeysByAge.length===this.sizeLimit){n=this.cachedKeysByAge.shift();delete this.cache[n]}this.cache[p]=o;this.cachedKeysByAge.push(p)}});return m}();var i=function(){var r=0,q={},p,s;function t(u){k.bindAll(this);u=k.isString(u)?{url:u}:u;s=s||new h();p=k.isNumber(u.maxParallelRequests)?u.maxParallelRequests:p||6;this.url=u.url;this.wildcard=u.wildcard||"%QUERY";this.filter=u.filter;this.replace=u.replace;this.ajaxSettings={type:"get",cache:u.cache,timeout:u.timeout,dataType:u.dataType||"json",beforeSend:u.beforeSend};this._get=(/^throttle$/i.test(u.rateLimitFn)?k.throttle:k.debounce)(this._get,u.rateLimitWait||300)}k.mixin(t.prototype,{_get:function(x,u){var w=this;if(m()){this._sendRequest(x).done(v)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}function v(z){var y=w.filter?w.filter(z):z;u&&u(y);s.set(x,z)}},_sendRequest:function(x){var w=this,v=q[x];if(!v){o();v=q[x]=a.ajax(x,this.ajaxSettings).always(u)}return v;function u(){n();q[x]=null;if(w.onDeckRequestArgs){w._get.apply(w,w.onDeckRequestArgs);w.onDeckRequestArgs=null}}},get:function(w,u){var y=this,v=encodeURIComponent(w||""),z,x;u=u||k.noop;z=this.replace?this.replace(this.url,v):this.url.replace(this.wildcard,v);if(x=s.get(z)){k.defer(function(){u(y.filter?y.filter(x):x)})}else{this._get(z,u)}return !!x}});return t;function o(){r++}function n(){r--}function m(){return r<p}}();var b=function(){var o={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};function n(p){k.bindAll(this);if(k.isString(p.template)&&!p.engine){a.error("no template engine specified")}if(!p.local&&!p.prefetch&&!p.remote){a.error("one of local, prefetch, or remote is required")}this.name=p.name||k.getUniqueId();this.limit=p.limit||5;this.minLength=p.minLength||1;this.header=p.header;this.footer=p.footer;this.valueKey=p.valueKey||"value";this.template=m(p.template,p.engine,this.valueKey);this.local=p.local;this.prefetch=p.prefetch;this.remote=p.remote;this.itemHash={};this.adjacencyList={};this.storage=p.name?new g(p.name):null}k.mixin(n.prototype,{_processLocalData:function(p){this._mergeProcessedData(this._processData(p))},_loadPrefetchData:function(r){var x=this,y=l+(r.thumbprint||""),w,v,u,t,q,p;if(this.storage){w=this.storage.get(o.thumbprint);v=this.storage.get(o.protocol);u=this.storage.get(o.itemHash);t=this.storage.get(o.adjacencyList)}q=w!==y||v!==k.getProtocol();r=k.isString(r)?{url:r}:r;r.ttl=k.isNumber(r.ttl)?r.ttl:24*60*60*1000;if(u&&t&&!q){this._mergeProcessedData({itemHash:u,adjacencyList:t});p=a.Deferred().resolve()}else{p=a.getJSON(r.url).done(s)}return p;function s(A){var B=r.filter?r.filter(A):A,D=x._processData(B),C=D.itemHash,z=D.adjacencyList;if(x.storage){x.storage.set(o.itemHash,C,r.ttl);x.storage.set(o.adjacencyList,z,r.ttl);x.storage.set(o.thumbprint,y,r.ttl);x.storage.set(o.protocol,k.getProtocol(),r.ttl)}x._mergeProcessedData(D)}},_transformDatum:function(p){var s=k.isString(p)?p:p[this.valueKey],r=p.tokens||k.tokenizeText(s),q={value:s,tokens:r};if(k.isString(p)){q.datum={};q.datum[this.valueKey]=p}else{q.datum=p}q.tokens=k.filter(q.tokens,function(t){return !k.isBlankString(t)});q.tokens=k.map(q.tokens,function(t){return t.toLowerCase()});return q},_processData:function(q){var s=this,r={},p={};k.each(q,function(u,t){var w=s._transformDatum(t),v=k.getUniqueId(w.value);r[v]=w;k.each(w.tokens,function(z,A){var y=A.charAt(0),x=p[y]||(p[y]=[v]);!~k.indexOf(x,v)&&x.push(v)})});return{itemHash:r,adjacencyList:p}},_mergeProcessedData:function(p){var q=this;k.mixin(this.itemHash,p.itemHash);k.each(p.adjacencyList,function(s,r){var t=q.adjacencyList[s];q.adjacencyList[s]=t?t.concat(r):r})},_getLocalSuggestions:function(t){var u=this,p=[],q=[],r,s=[];k.each(t,function(w,x){var v=x.charAt(0);!~k.indexOf(p,v)&&p.push(v)});k.each(p,function(w,v){var x=u.adjacencyList[v];if(!x){return false}q.push(x);if(!r||x.length<r.length){r=x}});if(q.length<p.length){return[]}k.each(r,function(v,w){var z=u.itemHash[w],x,y;x=k.every(q,function(A){return ~k.indexOf(A,w)});y=x&&k.every(t,function(A){return k.some(z.tokens,function(B){return B.indexOf(A)===0})});y&&s.push(z)});return s},initialize:function(){var p;this.local&&this._processLocalData(this.local);this.transport=this.remote?new i(this.remote):null;p=this.prefetch?this._loadPrefetchData(this.prefetch):a.Deferred().resolve();this.local=this.prefetch=this.remote=null;this.initialize=function(){return p};return p},getSuggestions:function(s,q){var v=this,u,t,p=false;if(s.length<this.minLength){return}u=k.tokenizeQuery(s);t=this._getLocalSuggestions(u).slice(0,this.limit);if(t.length<this.limit&&this.transport){p=this.transport.get(s,r)}!p&&q&&q(t);function r(w){t=t.slice(0);k.each(w,function(y,x){var A=v._transformDatum(x),z;z=k.some(t,function(B){return A.value===B.value});!z&&t.push(A);return t.length<v.limit});q&&q(t)}}});return n;function m(s,q,t){var r,p;if(k.isFunction(s)){r=s}else{if(k.isString(s)){p=q.compile(s);r=k.bind(p.render,p)}else{r=function(u){return"<p>"+u[t]+"</p>"}}}return r}}();var f=function(){function o(p){var q=this;k.bindAll(this);this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};this.$hint=a(p.hint);this.$input=a(p.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent);if(!k.isMsie()){this.$input.on("input.tt",this._compareQueryToInputValue)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(r){if(q.specialKeyCodeMap[r.which||r.keyCode]){return}k.defer(q._compareQueryToInputValue)})}this.query=this.$input.val();this.$overflowHelper=m(this.$input)}k.mixin(o.prototype,e,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(p){var q=this.specialKeyCodeMap[p.which||p.keyCode];q&&this.trigger(q+"Keyed",p)},_compareQueryToInputValue:function(){var p=this.getInputValue(),q=n(this.query,p),r=q?this.query.length!==p.length:false;if(r){this.trigger("whitespaceChanged",{value:this.query})}else{if(!q){this.trigger("queryChanged",{value:this.query=p})}}},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(p){this.query=p},getInputValue:function(){return this.$input.val()},setInputValue:function(q,p){this.$input.val(q);!p&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(p){this.$hint.val(p)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var r=this.$input.val().length,q=this.$input[0].selectionStart,p;if(k.isNumber(q)){return q===r}else{if(document.selection){p=document.selection.createRange();p.moveStart("character",-r);return r===p.text.length}}return true}});return o;function m(p){return a("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:p.css("font-family"),fontSize:p.css("font-size"),fontStyle:p.css("font-style"),fontVariant:p.css("font-variant"),fontWeight:p.css("font-weight"),wordSpacing:p.css("word-spacing"),letterSpacing:p.css("letter-spacing"),textIndent:p.css("text-indent"),textRendering:p.css("text-rendering"),textTransform:p.css("text-transform")}).insertAfter(p)}function n(p,q){p=(p||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");q=(q||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");return p===q}}();var c=function(){var p={suggestionsList:'<span class="tt-suggestions"></span>'},m={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"}};function n(q){k.bindAll(this);this.isOpen=false;this.isEmpty=true;this.isMouseOverDropdown=false;this.$menu=a(q.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}k.mixin(n.prototype,e,{_handleMouseenter:function(){this.isMouseOverDropdown=true},_handleMouseleave:function(){this.isMouseOverDropdown=false},_handleMouseover:function(q){var r=a(q.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor");r.addClass("tt-is-under-cursor")},_handleSelection:function(q){var r=a(q.currentTarget);this.trigger("suggestionSelected",o(r))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var r,q,u,s;if(!this.isVisible()){return}r=this._getSuggestions();q=r.filter(".tt-is-under-cursor");q.removeClass("tt-is-under-cursor");u=r.index(q)+t;u=(u+1)%(r.length+1)-1;if(u===-1){this.trigger("cursorRemoved");return}else{if(u<-1){u=r.length-1}}s=r.eq(u).addClass("tt-is-under-cursor");this._ensureVisibility(s);this.trigger("cursorMoved",o(s))},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(q){var t=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),u=this.$menu.scrollTop(),s=q.position().top,r=s+q.outerHeight(true);if(s<0){this.$menu.scrollTop(u+s)}else{if(t<r){this.$menu.scrollTop(u+(r-t))}}},destroy:function(){this.$menu.off(".tt");this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){if(!this.isMouseOverDropdown){this.close()}},close:function(){if(this.isOpen){this.isOpen=false;this.isMouseOverDropdown=false;this._hide();this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor");this.trigger("closed")}},open:function(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function(q){var r={left:"0",right:"auto"},s={left:"auto",right:" 0"};q==="ltr"?this.$menu.css(r):this.$menu.css(s)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(+1)},getSuggestionUnderCursor:function(){var q=this._getSuggestions().filter(".tt-is-under-cursor").first();return q.length>0?o(q):null},getFirstSuggestion:function(){var q=this._getSuggestions().first();return q.length>0?o(q):null},renderSuggestions:function(u,y){var v="tt-dataset-"+u.name,z='<div class="tt-suggestion">%body</div>',t,s,q=this.$menu.find("."+v),w,x,r;if(q.length===0){s=a(p.suggestionsList).css(m.suggestionsList);q=a("<div></div>").addClass(v).append(u.header).append(s).append(u.footer).appendTo(this.$menu)}if(y.length>0){this.isEmpty=false;this.isOpen&&this._show();w=document.createElement("div");x=document.createDocumentFragment();k.each(y,function(A,B){B.dataset=u.name;t=u.template(B.datum);w.innerHTML=z.replace("%body",t);r=a(w.firstChild).css(m.suggestion).data("suggestion",B);r.children().each(function(){a(this).css(m.suggestionChild)});x.appendChild(r[0])});q.show().find(".tt-suggestions").html(x)}else{this.clearSuggestions(u.name)}this.trigger("suggestionsRendered")},clearSuggestions:function(s){var q=s?this.$menu.find(".tt-dataset-"+s):this.$menu.find('[class^="tt-dataset-"]'),r=q.find(".tt-suggestions");q.hide();r.empty();if(this._getSuggestions().length===0){this.isEmpty=true;this._hide()}}});return n;function o(q){return q.data("suggestion")}}();var j=function(){var p={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},n={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};if(k.isMsie()){k.mixin(n.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(k.isMsie()&&k.isMsie()<=7){k.mixin(n.wrapper,{display:"inline",zoom:"1"});k.mixin(n.query,{marginTop:"-1px"})}function q(u){var t,s,r;k.bindAll(this);this.$node=m(u.input);this.datasets=u.datasets;this.dir=null;this.eventBus=u.eventBus;t=this.$node.find(".tt-dropdown-menu");s=this.$node.find(".tt-query");r=this.$node.find(".tt-hint");this.dropdownView=new c({menu:t}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent);this.inputView=new f({input:s,hint:r}).on("focused",this._openDropdown).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}k.mixin(q.prototype,e,{_managePreventDefault:function(s){var r=s.data,t,u,v=false;switch(s.type){case"tabKeyed":t=this.inputView.getHintValue();u=this.inputView.getInputValue();v=t&&t!==u;break;case"upKeyed":case"downKeyed":v=!r.shiftKey&&!r.ctrlKey&&!r.metaKey;break}v&&r.preventDefault()},_setLanguageDirection:function(){var r=this.inputView.getLanguageDirection();if(r!==this.dir){this.dir=r;this.$node.css("direction",r);this.dropdownView.setLanguageDirection(r)}},_updateHint:function(){var z=this.dropdownView.getFirstSuggestion(),u=z?z.value:null,s=this.dropdownView.isVisible(),v=this.inputView.isOverflow(),w,y,t,r,x;if(u&&s&&!v){w=this.inputView.getInputValue();y=w.replace(/\s{2,}/g," ").replace(/^\s+/g,"");t=k.escapeRegExChars(y);r=new RegExp("^(?:"+t+")(.*$)","i");x=r.exec(u);this.inputView.setHintValue(w+(x?x[1]:""))}},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(r){var s=r.data;this.inputView.setInputValue(s.value,true)},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(r){this.dropdownView[r.type==="blured"?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(s){var r=s.data;if(!r.shiftKey&&!r.ctrlKey&&!r.metaKey){this.dropdownView[s.type==="upKeyed"?"moveCursorUp":"moveCursorDown"]()}},_handleSelection:function(s){var r=s.type==="suggestionSelected",t=r?s.data:this.dropdownView.getSuggestionUnderCursor();if(t){this.inputView.setInputValue(t.value);r?this.inputView.focus():s.data.preventDefault();r&&k.isMsie()?k.defer(this.dropdownView.close):this.dropdownView.close();this.eventBus.trigger("selected",t.datum,t.dataset)}},_getSuggestions:function(){var s=this,r=this.inputView.getQuery();if(k.isBlankString(r)){return}k.each(this.datasets,function(u,t){t.getSuggestions(r,function(v){if(r===s.inputView.getQuery()){s.dropdownView.renderSuggestions(t,v)}})})},_autocomplete:function(r){var u,t,v,s,w;if(r.type==="rightKeyed"||r.type==="leftKeyed"){u=this.inputView.isCursorAtEnd();t=this.inputView.getLanguageDirection()==="ltr"?r.type==="leftKeyed":r.type==="rightKeyed";if(!u||t){return}}v=this.inputView.getQuery();s=this.inputView.getHintValue();if(s!==""&&v!==s){w=this.dropdownView.getFirstSuggestion();this.inputView.setInputValue(w.value);this.eventBus.trigger("autocompleted",w.datum,w.dataset)}},_propagateEvent:function(r){this.eventBus.trigger(r.type)},destroy:function(){this.inputView.destroy();this.dropdownView.destroy();o(this.$node);this.$node=null},setQuery:function(r){this.inputView.setQuery(r);this.inputView.setInputValue(r);this._clearHint();this._clearSuggestions();this._getSuggestions()}});return q;function m(w){var u=a(p.wrapper),r=a(p.dropdown),t=a(w),s=a(p.hint);u=u.css(n.wrapper);r=r.css(n.dropdown);s.css(n.hint).css({backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")});t.data("ttAttrs",{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")});t.addClass("tt-query").attr({autocomplete:"off",spellcheck:false}).css(n.query);try{!t.attr("dir")&&t.attr("dir","auto")}catch(v){}return t.wrap(u).parent().prepend(s).append(r)}function o(s){var r=s.find(".tt-query");k.each(r.data("ttAttrs"),function(t,u){k.isUndefined(u)?r.removeAttr(t):r.attr(t,u)});r.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(s);s.remove()}}();(function(){var m={},o="ttView",n;n={initialize:function(p){var q;p=k.isArray(p)?p:[p];if(p.length===0){a.error("no datasets provided")}q=k.map(p,function(t){var s=m[t.name]?m[t.name]:new b(t);if(t.name){m[t.name]=s}return s});return this.each(r);function r(){var s=a(this),t,u=new d({el:s});t=k.map(q,function(v){return v.initialize()});s.data(o,new j({input:s,eventBus:u=new d({el:s}),datasets:q}));a.when.apply(a,t).always(function(){k.defer(function(){u.trigger("initialized")})})}},destroy:function(){return this.each(p);function p(){var q=a(this),r=q.data(o);if(r){r.destroy();q.removeData(o)}}},setQuery:function(p){return this.each(q);function q(){var r=a(this).data(o);r&&r.setQuery(p)}}};jQuery.fn.typeahead=function(p){if(n[p]){return n[p].apply(this,[].slice.call(arguments,1))}else{return n.initialize.apply(this,arguments)}}})()}));(function(a){if(typeof define==="function"&&define.amd){define("bforms-typeahead",["jquery","typeahead"],function(b){a(b,window.jQuery.fn.typeahead)})}else{a(window.jQuery,window.jQuery.fn.typeahead)}})(function(a,b){var c=function(d,e){this.$elem=d;this.options=e;this.init();this.$elem.data("typeaheadSelect",this);this.$input.data("typeaheadSelect",this);return d};c.prototype.init=function(){this._settings=this._getSettings();this._initElement();this._applyTypeahead()};c.prototype._getSettings=function(){var d={value:""};if(this.options.ajaxQuery===false){d.local=[];if(this.$elem.is("select")){this.$elem.find("option").each(a.proxy(function(f,g){var e=a(g),i=e.val();if(typeof i!=="undefined"&&i!==""){var h=this.options.textTag===true?e.text():i;d.local.push(h);if(e.attr("selected")){d.value=h}}else{d.placeholder=e.text()}},this))}}return d};c.prototype._initElement=function(){var d=a("<input></input>");d.prop("type","text");d.prop("id",this.$elem.prop("id"));d.prop("name",this.$elem.prop("name"));d.prop("class",this.$elem.prop("class"));this._settings.name=this.$elem.prop("name");var f=this.$elem[0].attributes,g=0,j=f.length,k=[];for(;g<j;g++){var e=f[g];if(typeof e.nodeName!=="undefined"&&e.nodeName.indexOf("data-")===0){d.attr(e.nodeName,e.nodeValue);k.push(e.nodeName)}}for(var h=0;h<k.length;h++){this.$elem.removeAttr(k[h])}d.data(this.$elem.data());this.$elem.prop("id","autocomplete_"+d.prop("id"));this.$elem.prop("name","autocomplete_"+d.prop("name"));this.$input=d;this.$elem.hide().before(this.$input)};c.prototype._applyTypeahead=function(){if(typeof this._settings.value!=="undefined"){this.$input.val(this._settings.value)}this.$input.typeahead(this._settings);if(typeof this._settings.placeholder!=="undefined"){this.$input.prop("placeholder",this._settings.placeholder)}};c.prototype._updateTypeahead=function(f,d,e){if(e!==true){this.$input.val("")}this.$input.typeahead("destroy");this.$input.typeahead({name:d,local:f})};jQuery.fn.typeaheadSelectDefaults={ajaxQuery:false,textTag:true};a.fn.bsTypeahead=function(d){return new c(a(this),a.extend(true,{},a.fn.typeaheadSelectDefaults,d))};a.fn.bsTypeaheadUpdate=function(){var d=a(this).data("typeaheadSelect");if(typeof d!=="undefined"){d._updateTypeahead.apply(d,arguments)}}});(function(a){if(typeof define==="function"&&define.amd){define("bforms-initUI",["jquery","jquery-migrate","bootstrap","jquery-ui-core","bforms-datepicker-i18n","placeholder-shim"],a)}else{a(window.jQuery)}})(function(a){a.fn.bsInitUIDefaults={select2:true,select2Selector:".bs-dropdown:not(.no-initUI), .bs-dropdown-grouped:not(.no-initUI)",multiSelect2:true,multiSelect2Selector:".bs-listbox:not(.no-initUI), .bs-listbox-grouped:not(.no-initUI)",autocomplete:true,autocompleteSelector:".bs-autocomplete:not(.no-initUI)",radioButtons:true,radioButtonsSelector:".bs-radio-list:not(.no-initUI)",checkBoxList:true,checkBoxListSelector:".bs-checkbox-list:not(.no-initUI)",tagList:true,tagListSelector:".bs-tag-list:not(.no-initUI)",datepicker:true,datepickerSelector:".bs-date:not(.no-initUI)",timepicker:true,timepickerSelector:".bs-time:not(.no-initUI)",datetimepicker:true,datetimepickerSelector:".bs-datetime:not(.no-initUI)",datetimerange:true,datetimerangeSelector:".bs-datetime-range:not(.no-initUI)",daterange:true,daterangeSelector:".bs-date-range:not(.no-initUI)",timerange:true,timerangeSelector:".bs-time-range:not(.no-initUI)",numberrange:true,numberrangeSelector:".bs-number-range:not(.no-initUI)",singlenumberrange:true,singlenumberrangeSelector:".bs-number-single_range",singlenumberrangeinline:true,singlenumberrangeinlineSelector:".bs-number-single_range_inline",loadingSelector:".loading",loadingClass:"loading",transformNumbers:true};a.fn.bsInitUI=function(c){return(new b(a(this),a.extend(true,{},a.fn.bsInitUIDefaults,c))).promise};var b=(function(c,e){var d=function(f,g){this.$elem=f;this.options=g;this.deferredList=[];this.loadAMD=(typeof define==="function"&&typeof define.amd!=="undefined");this.loadAllDeferred=c.Deferred();this.promise=this.loadAllDeferred.promise();this._applyStyles();c.when.apply(this,this.deferredList).done(c.proxy(function(){this.loadAllDeferred.resolve();this._addTheme()},this))};d.prototype._getOptions=function(f){return c.extend(true,{},c(f).data("options"))};d.prototype._removePlaceholder=function(f){f.each(function(){if(typeof c(this).data("val-required")!=="undefined"){f.find('option[value=""]').remove()}})};d.prototype._addTheme=function(){var f=c(".bs-selectTheme");if(f.length){var g=f.bsThemeSelect("getCurrentColorClass");c(".bs-datetime-picker, .bs-range-picker").addClass(g)}};d.prototype._applyStyles=function(){var r=this;var y=c("html").attr("lang")!=="undefined"?c("html").attr("lang"):"en";if(requireConfig&&requireConfig.locale){var k=requireConfig.locale;if(typeof moment.langData(k)!=="undefined"){y=k}}if(y!="en"&&typeof y!=="undefined"){var l=c.Deferred();this.deferredList.push(l);require(["validate-"+y,"select2-"+y],function(){l.resolve()})}if(this.options.transformNumbers===true){var o=c('<input type="number"></input>').val("chrome").val()=="chrome";if(!o){this.$elem.find('input[type="number"]').prop("type","text")}}if(this.options.select2===true){if(c.browser.mobile){this._removePlaceholder(r.$elem.find(r.options.select2Selector))}else{if(r.loadAMD){var q=c.Deferred();this.deferredList.push(q);require(["bforms-select2"],function(){r.$elem.find(r.options.select2Selector).each(function(){c(this).select2(r._getOptions(this))});q.resolve()})}else{if(typeof c.fn.select2==="function"){this.$elem.find(this.options.select2Selector).each(function(){c(this).select2(r._getOptions(this))})}else{throw"bforms.select2 script must be loaded before calling initUI"}}}}if(this.options.tagList===true&&this.$elem.find(this.options.tagListSelector).length){if(c.browser.mobile){this._removePlaceholder(this.$elem.find(r.options.tagListSelector))}else{if(r.loadAMD){var u=c.Deferred();this.deferredList.push(u);require(["bforms-select2"],function(){r.$elem.find(r.options.tagListSelector).each(function(){c(this).bsSelectInput(r._getOptions(this))});u.resolve()})}else{if(typeof c.fn.bsSelectInput==="function"){this.$elem.find(r.options.tagListSelector).each(function(){c(this).bsSelectInput(r._getOptions(this))})}else{throw"bforms.select2 script must be loaded before calling initUI"}}}}if(this.options.multiSelect2===true&&this.$elem.find(this.options.multiSelect2Selector).length){if(c.browser.mobile){this._removePlaceholder(this.$elem.find(r.options.multiSelect2Selector))}else{if(this.loadAMD){var m=c.Deferred();this.deferredList.push(m);require(["bforms-select2"],function(){r.$elem.find(r.options.multiSelect2Selector).each(function(){c(this).bsSelectInput(c.extend(true,{},{tags:false},r._getOptions(this)))});m.resolve()})}else{if(typeof c.fn.bsSelectInput==="function"){this.$elem.find(r.options.multiSelect2Selector).each(function(){c(this).bsSelectInput(c.extend(true,{},{tags:false},r._getOptions(this)))})}else{throw"bforms.select2 script must be loaded before calling initUI"}}}}if(this.options.autocomplete===true&&this.$elem.find(this.options.autocompleteSelector).length){if(this.loadAMD){var x=c.Deferred();this.deferredList.push(x);require(["bforms-typeahead"],function(){r.$elem.find(r.options.autocompleteSelector).each(function(){c(this).bsTypeahead(r._getOptions(this))});x.resolve()})}else{if(typeof c.fn.bsTypeahead==="function"){this.$elem.find(this.options.autocompleteSelector).each(function(){c(this).bsTypeahead(r._getOptions(this))})}else{throw"bforms.typeahead script must be loaded before calling initUI"}}}if(this.options.radioButtons===true&&this.$elem.find(this.options.radioButtonsSelector).length){if(this.loadAMD){var p=c.Deferred();this.deferredList.push(p);require(["bforms-radiolist"],function(){r.$elem.find(r.options.radioButtonsSelector).each(function(){c(this).bsRadioButtonsList(r._getOptions(this))});p.resolve()})}else{if(typeof c.fn.bsRadioButtonsList==="function"){this.$elem.find(this.options.radioButtonsSelector).each(function(){c(this).bsRadioButtonsList(r._getOptions(this))})}else{throw"radioButtonsList script must be loaded before calling initUI"}}}if(this.options.checkBoxList===true){if(this.loadAMD===true){var f=c.Deferred();this.deferredList.push(f);require(["bforms-checklist"],function(){r.$elem.find(r.options.checkBoxListSelector).each(function(){c(this).bsCheckBoxList(r._getOptions(this))});f.resolve()})}else{if(typeof c.fn.bsCheckBoxList==="function"){this.$elem.find(this.options.checkBoxListSelector).each(function(){c(this).bsCheckBoxList(r._getOptions(this))})}else{throw"CheckBoxList script must be loaded before calling initUI"}}}if(this.options.datepicker===true&&this.$elem.find(this.options.datepickerSelector).length){if(this.loadAMD){var g=c.Deferred();this.deferredList.push(g);require(["bforms-datepicker"],function(){r.$elem.find(r.options.datepickerSelector).each(function(C,B){var z=c(B);var D=typeof c.browser!=="undefined"&&c.browser.msie;if(!D){z.prop("type","text")}var A=r.$elem.find('.bs-date-iso[data-for="'+z.prop("name")+'"]');z.bsDatepicker(c.extend(true,{},r._getOptions(this),{type:"datepicker",altFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],initialValue:A.val(),language:y}))});g.resolve()})}else{if(typeof c.fn.bsDatepicker==="function"){this.$elem.find(r.options.datepickerSelector).each(function(C,B){var z=c(B);var D=typeof c.browser!=="undefined"&&c.browser.msie;if(!D){z.prop("type","text")}var A=r.$elem.find('.bs-date-iso[data-for="'+z.prop("name")+'"]');z.bsDatepicker(c.extend(true,{},r._getOptions(this),{type:"datepicker",altFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],initialValue:A.val(),language:y}))})}else{throw"bDatepicker script must be loaded before calling initUI"}}}if(this.options.timepicker===true&&this.$elem.find(this.options.timepickerSelector).length){if(this.loadAMD){var v=c.Deferred();this.deferredList.push(v);require(["bforms-datepicker"],function(){r.$elem.find(r.options.timepickerSelector).each(function(C,B){var z=c(B);var D=typeof c.browser!=="undefined"&&c.browser.msie;if(!D){z.prop("type","text")}var A=r.$elem.find('.bs-date-iso[data-for="'+z.prop("name")+'"]');z.bsDatepicker(c.extend(true,{},r._getOptions(this),{type:"timepicker",is12Hours:true,altFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],initialValue:A.val(),language:y}))});v.resolve()})}else{if(typeof c.fn.bsDatepicker==="function"){r.$elem.find(r.options.timepickerSelector).each(function(C,B){var z=c(B);var D=typeof c.browser!=="undefined"&&c.browser.msie;if(!D){z.prop("type","text")}var A=r.$elem.find('.bs-date-iso[data-for="'+z.prop("name")+'"]');z.bsDatepicker(c.extend(true,{},r._getOptions(this),{type:"timepicker",is12Hours:true,altFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],initialValue:A.val(),language:y}))})}else{throw"bDatepicker script must be loaded before calling initUI"}}}if(this.options.datetimepicker===true&&this.$elem.find(this.options.datetimepickerSelector).length){if(this.loadAMD){var i=c.Deferred();this.deferredList.push(i);require(["bforms-datepicker"],function(){r.$elem.find(r.options.datetimepickerSelector).each(function(C,B){var z=c(B);z.attr("type","text");var A=r.$elem.find('.bs-date-iso[data-for="'+z.prop("name")+'"]');z.bsDatepicker(c.extend(true,{},r._getOptions(this),{type:"datetimepicker",is12Hours:true,altFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],initialValue:A.val(),language:y}))});i.resolve()})}else{if(typeof c.fn.bsDatepicker==="function"){r.$elem.find(r.options.datetimepickerSelector).each(function(C,B){var z=c(B);var D=typeof c.browser!=="undefined"&&c.browser.msie;if(!D){z.prop("type","text")}var A=r.$elem.find('.bs-date-iso[data-for="'+z.prop("name")+'"]');z.bsDatepicker(c.extend(true,{},r._getOptions(this),{type:"datetimepicker",is12Hours:true,altFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],initialValue:A.val(),language:y}))})}else{throw"bDatepicker script must be loaded before calling initUI"}}}if(this.options.datetimerange===true&&this.$elem.find(this.options.datetimerangeSelector).length){if(this.loadAMD){var j=c.Deferred();this.deferredList.push(j);require(["bforms-datepicker-range"],function(){r.$elem.find(r.options.datetimerangeSelector).each(function(D,C){var z=c(C);var H=z.prop("name");var E=typeof c.browser!=="undefined"&&c.browser.msie;if(!E){z.prop("type","text")}var B=r.$elem.find('.bs-range-from[data-for="'+H+'"]'),A=r.$elem.find('.bs-range-to[data-for="'+H+'"]'),G=B.data("minvalue"),F=A.data("maxvalue");z.bsDateRange(c.extend(true,{},r._getOptions(this),{startOptions:{type:"datetimepicker",initialValue:B.val(),defaultDate:(typeof A.val()!=="undefined"&&A.val()!="")?"-1d":"now",defaultDateValue:(typeof A.val()!=="undefined"&&A.val()!="")?A.val():false,language:y,minDate:G||null},endOptions:{type:"datetimepicker",initialValue:A.val(),language:y,maxDate:F||null},startAltFields:[{selector:B,format:"YYYY-MM-DD HH:mm:ss"}],endAltFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],language:y,allowDeselectStart:B.data("allowdeselect"),allowDeselectEnd:A.data("allowdeselect")}))});j.resolve()})}else{if(typeof c.fn.bsDateRange==="function"){this.$elem.find(this.options.datetimerangeSelector).each(function(D,C){var z=c(C);var G=z.prop("name");z.attr("type","text");var B=r.$elem.find('.bs-range-from[data-for="'+G+'"]'),A=r.$elem.find('.bs-range-to[data-for="'+G+'"]'),F=B.data("minvalue"),E=A.data("maxvalue");z.bsDateRange(c.extend(true,{},r._getOptions(this),{startOptions:{type:"datetimepicker",initialValue:B.val(),defaultDate:(typeof A.val()!=="undefined"&&A.val()!="")?"-1d":"none",defaultDateValue:(typeof A.val()!=="undefined"&&A.val()!="")?A.val():false,language:y,minDate:F||null},endOptions:{type:"datetimepicker",initialValue:A.val(),language:y,maxDate:E||null},startAltFields:[{selector:B,format:"YYYY-MM-DD HH:mm:ss"}],endAltFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],language:y,allowDeselectStart:B.data("allowdeselect"),allowDeselectEnd:A.data("allowdeselect")}))})}else{throw"bRangepicker script must be loaded before calling initUI"}}}if(this.options.daterange===true&&this.$elem.find(this.options.daterangeSelector).length){if(this.loadAMD){var h=c.Deferred();this.deferredList.push(h);require(["bforms-datepicker-range"],function(){r.$elem.find(r.options.daterangeSelector).each(function(D,C){var z=c(C);var G=z.prop("name");var B=r.$elem.find('.bs-range-from[data-for="'+G+'"]'),A=r.$elem.find('.bs-range-to[data-for="'+G+'"]'),F=B.data("minvalue"),E=A.data("maxvalue");z.bsDateRange(c.extend(true,{},r._getOptions(this),{startOptions:{type:"datepicker",initialValue:B.val(),defaultDate:(typeof A.val()!=="undefined"&&A.val()!="")?"-1d":"now",defaultDateValue:(typeof A.val()!=="undefined"&&A.val()!="")?A.val():false,language:y,minDate:F||null},endOptions:{type:"datepicker",initialValue:A.val(),language:y,maxDate:E||null},startAltFields:[{selector:B,format:"YYYY-MM-DD HH:mm:ss"}],endAltFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],language:y,allowDeselectStart:B.data("allowdeselect"),allowDeselectEnd:A.data("allowdeselect")}))});h.resolve()})}else{if(typeof c.fn.bsDateRange==="function"){this.$elem.find(this.options.daterangeSelector).each(function(D,C){var z=c(C);var G=z.prop("name");var B=r.$elem.find('.bs-range-from[data-for="'+G+'"]'),A=r.$elem.find('.bs-range-to[data-for="'+G+'"]'),F=B.data("minvalue"),E=A.data("maxvalue");z.bsDateRange(c.extend(true,{},r._getOptions(this),{startOptions:{type:"datepicker",initialValue:B.val(),defaultDate:(typeof A.val()!=="undefined"&&A.val()!="")?"-1d":"now",defaultDateValue:(typeof A.val()!=="undefined"&&A.val()!="")?A.val():false,language:y,minDate:F||null},endOptions:{type:"datepicker",initialValue:A.val(),language:y,maxDate:E||null},startAltFields:[{selector:B,format:"YYYY-MM-DD HH:mm:ss"}],endAltFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],language:y,allowDeselectStart:B.data("allowdeselect"),allowDeselectEnd:A.data("allowdeselect")}))})}else{throw"bRangepicker script must be loaded before calling initUI"}}}if(this.options.timerange===true&&this.$elem.find(this.options.timerangeSelector).length){if(this.loadAMD){var w=c.Deferred();this.deferredList.push(w);require(["bforms-datepicker-range"],function(){r.$elem.find(r.options.timerangeSelector).each(function(D,C){var z=c(C);var G=z.prop("name");var B=r.$elem.find('.bs-range-from[data-for="'+G+'"]'),A=r.$elem.find('.bs-range-to[data-for="'+G+'"]'),F=B.data("minvalue"),E=A.data("maxvalue");z.bsDateRange(c.extend(true,{},r._getOptions(this),{startOptions:{type:"timepicker",initialValue:B.val(),defaultDate:(typeof A.val()!=="undefined"&&A.val()!="")?"-1h":"now",defaultDateValue:(typeof A.val()!=="undefined"&&A.val()!="")?A.val():false,language:y,minDate:F||null},endOptions:{type:"timepicker",language:y,initialValue:A.val(),maxDate:E||null},startAltFields:[{selector:B,format:"YYYY-MM-DD HH:mm:ss"}],endAltFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],language:y,allowDeselectStart:B.data("allowdeselect"),allowDeselectEnd:A.data("allowdeselect")}))});w.resolve()})}else{if(typeof c.fn.bsDateRange==="function"){this.$elem.find(this.options.timerangeSelector).each(function(D,C){var z=c(C);var G=z.prop("name");var B=r.$elem.find('.bs-range-from[data-for="'+G+'"]'),A=r.$elem.find('.bs-range-to[data-for="'+G+'"]'),F=B.data("minvalue"),E=A.data("maxvalue");z.bsDateRange(c.extend(true,{},r._getOptions(this),{startOptions:{type:"timepicker",initialValue:B.val(),defaultDate:(typeof A.val()!=="undefined"&&A.val()!="")?"-1h":"now",defaultDateValue:(typeof A.val()!=="undefined"&&A.val()!="")?A.val():false,language:y,minDate:F||null},endOptions:{type:"timepicker",language:y,initialValue:A.val(),maxDate:E||null},startAltFields:[{selector:B,format:"YYYY-MM-DD HH:mm:ss"}],endAltFields:[{selector:A,format:"YYYY-MM-DD HH:mm:ss"}],language:y,allowDeselectStart:B.data("allowdeselect"),allowDeselectEnd:A.data("allowdeselect")}))})}else{throw"bsDateRangepicker script must be loaded before calling initUI"}}}if(this.options.numberrange===true&&this.$elem.find(this.options.numberrangeSelector).length){if(this.loadAMD){var n=c.Deferred();this.deferredList.push(n);require(["bforms-rangepicker"],function(){r.$elem.find(r.options.numberrangeSelector).each(function(D,C){var z=c(C);var G=z.prop("name");var B=r.$elem.find('.bs-range-from[data-for="'+G+'"]'),A=r.$elem.find('.bs-range-to[data-for="'+G+'"]'),F=-Infinity,E=+Infinity;var H=[];if(B.length){H.push({title:B.data("display"),value:B.val(),start:true},{title:A.data("display"),value:A.val(),end:true});F=B.data("minvalue"),E=A.data("maxvalue")}else{H.push({title:z.data("display"),value:z.val(),single:true})}z.bsRangePicker(c.extend(true,{},r._getOptions(this),{ranges:H,language:y,allowSame:true,listeners:[B,A],minValue:F,maxValue:E}))});n.resolve()})}else{if(typeof c.fn.bsRangePicker==="function"){this.$elem.find(this.options.numberrangeSelector).each(function(D,C){var z=c(C);var E=z.prop("name");var B=r.$elem.find('.bs-range-from[data-for="'+E+'"]'),A=r.$elem.find('.bs-range-to[data-for="'+E+'"]');var F=[];if(B.length){F.push({title:B.data("display"),value:B.val()},{title:A.data("display"),value:A.val()})}else{F.push({title:z.data("display"),value:z.val()})}z.bsRangePicker(c.extend(true,{},r._getOptions(this),{ranges:F,language:y,minValue:0,maxValue:100,allowSame:true,listeners:[B,A]}))})}else{throw"bsRangepicker script must be loaded before calling initUI"}}}if(this.options.singlenumberrange===true&&this.$elem.find(this.options.singlenumberrangeSelector).length){if(this.loadAMD){var s=c.Deferred();this.deferredList.push(s);require(["bforms-rangepicker"],function(){r.$elem.find(r.options.singlenumberrangeSelector).each(function(C,B){var z=c(B);var F=z.prop("name");var A=r.$elem.find('.bs-number-value[data-for="'+F+'"]'),E=A.data("minvalue"),D=A.data("maxvalue");var G=[];G.push({title:z.data("display"),value:A.val(),});z.bsRangePicker(c.extend(true,{},r._getOptions(this),{ranges:G,language:y,allowSame:true,listeners:[A],minValue:E,maxValue:D}))});s.resolve()})}else{if(typeof c.fn.bsRangePicker==="function"){r.$elem.find(r.options.singlenumberrangeSelector).each(function(C,B){var z=c(B);var F=z.prop("name");var A=r.$elem.find('.bs-number-value[data-for="'+F+'"]'),E=A.data("minvalue"),D=A.data("maxvalue");var G=[];G.push({title:z.data("display"),value:A.val(),});z.bsRangePicker(c.extend(true,{},r._getOptions(this),{ranges:G,language:y,allowSame:true,listeners:[A],minValue:E,maxValue:D}))})}else{throw"bsRangepicker script must be loaded before calling initUI"}}}if(this.options.singlenumberrangeinline===true&&this.$elem.find(this.options.singlenumberrangeinlineSelector).length){if(this.loadAMD){var t=c.Deferred();this.deferredList.push(t);require(["bforms-rangepicker"],function(){r.$elem.find(r.options.singlenumberrangeinlineSelector).each(function(C,B){var z=c(B);var F=z.prop("name");var A=r.$elem.find('.bs-number-value[data-for="'+F+'"]'),E=A.data("minvalue"),D=A.data("maxvalue");var G=[];G.push({title:z.data("display"),value:A.val(),});z.bsRangePicker(c.extend(true,{},r._getOptions(this),{ranges:G,language:y,allowSame:true,listeners:[A],minValue:E,maxValue:D,isSingleNumberInline:true}))});t.resolve()})}else{if(typeof c.fn.bsRangePicker==="function"){r.$elem.find(r.options.singlenumberrangeinlineSelector).each(function(C,B){var z=c(B);var F=z.prop("name");var A=r.$elem.find('.bs-number-value[data-for="'+F+'"]'),E=A.data("minvalue"),D=A.data("maxvalue");var G=[];G.push({title:z.data("display"),value:A.val(),});z.bsRangePicker(c.extend(true,{},r._getOptions(this),{ranges:G,language:y,allowSame:true,listeners:[A],minValue:E,maxValue:D,isSingleNumberInline:true}))})}else{throw"bsRangepicker script must be loaded before calling initUI"}}}this.promise.done(c.proxy(function(){var z=window.setTimeout(c.proxy(function(){if(this.$elem.hasClass(this.options.loadingClass)){this.$elem.removeClass(this.options.loadingClass)}else{this.$elem.find(this.options.loadingSelector).removeClass(this.options.loadingClass)}window.clearTimeout(z)},this),0)},this))};return d})(jQuery);a(function(){a("body").on("click",".input-group-addon",function(){var c=a(this).next();if(!c.is(":visible")||!c.is("input, select")){c=c.find("input:visible, select:visible").first()}c.trigger("focus")})});a(function(){a.placeholder.shim()});return b});(function(a){if(typeof define==="function"&&define.amd){define("bforms-resetInput",["jquery"],a)}else{a(window.jQuery)}})(function(a){a.fn.extend({bsResetInput:function(){return a(this).each(function(){if(!a(this).hasClass("hasResetInput")){return new b(a(this))}})}});var b=(function(){function c(f){function g(i,h){if(i.val()!=""){h.show()}else{h.hide()}}function d(j){var h=a('<button type="button" class="delete js-resetInputBtn">x</button>'),i=a('<div class="reset-container"></div>');if(j.val()==""){h.hide()}j.wrapAll(i);j.after(h);g(j,h);return h}var e=d(f);f.addClass("hasResetInput");f.on("change",{self:f,button:e},function(h){g(h.data.self,h.data.button)});e.on("click",{self:f},function(h){h.data.self.val("");e.hide()})}return c})()});(function(a){if(typeof define==="function"&&define.amd){define("bforms-extensions",["jquery"],a)}else{a(window.jQuery)}})(function(a,b){a.fn.parseForm=function(i){var c=a(this);var d={};if(c.length>0){var e=c.find('input[type!="radio"], input[type="radio"]:checked, select, textarea, .checkBoxList-done');for(var g in e){if(!isNaN(g)){var f=a(e[g]);if(f.data("noparse")===true||(f.prev().data("noparse")&&f.prev().prop("name")==f.prop("name")===true)){continue}if(f.hasClass("checkBoxList-done")){a.extend(true,d,f.bsParseCheckList())}else{var h=f.data("formname")||f.attr("name");if(i&&h){h=h.replace(i,"")}var j=f.data("select2")!=null?f.select2("val"):f.val();if("undefined"!==typeof(h)){if(f.attr("type")==="checkbox"){j=f.is(":checked");d[h]=j}else{if("object"!==typeof(j)){if("undefined"===typeof(d[h])){d[h]=j}}else{if(j!==null){for(k in j){d[h+"["+k+"]"]=j[k]}}}}}}}}c.find('input[type="file"]').each(function(o,l){var m=l.files;if(m!=b){var p=l.name;if(m.length>1){for(var n=0;n<m.length;n++){d[p+"["+n+"]"]=m[n]}}else{if(m.length==1){d[p]=m[0]}}}})}return d};a.fn.bsResetForm=function(d,e,g){a(this).find("input:not(.hasDatepicker, .hasRangepicker,.hasNumberRangepicker, "+e+"), textarea:not("+e+")").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"url":case"email":case"textarea":if(a(this).hasClass("tag_counter")){a(this).val("0")}else{a(this).val("");if(g===true){a(this).trigger("change")}}break;case"checkbox":if(a(this).hasClass("checkBox-done")){a(this).attr("checked",a(this).data("initialvalue"));a(this).trigger("change")}else{a(this).attr("checked",false)}break;case"radio":this.checked=false;break;case"range":a(this).val(0);break;case"file":a(this).val("");break;case"hidden":if(typeof a(this).data("select2")!=="undefined"){a(this).select2("val","")}}});a(this).find("select:not("+e+")").each(function(){var h=a(this);if(h.data("initialvalue")){if(h.data("select2")!=null){h.select2("val",h.data("initialvalue"))}else{h.val(h.data("initialvalue"))}}else{if(h.data("select2")!=null){h.select2("val","")}else{h.val("")}}h.trigger("change")});a(this).find(".bs-radio-list").each(function(){if(a(this).data("initialvalue")!=b){a(this).bsRadioButtonsListUpdateSelf(a(this).data("initialvalue"))}});a(this).find(".hasDatepicker").each(function(){a(this).bsDatepicker("resetValue")});a(this).find(".hasRangepicker").each(function(){a(this).bsDateRange("resetValue")});a(this).find(".hasNumberRangepicker").each(function(){a(this).bsRangePicker("resetValue")});var f=a(this).find(".radioButtonsList-done");if(f.length>0){f.bsResetRadioButtons()}if(d!==false){a(this).find("input:first").focus()}var c=a([]);if((a(this)).is("form")){c=a(this)}else{c=a(this).find("form")}if(c.length){c.each(function(){var h=a(this).data("validator");if(typeof h!=="undefined"&&typeof h.resetForm==="function"){h.resetForm()}})}return a(this)}});(function(a){if(typeof define==="function"&&define.amd){define("validate-ro",["jquery","bforms-validate"],a)}else{a(window.jQuery)}}(function(a){a.extend(a.validator.messages,{required:"Acest câmp este obligatoriu.",mandatory:"Acest câmp este obligatoriu",remote:"Te rugăm să completezi acest câmp.",email:"Te rugăm să introduci o adresă de mail validă",url:"Te rugăm sa introduci o adresă URL validă.",date:"Te rugăm să introduci o dată corectă.",dateISO:"Te rugăm să introduci o dată (ISO) corectă.",number:"Te rugăm să introduci un număr valid.",digits:"Te rugăm să introduci doar cifre.",creditcard:"Te rugăm să introduci un număr de card de credit valid.",equalTo:"Te rugăm să reintroduci valoarea.",maxlength:a.format("Te rugăm să nu introduci mai mult de {0} caractere."),minlength:a.format("Te rugăm să introduci cel pu?in {0} caractere."),rangelength:a.format("Te rugăm să introduci o valoare între {0} ?i {1} caractere."),range:a.format("Te rugăm să introduci o valoare între {0} ?i {1}."),max:a.format("Te rugăm să introduci o valoare egal sau mai mică decât {0}."),min:a.format("Te rugăm să introduci o valoare egal sau mai mare decât {0}.")})}));(function(a){if(typeof define==="function"&&define.amd){define("select2-ro",["jquery","select2"],a)}else{a(window.jQuery)}}(function(a){a.extend(a.fn.select2.defaults,{formatNoMatches:function(){return"Nu a fost găsit nimic"},formatInputTooShort:function(b,c){var d=c-b.length;return"Vă rugăm să introduce?i incă "+d+" caracter"+(d==1?"":"e")},formatInputTooLong:function(b,c){var d=b.length-c;return"Vă rugăm să introduce?i mai pu?in de "+d+" caracter"+(d==1?"":"e")},formatSelectionTooBig:function(b){return"Ave?i voie să selecta?i cel mult "+b+" element"+(b==1?"":"e")},formatLoadMore:function(b){return"Se încarcă..."},formatSearching:function(){return"Căutare..."},formatPlaceholder:function(){return"Alege?i"},formatSaveItem:function(b){return"Salvează "+b},})}));